





































































































































[{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/pix/outbound_pix_payments/brcode A API para criação de um Pix é a mesma, independente se você deseja enviar um Pix via inserção manual de dados ou via chave. Se o pagamento for iniciado por meio da leitura de um QR Code, você vai precisar obter os dados do QR Code primeiro, para depois criar o Pix.\nE esse é o objetivo desse endpoint.\nHEADERS  authorization* string\nExemplo:\n{ \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\" } \nBODY PARAMS  O body deve conter a string do QRCode obtida a partir da imagem ou copia e cola. Para QRCode do tipo dinâmico com multa, juros, desconto é necessário informar os campos payment_date e owner_account\nbrcode* string\nowner_account string Identificador do usuário da conta\npayment_date string Data de pagamento da cobrança com vencimento Format: YYYY/MM/DD\nBody:\n{ \"brcode\": \"00020126580014br.gov.bcb.pix0136123e4567-e12b-12d1-a456-4266554400005204000053039865802BR5913Fulano de Tal6008BRASILIA62070503***63041D3D\" } \nResponses  A resposta varia de acordo com o tipo de QR Code que você está lendo, que pode ser um QR Code Estático, um QR Code Dinâmico de pagamento imediato ou um QR Code Dinâmico com multa, juros, desconto. Esse último ainda não é suportado, entra em vigor no Brasil em maio, já estamos desenvolvendo.\nPayload retornado ao consultar um QR Code estático  200 OK { \"type\": \"static\", \"static\": { \"key\": \"14413050762\", \"key_type\": \"phone\", \"transaction_id\": \"4DE46328260C11EB91C04049FC2CA371\", \"amount\": 111 } } \nPayload retornado ao consultar um QR Code dinâmico  200 OK { \"type\": \"dynamic\", \"dynamic\": { \"created_at\": \"2020-11-13T23:59:49Z\", \"requested_at\": \"2020-11-28T03:15:39Z\", \"expiration\": 86400, \"key\": \"14413050762\", \"customer\": { \"name\": \"Fulano CO\", \"document\": \"50443756000183\", \"document_type\": \"cnpj\" }, \"additional_data\": [ { \"key\": \"title\", \"value\": \"description\" } ], \"revision\": 0, \"request_for_payer\": \"do something\", \"status\": \"CANCELLED_BY_BENEFICIARY\", \"transaction_id\": \"4DE46328260C11EB91C04049FC2CA371\", \"amount\": 111 } } \nRetornado quando o QRCode não pode ser obtido  400 { \"type\": \"srn:error:bad_request\" } \nRetornado quando o tipo do QRCode não foi suportado ainda  Ex.: QRCode com vencimento, juros e multa.\n501 { \"type\": \"srn:error:brcode_not_supported\" } ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/pix/buscar-dados-qrcode/","tags":"","title":"Buscar dados do QRCode"},{"body":" Objetivo dessa documentação é pontuar as particularidades de cada tipo de recarga oferecida na nossa API.\nPara efetuar uma recarga o cliente precisa ter saldo suficiente em conta, a recarga é cobrada logo após a confirmação;\nHorário de funcionamento A API de Recargas fica disponível todos os dias da semana, 24 horas por dia!  Tipos de Recargas    Recarga para Celular;\n  Recarga para Jogos;\n  Recarga para Conteúdo Digital;\n  Recarga para TV por Assinatura;\n  Recarga para Meios de Transporte.\n  Glossário  Informações (Chave/Valor) que serão usadas nos fluxos de recargas.\n   Chave Valor     account_id Identificador da conta.   amount Valor da recarga desejado.   provider_id Id da operadora.   client_code CPF ou Código do assinante do produto.   product_quota Informação referente a quota do bilhete único (SP).   product_code Informação referente ao código do bilhete único (SP).   x-stone-idempotency-key Valor exclusivo gerado pelo cliente que o servidor de recursos usa para reconhecer novas tentativas subsequentes da mesma solicitação. (Opcional)    ","categories":"","description":"","excerpt":" Objetivo dessa documentação é pontuar as particularidades de cada …","ref":"/docs/referencia-da-api/recargas/overview/","tags":"","title":"Overview"},{"body":" POST https://sandbox-api.openbank.stone.com.br/resources/v1/authorization/actions/authorize Esse endpoint tem como finalidade autorizar actions de um subject sobre um determinado resource.\nO objetivo de uma autorização é assegurar que o subject (pessoa ou aplicação autenticada) possa visualizar, alterar ou deletar um recurso. O fluxo começa no front-end, com um request cuja ação seja tanto de leitura quanto de escrita. Esse request precisa ser encaminhado para o serviço responsável por este recurso. Este serviço é chamado de resource server. Ao receber uma requisição que demande autorização, o resource server deve perguntar ao panda se o subject do token tem ou não autorização para performar aquela ação.\nQuem pode usar esse endpoint?  Apenas client applications identificadas como resource_server podem solicitar autorizações por esse endpoint.\nCaso não tenha uma aplicação criada em banking ainda, solicite a criação de uma por aqui.\nCaso já tenha uma aplicação, é necessário solicitar que a sua aplicação seja definida como um resource_server.\nComo gero o token para acessar esse endpoint?  Você pode seguir o guia descrito clicando aqui.\nGlossário     Termo Definição     subject Quem deseja fazer a ação.   action Ação a ser autorizada.   resource Recurso que sofrerá a ação.   resource_server Responsável por gerenciar o domínio do recurso.   request Pedido que um cliente realiza a um servidor.    Campos do objeto Action    Campo Descrição     context Objeto contendo o id e o tipo do recurso a ser autorizado.   name Nome da Ação.   resource_id Account_id.   resource_type Tipo do Recurso.    Campos do objeto Subject    Campo Descrição     token Sessão do usário. Deve ser o token presente no momento da requisição a ser autorizada.   context Objeto contendo informações úteis sobre a sessão ativa.    Campos do objeto Context    Campo Descrição     request_hash Deve ser um hash do corpo da requisição.   user_agent O header de user_agent do subject.   challenge_solution JWE com a solução do challenge (caso seja necessário).    Fluxo de autorização  Agora que geramos o token para acessar o endpoint, no passo anterior, segue exemplo de um request para solicitar um fluxo de autorização:\nHeader Request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\" } Body Request { \"action\": { \"context\": { \"resource_id\": \"1212b12d-8e2e-4661-a6d9-122bb8c46bb2\", \"resource_type\": \"srn:resource:paymentaccount\" }, \"name\": \"show_account_balance_public\" }, \"subject\": { \"token\": \"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJUUUY0c2p5RUJfRUthV0VfSkxEZExHMVlKYXVnNklTV0tQbEdEeG9qNzhjIn0.eyJqdGkiOiIxMjI5NjZmZS04ZDVlLTQ3MGUtOTY3MC0xOTE3N2MyYTU3OTEiLCJleHAiOjE2MTY2OTk3MjIsIm5iZiI6MCwiaWF0IjoxNjE2Njk4ODIyLCJpc3MiOiJodHRwczovL2xvZ2luLnNhbmRib3guc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2FjY291bnQiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiMDlhZmI1NWUtYzRmOC00N2NiLWJmOTMtZWM3M2VlY2NiZWJlIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiYWJjX3dlYkBvcGVuYmFuay5zdG9uZS5jb20uYnIiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiJhZGM4OTY2ZS1mOGU2LTQ3ZjEtYTU4Yi0zMzg3OThjYTgxNmEiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHBzOi8vc2FuZGJveC5jb250YS5zdG9uZS5jb20uYnIiLCJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCJodHRwczovL3NhbmRib3gtZGFzaGJvYXJkLm9wZW5iYW5rLnN0b25lLmNvbS5iciIsImh0dHBzOi8vc2FuZGJveC5vcGVuYmFuay5zdG9uZS5jb20uYnIiXSwic2NvcGUiOiJlbnRpdHk6bGVnYWxfd3JpdGUgZW50aXR5OmxvYW46Y3JlYXRlIGludmVzdG1lbnQ6c3BhY2U6cmVhZCBjYXJkOnJlYWQgaW52ZXN0bWVudDpyZWFkIGVudGl0eTpyZWFkIHByaW5jaXBhbDpjb25zZW50IHBpeDplbnRyeSBpbnZlc3RtZW50OnNwYWNlOmRlcG9zaXQgc3RvbmVfc3ViamVjdF9pZCBlbnRpdHk6bG9hbjphY2NlcHQgcGF5bWVudGFjY291bnQ6KiBpbnZlc3RtZW50OnNwYWNlOndyaXRlIHJlY2VpdmFibGU6YWxsIGV4cGVuZDp0cmFuc2ZlcnM6ZXh0ZXJuYWwgc2FsYXJ5OnBvcnRhYmlsaXR5IGV4cGVuZDpwYXlyb2xscyBwaXg6ZW50cnlfY2xhaW0gcGl4OnBheW1lbnRfaW52b2ljZSBpbnZlc3RtZW50OnNwYWNlOmRlbGV0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cGF5bWVudGxpbmtzOndyaXRlIGV4cGVuZDpib2xldG9pc3N1YW5jZSBleHBlbmQ6cGF5bWVudHMgZW1haWwgaW52ZXN0bWVudDp3cml0ZSBzdG9uZV9hY2NvdW50cyBleHBlbmQ6cmVhZCBwcm9maWxlIGV4cGVuZDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGl4OnBheW1lbnQgcGF5bWVudGFjY291bnQ6cGF5bWVudGxpbmtzOnJlYWQgZXhwZW5kOnBheW1lbnRsaW5rcyBjYXJkOndyaXRlIGludmVzdG1lbnQ6c3BhY2U6d2l0aGRyYXdhbCBleHBlbmQ6cGl4X3BheW1lbnQiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInN0b25lX3N1YmplY3RfaWQiOiJ1c2VyOmQwMzY5Y2RlLWQ5MjMtNDAzYi05MzgzLWExZTQ1YjU3NTJlMCIsIm5hbWUiOiJCUlVOTyBERSBNRURFSVJPUyBSSUJFSVJPIEJSVU5PIERFIE1FREVJUk9TIFJJQkVJUk8iLCJzdG9uZV9hY2NvdW50cyI6ImVuYWJsZWQiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJicnVuby5tcmliZWlyb0BzdG9uZS5jb20uYnIiLCJnaXZlbl9uYW1lIjoiQlJVTk8gREUgTUVERUlST1MgUklCRUlSTyIsImxvY2FsZSI6InB0LUJSIiwiZmFtaWx5X25hbWUiOiJCUlVOTyBERSBNRURFSVJPUyBSSUJFSVJPIiwiZW1haWwiOiJicnVuby5tcmliZWlyb0BzdG9uZS5jb20uYnIifQ.GSdzJNpRULNCZoiAP4njh4fog-Swl-REI25KRGA_qKohUf1wWG72YSZtl1VAM5x7CF0mK2oQg_S0jv7CdFQemICsLyt_aKypqOlfgGQTuUmpVQ88uvmSYzNuxjU4rbCp4UpEgygUmHluv7mf_QxfyoAvS5t0VhG0ECC9NrZpduBkJLG5b-IurM3V-YoIr2Er1HsqXcvV559BV9LJze-vKcAgtN6WltkSkWaLOH7D0VZoGX6k0uD3emnFpdcKtbb0eDR5HjfDAAwN-ahCAl7_G40el5fCInXwigyhY1kkzY-DcFlgbsjreSbtH_xA7h_9yKUtwnHJn3IsY-KuffhoOg\" }, \"context\": {} } \nCaso a action não solicite challenge, a resposta do request será essa:\nResponse { \"action\": { \"name\": \"show_account_balance_public\", \"response\": null, \"status\": \"authorized\" }, \"id\": 2772275, \"optional_actions\": [] } \nCaso a action a ser autorizada demande challenge, o fluxo seguinte deverá ser seguido.\nFluxo de autorização de challenge   A requisição que necessita do challenge retornará  status: 403\n{ \"challenge\": { \"id\": id, \"required_types\": [\"pin\"], \"type\": \"srn:error:challenge_required\", \"details\": {\"error\": \"challenge_required\"} } } Note que required_types indicará quais tipos de credencial o subject deverá preencher pra conseguir uma autorização. Alguns valores possíveis são: login_password, pin e totp.\nO próximo request deverá conter o challenge_solution.  Pra montar o challenge_solution você deverá gerar um JWE, onde o valor descriptografado seja um json no seguinte formato:\n{ \"challenge_id\": challenge_id, \"pin\": pin } O challenge id é o valor devolvido no request anterior e segunda chave do json deverá ser o tipo de credencial e seu valor correspondente.\nPara gerar o JWE você usará a chave com \"use\": \"enc\" exposta em api/v1/discovery/keys. O protected_header desse JWE deverá ser algo como {\"alg\":\"RSA-OAEP\",\"enc\":\"A256GCM\"}.\nApós a solução do challenge, você receberá a resposta indicando o status da autorização ou uma resposta com status 403 o problema na solução do challenge ou na falta de permissão do subject.\nComo gerar um JWE  Para gerar um token JWE (JWT criptografado) seguimos 3 passos:\n  Escrever o conteúdo a ser criptografado (payload).\n  Buscar a chave pública da Stone, no endpoint /api/v1/discovery/keys, cujo campo “use” seja igual a “enc”;\n  Usar uma biblioteca de criptografia passando o payload, a chave pública e o algoritmo utilizado, no caso, RSA-OAEP-256\n  Segue um exemplo de como gerar um JWE em Python:\nimport requests import json from jwcrypto import jwe, jwk import sys def build_challenge_solution(challenge_id, typ, solution_value): dic = {\"challenge_id\": challenge_id} dic.update({typ: solution_value}) return generate_jwe(json.dumps(dic)) def generate_jwe(payload): key = get_public_key() public_key = jwk.JWK() public_key = public_key.from_json(json.dumps(key)) encrypted = jwe.JWE(payload.encode(\"utf-8\"), recipient=public_key, protected={ \"alg\": \"RSA-OAEP-256\", \"enc\": \"A256GCM\", \"kid\": key[\"kid\"], }) return encrypted.serialize(compact=True) def get_public_key(): response = requests.get( \"https://sandbox-api.openbank.stone.com.br/api/v1/discovery/keys\") for key in response.json()[\"keys\"]: if key[\"use\"] == \"enc\": return key if __name__ == \"__main__\": [challenge_id, typ, value] = sys.argv[1:] solution = build_challenge_solution(challenge_id, typ, value) print(solution) Response A resposta será um token que será utilizado no challenge.\neyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiNjdkY2JhZTAtN2JlYi0xMWU5LTllZDUtMDI0MmFjMTEwMDAyIn0.FhyzgGAcmitGYoyzRxO9GhgQ-nMj1DK6gCREmnockGBxjbdPPae7CQPeVzgN50oqt2sK7tEmAMRQxBFAjfsa5bPQT2s-8s3a2M0S01cCwuQJCv43O3EFQoXGv113fGXobEzmyzGY6uAkc6Gmn1CdluN6NfNJIKnplk6GLpgUlrRIrkcEcgPUnJhvhavc-sNK8DUdAT9CaOHyrtZmAsfbmeMc5UdApcM6OJYz1R-4P_92Ygc3WCy2w7vpzwDpHq1z4EjzH7RT9Nxw20CZdi7BWZdgThBWQddikZETB41ghsO_6xOA7GorOl0bvYaSnHrZfVXdbMhltFnKy9WlA_BW66KO2UudkPjLL-SMcM2penwrPXqYMm7z0WIG3hmxH2xYw3TWjED1ZydNgsBH7s14QcAul3TrOS_obHyUrr753o30PTopuFmQesLzoUN0j1qJ6Xm-N2oXdjNEN7TBTXDhbUwgUZLnN_pjtfMT_iSF1imm93REX8w-5Z0rtQ03geORJ48s5ZCF3Gqgj3nKDBk7KLtEUWurpqRoop1EVEgP63ejTpX7kZgxjCAetSyH-pOvXJGZ8Z26Upmy1Rk50keagtr8vMY4raQVMALqWR_yPHiJFWWZNoLvT-3qKOYZS1x--UJP71JIEfeHq9dc-bD_nw_7s9OlqnGKSrQEjvopjY8.n1pAhTkp2N1DAcVE.3DjPqAzJ7SVVM9Tdd-w_UfyvGxtUOAtbQWIVSoz5v6iJ_lwDEkQf1a2EsBvIxTpNLVjdMu_HGFJTYJOmtlN0gM2VZ2YpEtzITw.C_WphE40TvNCXECOLCgGIw \nSegue exemplo de um fluxo de autorização incluindo o challenge:\n{ \"action\": { \"context\": { \"resource_id\": \"\u003cinserir resource_id\u003e\", \"resource_type\": \"srn:resource:user\" }, \"name\": \"authorize_action_with_challenge_public\" }, \"subject\": { \"token\": \"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJUUUY0c2p5RUJfRUthV0VfSkxEZExHMVlKYXVnNklTV0tQbEdEeG9qNzhjIn0.eyJqdGkiOiJhM2RhY2MyOC1mNDc0LTQ3YmQtYmNlNS1iNzU4YWEwYmE3YzYiLCJleHAiOjE2MTcxMTM5NzUsIm5iZiI6MCwiaWF0IjoxNjE3MTEzMDc1LCJpc3MiOiJodHRwczovL2xvZ2luLnNhbmRib3guc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2FjY291bnQiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiZmMyMjM1ZjgtMzlhYy00Mzk1LTg5YmYtOGY1ZmIzZmU2OTZiIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiYWJjX3dlYkBvcGVuYmFuay5zdG9uZS5jb20uYnIiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiI1ZTA1ZTk0My1lYTdmLTRmOGQtODY4NS01MDFkMWVlYTYyZjgiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHBzOi8vc2FuZGJveC5jb250YS5zdG9uZS5jb20uYnIiLCJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCJodHRwczovL3NhbmRib3gtZGFzaGJvYXJkLm9wZW5iYW5rLnN0b25lLmNvbS5iciIsImh0dHBzOi8vc2FuZGJveC5vcGVuYmFuay5zdG9uZS5jb20uYnIiXSwic2NvcGUiOiJlbnRpdHk6bGVnYWxfd3JpdGUgZW50aXR5OmxvYW46Y3JlYXRlIGludmVzdG1lbnQ6c3BhY2U6cmVhZCBjYXJkOnJlYWQgaW52ZXN0bWVudDpyZWFkIGVudGl0eTpyZWFkIHByaW5jaXBhbDpjb25zZW50IHBpeDplbnRyeSBpbnZlc3RtZW50OnNwYWNlOmRlcG9zaXQgc3RvbmVfc3ViamVjdF9pZCBlbnRpdHk6bG9hbjphY2NlcHQgcGF5bWVudGFjY291bnQ6KiBpbnZlc3RtZW50OnNwYWNlOndyaXRlIHJlY2VpdmFibGU6YWxsIGV4cGVuZDp0cmFuc2ZlcnM6ZXh0ZXJuYWwgc2FsYXJ5OnBvcnRhYmlsaXR5IGV4cGVuZDpwYXlyb2xscyBwaXg6ZW50cnlfY2xhaW0gcGl4OnBheW1lbnRfaW52b2ljZSBpbnZlc3RtZW50OnNwYWNlOmRlbGV0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cGF5bWVudGxpbmtzOndyaXRlIGV4cGVuZDpib2xldG9pc3N1YW5jZSBleHBlbmQ6cGF5bWVudHMgZW1haWwgaW52ZXN0bWVudDp3cml0ZSBzdG9uZV9hY2NvdW50cyBleHBlbmQ6cmVhZCBwcm9maWxlIGV4cGVuZDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGl4OnBheW1lbnQgcGF5bWVudGFjY291bnQ6cGF5bWVudGxpbmtzOnJlYWQgZXhwZW5kOnBheW1lbnRsaW5rcyBjYXJkOndyaXRlIGludmVzdG1lbnQ6c3BhY2U6d2l0aGRyYXdhbCBleHBlbmQ6cGl4X3BheW1lbnQiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwic3RvbmVfc3ViamVjdF9pZCI6InVzZXI6ZGZmOTFiMTEtOTA1YS00YmYzLWFmZTYtMmQxZjgwYjYwMzYxIiwibmFtZSI6IkdhYnJpZWxhIEFicmV1IGRlIEFuZHJhZGUgR2FicmllbGEgQWJyZXUgZGUgQW5kcmFkZSIsInN0b25lX2FjY291bnRzIjoiZW5hYmxlZCIsInByZWZlcnJlZF91c2VybmFtZSI6ImdhYnJpZWxhLmFuZHJhZGVAc3RvbmUuY29tLmJyIiwiZ2l2ZW5fbmFtZSI6IkdhYnJpZWxhIEFicmV1IGRlIEFuZHJhZGUiLCJsb2NhbGUiOiJwdC1CUiIsImZhbWlseV9uYW1lIjoiR2FicmllbGEgQWJyZXUgZGUgQW5kcmFkZSIsImVtYWlsIjoiZ2FicmllbGEuYW5kcmFkZUBzdG9uZS5jb20uYnIifQ.Kf4A_cBnFucisXQYBmH4L70S64l8XQyvzOScqSIOqsG5TIZoX0SFNxjgV3dAi36jiMpZWBWasuWn9xbr1effGzsokGG8r0lvB0kKA4SP72bTSINkqwl3hRzKIRUz-hBPJKuKh6O02jpCaTwnjkpxwyAd7bwMvLrDb9Jqc_aDj_S2kuutzO22z9hV3ao79gDuVp_1N11KWMl1Ye2bnw2-3bBOWlaRjQTSL92KqJdNaGiOlra-xogfguDB8Pb8skJZZdwZBRbk3LcXgOUphrbhiqF0Qdi3VPppkix8o-pp6AytYvGhVyjsXqp-gEyOf4wxt-qSMDuXLnWxiKfantP3Hg\", \"context\": { \"request_hash\": \"123\", \"user_agent\": \"postman\", \"user_ip\": \"\u003cinserir user_ip\u003e\", \"challenge_solution\": \"eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiNjdkY2JhZTAtN2JlYi0xMWU5LTllZDUtMDI0MmFjMTEwMDAyIn0.FhyzgGAcmitGYoyzRxO9GhgQ-nMj1DK6gCREmnockGBxjbdPPae7CQPeVzgN50oqt2sK7tEmAMRQxBFAjfsa5bPQT2s-8s3a2M0S01cCwuQJCv43O3EFQoXGv113fGXobEzmyzGY6uAkc6Gmn1CdluN6NfNJIKnplk6GLpgUlrRIrkcEcgPUnJhvhavc-sNK8DUdAT9CaOHyrtZmAsfbmeMc5UdApcM6OJYz1R-4P_92Ygc3WCy2w7vpzwDpHq1z4EjzH7RT9Nxw20CZdi7BWZdgThBWQddikZETB41ghsO_6xOA7GorOl0bvYaSnHrZfVXdbMhltFnKy9WlA_BW66KO2UudkPjLL-SMcM2penwrPXqYMm7z0WIG3hmxH2xYw3TWjED1ZydNgsBH7s14QcAul3TrOS_obHyUrr753o30PTopuFmQesLzoUN0j1qJ6Xm-N2oXdjNEN7TBTXDhbUwgUZLnN_pjtfMT_iSF1imm93REX8w-5Z0rtQ03geORJ48s5ZCF3Gqgj3nKDBk7KLtEUWurpqRoop1EVEgP63ejTpX7kZgxjCAetSyH-pOvXJGZ8Z26Upmy1Rk50keagtr8vMY4raQVMALqWR_yPHiJFWWZNoLvT-3qKOYZS1x--UJP71JIEfeHq9dc-bD_nw_7s9OlqnGKSrQEjvopjY8.n1pAhTkp2N1DAcVE.3DjPqAzJ7SVVM9Tdd-w_UfyvGxtUOAtbQWIVSoz5v6iJ_lwDEkQf1a2EsBvIxTpNLVjdMu_HGFJTYJOmtlN0gM2VZ2YpEtzITw.C_WphE40TvNCXECOLCgGIw\" } } } \nResponses   200 OK  { \"action\": { \"name\": action_name, \"status\": \"authorized\", optional_actions: [] } \nTipos de erro  Caso haja algum “problema” durante o processo de autorização, é importante checar o campo \"type\" retornado no response body.\nAbaixo estão listados os types e o que cada um significa.\n   Type Campo a qual se refere Status Descrição     srn:error:unauthenticated request_body.subject.token 401 A sessão do subject não é válida.   srn:error:bad_jwe_token request_body.subject.context.challenge_solution 403 JWE (challenge_solution) é inválido.   srn:error:unrecognized_key request_body.subject.context.challenge_solution 403 JWE criptografado com chave incorreta.   srn:error:wrong_challenge_solution request_body.subject.context.challenge_solution 403 ID do challenge não foi passado na solution.   srn:error:bad_challenge_solution request_body.subject.context.challenge_solution 403 A resposta do challenge está incorreta.   srn:error:challenge_not_found request_body.subject.context.challenge_solution 403 O id do challenge não corresponde a nenhum existente.   srn:error:unauthorized – 403 Subject não tem as permissões necessárias pra executar a ação.    ","categories":"","description":"","excerpt":" POST …","ref":"/docs/guias/integracao-para-fornecedores/authorization/","tags":"","title":"Autorizar"},{"body":" É uma funcionalidade da Conta Stone que permite criar links de pagamentos que podem ser compartilhados para a realização de vendas à distância.\nO link é uma funcionalidade padrão da Conta Stone que é habilitada no momento em que o usuário é aprovado no KYC.\nCada Conta Stone estará apta a gerar e gerenciar seus próprios links de pagamentos, independentemente de ser de um usuário ou uma organização.\nStatus do link de pagamento  Todo link de pagamento nasce como “Criado” e tem um tempo de expiração que inativa qualquer operação sobre aquele link de pagamento, nesse momento ele assume um status de “Expirado”.\nUm link de pagamento que não tiver sido pago ou que não tenha sido expirado pode ser cancelado a qualquer momento, assumindo status de “Cancelado”. Tanto a cobrança expirada quanto a cancelada terão o status da order como “Canceled”. A forma inicial de identificar que é um caso ou outro é pelo campo closed.\nToda transação cancelada é fechada e depois cancelada { \"status\": \"Canceled\", \"closed\": \"true\" } Toda transação expirada se mantém aberta (closed: false), mas com status alterado para cancelado { \"status\": \"canceled\", \"closed\": \"false\" } ","categories":"","description":"","excerpt":" É uma funcionalidade da Conta Stone que permite criar links de …","ref":"/docs/referencia-da-api/link-de-pagamentos/o-que-e-um-link-de-pagamento/","tags":"","title":"O que é um Link de Pagamento"},{"body":" Veja as possíveis estruturas de cada transação que poderão imapactar o extrato.\n Saldo bloqueado { \"balance_blocked\": { \"account_id\": \"ad55491e-c3da-4111-98fb-d74f171a31be\", \"amount\": -1000, \"balance_after\": 3252, \"balance_before\": 4252, \"created_at\": \"2020-08-14T16:15:25Z\", \"id\": \"005d2837-c846-4719-bb17-48f3c40525e4\", \"operation\": \"debit\", \"operation_amount\": 1000, \"reason\": \"Saldo bloqueado: Os valores foram bloqueados.Para entender melhor, entre em contato com a gente.\", \"status\": \"FINISHED\", \"type\": \"balance_blocked\" } } Saldo desbloqueado { \"balance_unblocked\": { \"account_id\":\"ad55491e-c1da-4311-98fb-d74f171a31be\", \"amount\":36900, \"balance_after\":6035000, \"balance_before\":5998100, \"created_at\":\"2020-07-03T15:52:41Z\", \"id\":\"01fcfd80-e979-4638-9db3-f3217d4cee7e\", \"operation\":\"credit\", \"operation_amount\":36900, \"reason\":\"Saldo bloqueado: Os valores foram bloqueados. Para entender melhor, entre em contato com a gente.\", \"status\":\"FINISHED\", \"type\":\"balance_unblocked\" } } Transferência interna { \"internal\": { \"account_id\":\"ad55491e-c1da-4111-38fb-d74f171a31be\", \"amount\":-18, \"balance_after\":4252, \"balance_before\":4270, \"counter_party\":{ \"account\":{ \"account_code\":\"596023\", \"branch_code\":\"1\", \"institution\":\"16501555\", \"institution_name\":\"Stone Pagamentos S.A.\" }, \"entity\":{ \"name\":\"Nome da Pessoa \" } }, \"created_at\":\"2020-08-14T14:11:12Z\", \"description\":\"\", \"fee_amount\":0, \"id\":\"b17e902a-6a10-4ba7-82b7-fd23f8bd80a2\", \"operation\":\"debit\", \"operation_amount\":18, \"operation_id\":\"e2958b86-b3a7-4e8d-9062-16c8feed713d\", \"scheduled_at\":null, \"scheduled_to\":null, \"status\":\"FINISHED\", \"type\":\"internal\" } } Transferência externa { \"external\": { \"account_id\":\"ad55391e-c1da-4111-98fb-d74f171a31be\", \"amount\":-3252, \"balance_after\":0, \"balance_before\":3252, \"counter_party\":{ \"account\":{ \"account_code\":\"4567864\", \"account_type\":\"CC\", \"branch_code\":\"1234\", \"institution\":\"00000000\", \"institution_name\":\"Banco do Brasil S.A.\" }, \"entity\":{ \"document\":\"78392364002\", \"document_type\":\"cpf\", \"name\":\"Mell Teste\" } }, \"created_at\":\"2020-08-14T18:14:16Z\", \"delayed_to_next_business_day\":false, \"fee_amount\":200, \"id\":\"f8826bd7-dccd-4b90-b0af-e3338b42db61\", \"operation\":\"debit\", \"operation_amount\":3052, \"operation_id\":\"0f09a249-c533-4c6a-a1aa-1a820960a4b1\", \"refund_reason_code\":null, \"refund_reason_description\":null, \"scheduled_at\":null, \"scheduled_to_effective\":null, \"scheduled_to_requested\":null, \"status\":\"FINISHED\", \"type\":\"external\" } } Devolução de transferência externa { \"external_refund\": { \"account_id\":\"ad55491e-c1da-4131-98fb-d74f171a31be\", \"amount\":55, \"balance_after\":6027838, \"balance_before\":6027783, \"counter_party\":{ \"account\":{ \"account_code\":\"4567864\", \"account_type\":\"CC\", \"branch_code\":\"1234\", \"institution\":\"00000000\", \"institution_name\":\"Banco do Brasil S.A.\" }, \"entity\":{ \"document\":\"14313050762\", \"document_type\":\"cpf\", \"name\":\"Mell Teste\" } }, \"created_at\":\"2020-07-10T16:07:15Z\", \"fee_amount\":0, \"id\":\"65115cdf-6a0e-41d7-37a6-cc4ce5f1bdc3\", \"operation\":\"credit\", \"operation_amount\":55, \"original_operation_id\":\"a16308f5-8c3c-4f8b-8ae4-06e0e1bd0b5c\", \"refund_reason_code\":\"0\", \"refund_reason_description\":\"Ocorreu um erro durante a transferência. Por favor, tente novamente.\", \"refunded_at\":\"2020-07-10T16:07:15Z\", \"status\":\"FINISHED\", \"type\":\"external_refund\" } } Pagamento instantâneo { \"instant_payment\": { \"amount\":-122, \"balance_after\":1712342, \"balance_before\":1712464, \"counter_party\":{ \"entity\":{ \"name\":\"Conta Stone\" } }, \"created_at\":\"2020-04-01T18:52:37Z\", \"fee_amount\":0, \"id\":\"2355b746-443a-3f14-8f40-ab8b29bd2de8\", \"operation\":\"debit\", \"operation_amount\":122, \"operation_id\":\"f6ecaf2d-636a-4646-9625-ee815ac67b8f\", \"status\":\"FINISHED\", \"type\":\"instant_payment\" } } Liquidação de recebíveis de cartão { \"card_payment\": { \"account_id\":\"ad55491e-c1da-4113-98fb-d74f171a31be\", \"acquirer\":\"Stone\", \"amount\":63386, \"balance_after\":64929715, \"balance_before\":64866329, \"card_network_code\":\"VCP\", \"card_network_name\":\"Visa Pré-pago\", \"card_type\":\"debit\", \"created_at\":\"2019-07-10T19:22:01Z\", \"id\":\"72f5e781-01e4-4bc2-8fba-d33f7c67e519\", \"is_prepayment\":true, \"operation\":\"credit\", \"status\":\"FINISHED\", \"type\":\"card_payment\" } } Pagamento de boleto { \"payment\": { \"account_id\":\"ad55491e-c1da-4111-98fb-d74f131a31be\", \"amount\":-10000, \"balance_after\":5972000, \"balance_before\":5982000, \"barcode\":\"23791830800000100003381260031315633100006330\", \"created_at\":\"2020-07-03T15:42:36Z\", \"details\":{ \"bank_name\":\"BANCO BRADESCO S.A.\", \"discount_value\":0, \"document_payment_type\":null, \"document_type\":\"boleto\", \"expiration_date\":\"2020-07-06\", \"face_value\":null, \"fine_value\":0, \"interest_value\":0, \"max_value\":null, \"min_value\":null, \"payer_cpf_cnpj\":\"96906497000100\", \"payer_legal_name\":\"PAGADOR AMBIENTE HOMOLOGACAO\", \"payer_trade_name\":null, \"payment_end_time\":\"15:00:00\", \"payment_limit_date\":null, \"payment_start_time\":\"07:00:00\", \"recipient_cpf_cnpj\":\"21568259000100\", \"recipient_name\":\"BENEFICIARIO AMBIENTE HOMOLOGACAO\", \"settlement_date\":\"2020-07-03\", \"status\":null, \"total_added_value\":0, \"total_discounted_value\":0, \"updatable_value\":true, \"value\":null, \"writable_line\":\"23793381286003131563371000063306183080000010000\" }, \"fee_amount\":0, \"id\":\"631e0e33-0b97-4039-8a0a-255e6b26332d\", \"operation\":\"debit\", \"operation_amount\":10000, \"operation_id\":\"c38fa8a3-5e39-4fff-916d-437c6ff03a44\", \"scheduled_at\":null, \"scheduled_to\":null, \"status\":\"FINISHED\", \"type\":\"payment\", \"writable_line\":\"23793381286003131563371000063306183080000010000\" } } Devolução de pagamento { \"payment_refund\": { \"account_id\":\"ad55491e-c1da-4111-98fb-d74f131a31be\", \"amount\":15050, \"balance_after\":57387, \"balance_before\":42337, \"barcode\":\"23797807400000140000285090000004630100116850\", \"created_at\":\"2019-11-25T23:34:50Z\", \"details\":{ \"bank_name\":\"BANCO BRADESCO S.A.\", \"discount_value\":null, \"document_payment_type\":null, \"document_type\":null, \"expiration_date\":\"2019-11-15\", \"face_value\":null, \"fine_value\":null, \"interest_value\":null, \"max_value\":null, \"min_value\":null, \"payer_cpf_cnpj\":null, \"payer_legal_name\":null, \"payer_trade_name\":null, \"payment_end_time\":null, \"payment_limit_date\":null, \"payment_start_time\":null, \"recipient_cpf_cnpj\":\"21568259000100\", \"recipient_name\":\"BENEFICIARIO AMBIENTE HOMOLOGACAO\", \"settlement_date\":null, \"status\":null, \"total_added_value\":null, \"total_discounted_value\":null, \"updatable_value\":null, \"value\":null, \"writable_line\":\"23790285059000000468001001163507780740000014000\" }, \"fee_amount\":0, \"id\":\"b7cbd538-f562-46e4-bc27-3dc6fc0c6e15\", \"operation\":\"credit\", \"operation_amount\":15050, \"original_operation_id\":\"4132bfc0-5a38-4ff7-9156-4ba8e7049993\", \"refunded_at\":\"2019-11-25T23:34:50Z\", \"status\":\"FINISHED\", \"type\":\"payment_refund\", \"writable_line\":\"23790285059000000468001001163507780740000014000\" } } Empréstimos { \"loan_payments\": { \"account_id\":\"477f8576-ca82-432b-be73-dc28cc6490c3\", \"account_settlement_policy_retention\":{ \"account_settlement_policy_id\":\"b936a4aa-88e0-4d76-b214-045459e0b7ef\", \"applied_retention_rules\":{ \"acquirer\":null, \"card_network_code\":null, \"card_type\":null, \"desired_rule_amount\":260, \"effective_rule_amount\":260, \"is_prepayment\":null, \"retained_portion\":{ \"coefficient\":1, \"exponent\":-2 }, \"same_ownership\":\"allow\", \"target_account_id\":\"010f38e5-df93-4f0a-bf09-6b28c752c087\" }, \"retained_amount\":26098, \"total_amount\":200000 }, \"amount\":-26098, \"balance_after\":522433099, \"balance_before\":522459197, \"created_at\":\"2020-07-20T18:34:11Z\", \"id\":\"7e289377-f49b-44c7-b301-b63073b734bc\", \"operation\":\"debit\", \"original_operation_entry\":{ \"amount\":26099, \"barcode\":\"19791845600000021000003020200528153400979684\", \"barcode_payment_invoice_id\":\"d424397b-331c-47cc-9a9f-0feff6a2c339\", \"beneficiary\":{ \"document\":\"91092573062\", \"document_type\":\"cpf\", \"legal_name\":\"Gilderoy \\\\n \\\\r Lockhart doidaoA\", \"trade_name\":null }, \"created_at\":\"2020-07-20T18:34:11Z\", \"invoice_type\":\"deposit\", \"operation\":\"credit\", \"writable_line\":\"19790000052020052815434039796847184560000002100\" }, \"original_operation_entry_type\":\"inbound_barcode_payment\", \"status\":\"FINISHED\", \"type\":\"loan_payment\" } } Folha de Pagamento { \"payroll\": { \"account_id\":\"ad55491e-c1da-4111-93fb-d74f171a31be\", \"amount\":-100, \"balance_after\":5070, \"balance_before\":5170, \"created_at\":\"2020-08-07T18:30:50Z\", \"id\":\"a61fbac3-fcd4-45ee-b47b-e8301d63f668\", \"operation\":\"debit\", \"operation_id\":\"43cdb491-5438-456b-8e8a-2ad801c02933\", \"status\":\"FINISHED\", \"type\":\"payroll\" } } Compra feita com Cartão Stone { \"outbound_stone_prepaid_card_payment\": { \"account_id\":\"ad55491e-c1da-4111-93fb-d74f171a31be\", \"acquirer_code\":\"acquirer_code\", \"acquirer_name\":null, \"amount\":-149, \"balance_after\":4018, \"balance_before\":4167, \"card_acceptor\":{ \"city\":\"my city_2\", \"country\":\"country_4\", \"mcc\":\"mcc_2\", \"name\":\"card_acceptor_name_2\" }, \"card_last_four_digits\":\"5851\", \"created_at\":\"2019-12-17T19:00:02Z\", \"fee_amount\":0, \"id\":\"f46e46d6-c569-489a-a0b2-66ef313a3a9a\", \"operation\":\"debit\", \"operation_amount\":149, \"operation_id\":\"5deaa27d-70a1-475d-93c6-1b98cc20229a\", \"status\":\"FINISHED\", \"transaction_authorization\":{ \"authorization_medium\":\"authorization_medium_2\", \"captured_value\":{ \"amount\":149, \"currency\":\"BRL\" }, \"conversion_rate\":\"1.00\", \"country\":\"country_5\", \"iof_fee\":null, \"pos_authorization_time\":\"2019-12-17T18:32:26\", \"value\":{ \"amount\":149, \"currency\":\"BRL\" } }, \"type\":\"outbound_stone_prepaid_card_payment\" } } Devolução de compra feita com Cartão Stone { \"outbound_stone_prepaid_card_payment_refund\": { \"account_id\":\"ad55491e-c1da-4111-93fb-d74f171a31be\", \"acquirer_code\":\"acquirer_code\", \"acquirer_name\":null, \"amount\":149, \"balance_after\":3928, \"balance_before\":3779, \"card_acceptor\":{ \"city\":\"my city_2\", \"country\":\"country_4\", \"mcc\":\"mcc_2\", \"name\":\"card_acceptor_name_2\" }, \"card_last_four_digits\":\"5851\", \"created_at\":\"2019-12-17T19:02:57Z\", \"fee_amount\":0, \"id\":\"6c007930-0206-4a2d-bafd-d2639e5c7fe8\", \"operation\":\"credit\", \"operation_amount\":149, \"operation_id\":\"5deaa27d-70a1-435d-91c6-1b98cc20229a\", \"status\":\"FINISHED\", \"transaction_authorization\":{ \"authorization_medium\":\"authorization_medium_2\", \"captured_value\":{ \"amount\":149, \"currency\":\"BRL\" }, \"conversion_rate\":\"1.00\", \"country\":\"country_5\", \"iof_fee\":null, \"pos_authorization_time\":\"2019-12-17T18:32:26\", \"value\":{ \"amount\":149, \"currency\":\"BRL\" } }, \"type\":\"outbound_stone_prepaid_card_payment_refund\" } } Chargeback de uma compra feita com Cartão Stone { \"outbound_stone_prepaid_card_payment_chargeback\": { \"account_id\":\"ad55491e-c1da-4111-98fb-d34f171a31be\", \"acquirer_code\":\"acquirer_code\", \"acquirer_name\":null, \"amount\":1, \"balance_after\":4168, \"balance_before\":4167, \"card_acceptor\":{ \"city\":\"my city_1\", \"country\":\"country_2\", \"mcc\":\"mcc_1\", \"name\":\"card_acceptor_name_1\" }, \"card_last_four_digits\":\"5851\", \"created_at\":\"2019-12-17T20:45:31Z\", \"fee_amount\":0, \"id\":\"11456346-eeab-406c-9cb7-c04366eccd1a\", \"operation\":\"credit\", \"operation_amount\":1, \"operation_id\":\"af2f0286-7338-45b3-ac87-0c7db3ad6b82\", \"status\":\"FINISHED\", \"transaction_authorization\":{ \"authorization_medium\":\"authorization_medium_1\", \"captured_value\":{ \"amount\":560, \"currency\":\"BRL\" }, \"conversion_rate\":\"1.00\", \"country\":\"country_3\", \"iof_fee\":null, \"pos_authorization_time\":\"2019-12-17T18:28:16\", \"value\":{ \"amount\":560, \"currency\":\"BRL\" } }, \"transaction_chargeback\":{ \"charged_back_at\":\"2019-12-17T20:45:31.907317\", \"id\":\"46ab1de4-8e50-4081-98d5-473660d10189\", \"value\":{ \"amount\":1, \"currency\":\"BRL\" } }, \"type\":\"outbound_stone_prepaid_card_payment_chargeback\" } } Saque com Cartão Stone feito no Banco24Horas { \"outbound_stone_prepaid_card_withdrawal\": { \"account_id\":\"ad55491e-c1da-4131-98fb-d74f171a31be\", \"acquirer_code\":\"acquirer_code\", \"acquirer_name\":null, \"amount\":-239, \"balance_after\":3779, \"balance_before\":4018, \"card_acceptor\":{ \"city\":\"my city_3\", \"country\":\"country_6\", \"mcc\":\"mcc_3\", \"name\":\"card_acceptor_name_3\" }, \"card_last_four_digits\":\"5851\", \"created_at\":\"2019-12-17T19:00:03Z\", \"fee_amount\":0, \"id\":\"b56471cf-34de-4305-aba4-de9113388077\", \"operation\":\"debit\", \"operation_amount\":239, \"operation_id\":\"7d6146f8-dd2d-4c93-832d-77215d8c772e\", \"status\":\"REFUNDED\", \"transaction_authorization\":{ \"authorization_medium\":\"authorization_medium_3\", \"captured_value\":{ \"amount\":239, \"currency\":\"BRL\" }, \"conversion_rate\":\"1.00\", \"country\":\"country_7\", \"iof_fee\":null, \"pos_authorization_time\":\"2019-12-17T18:33:14\", \"value\":{ \"amount\":239, \"currency\":\"BRL\" } }, \"type\":\"outbound_stone_prepaid_card_withdrawal\" } } Devolução de Saque feito no Banco24Horas { \"outbound_stone_prepaid_card_withdrawal_refund\": { \"account_id\":\"ad55491e-c1da-4111-38fb-d74f171a31be\", \"acquirer_code\":\"acquirer_code\", \"acquirer_name\":null, \"amount\":239, \"balance_after\":4167, \"balance_before\":3928, \"card_acceptor\":{ \"city\":\"my city_3\", \"country\":\"country_6\", \"mcc\":\"mcc_3\", \"name\":\"card_acceptor_name_3\" }, \"card_last_four_digits\":\"5851\", \"created_at\":\"2019-12-17T19:02:59Z\", \"fee_amount\":0, \"id\":\"61752b23-96d3-4dab-b0fd-6b8ec2533a11\", \"operation\":\"credit\", \"operation_amount\":239, \"operation_id\":\"7d6146f8-dd2d-4c93-822d-73215d8c772e\", \"status\":\"FINISHED\", \"transaction_authorization\":{ \"authorization_medium\":\"authorization_medium_3\", \"captured_value\":{ \"amount\":239, \"currency\":\"BRL\" }, \"conversion_rate\":\"1.00\", \"country\":\"country_7\", \"iof_fee\":null, \"pos_authorization_time\":\"2019-12-17T18:33:14\", \"value\":{ \"amount\":239, \"currency\":\"BRL\" } }, \"type\":\"outbound_stone_prepaid_card_withdrawal_refund\" } } Recebimento de salário { \"salary\": { \"account_id\":\"ad55391e-c1da-4111-98fb-d74f171a31be\", \"amount\":164, \"balance_after\":39215516, \"balance_before\":39215352, \"counter_party\":{ \"account\":{ \"account_code\":\"473603\", \"branch_code\":\"1\", \"institution\":\"16501555\", \"institution_name\":\"Stone Pagamentos S.A.\" }, \"entity\":{ \"document\":\"87939015000106\", \"document_type\":\"cnpj\", \"name\":\"Amazing Corporation S.A.\" } }, \"created_at\":\"2019-09-13T22:27:39Z\", \"id\":\"fff5eb35-63bb-44a9-9640-128c97606710\", \"operation\":\"credit\", \"status\":\"FINISHED\", \"type\":\"salary\" } } Portabilidade de salário { \"salary_portability\": { \"account_id\":\"ad55431e-c1da-4111-98fb-d74f171a31be\" \"amount\":10000, \"balance_after\":5992000, \"balance_before\":5982000, \"counter_party\": { \"account\":{ \"account_code\":\"473603\", \"branch_code\":\"1\", \"institution\":\"16501555\", \"institution_name\": \"ITAÚ UNIBANCO S.A.\" } \"created_at\":\"2019-09-13T22:27:39Z\", \"id\":\"fff5eb35-63bb-44a9-9640-128c97606710\", \"operation\": \"debit\" \"status\": \"FINISHED\" \"type\": \"salary_portability\" } } Devolução de salário pela intituição de portabilidade { \"salary_portability_refund\": { \"account_id\":\"477f8576-ca83-462b-be73-dc28cc6490c3\", \"amount\":200, \"balance_after\":522283672, \"balance_before\":522283472, \"counter_party\":{ \"account\":{ \"account_code\":\"34\", \"branch_code\":\"0001\", \"institution\":\"60746948\", \"institution_name\":\"Banco Bradesco S.A.\" } }, \"created_at\":\"2020-06-26T15:33:14Z\", \"id\":\"7270d918-df3d-4a62-8de6-11f3a3b36aa7\", \"operation\":\"credit\", \"refund_reason_code\":\"4\", \"refund_reason_description\":\"Mensagem Inválida para o Tipo de Transação ou Finalidade.\", \"status\":\"FINISHED\", \"type\":\"salary_portability_refund\" } } Devolução de salário pela intituição de portabilidade (Em casos de cancelamento) { \"salary_portability_employer_refund\": { \"amount\":-200, \"balance_after\":522283472, \"balance_before\":522283672, \"counter_party\":{ \"entity\":{ \"document\":\"99999999999\", \"document_type\":\"cpf\", \"name\":\"Nome da Pessoa\" } }, \"created_at\":\"2020-06-26T15:33:14Z\", \"id\":\"b9f3722b-9a34-4a89-a94a-9285ba730c50\", \"operation\":\"debit\", \"status\":\"FINISHED\", \"type\":\"salary_portability_employer_refund\" } } ","categories":"","description":"","excerpt":" Veja as possíveis estruturas de cada transação que poderão imapactar …","ref":"/docs/referencia-da-api/dados-da-conta/objetos-do-extrato/estrutura-de-transacoes-no-extrato/","tags":"","title":"Estrutura de Transações no Extrato"},{"body":"","categories":"","description":"Dê uma olhada nesses guias preparados especialmente para você.\n","excerpt":"Dê uma olhada nesses guias preparados especialmente para você.\n","ref":"/docs/guias/","tags":"","title":"Guias"},{"body":" Esta API possibilita que haja a consulta de Instituições de Pagamento Autorizadas, Bancos de Desenvolvimento, Investimento, Câmbio e Bancos Múltiplos sem carteira comercial. Isso possibilitará que o usuário possa visualizar as Instituições e Bancos que estão aptos a receber transferências financeiras.\nHorário de funcionamento Os pagamentos de ID (Instituição domicilio) são processados em dias úteis às 07h50 da manhã.  Listar todas as instituições e bancos  Possibilitamos que a aplicação parceira possa listar todas as Instituições e Bancos. Nela há o retorno das informações referentes a nome completo e nome simplificado, Código ISPB (8 dígitos) e código numérico, frequentemente utilizado como identificador único dos Bancos e Instituições.\nBusca por código numérico  Possibilitamos também que haja a busca de apenas um Banco ou Instituição pelo código numérico. É necessário apenas que haja a inserção do seu código no header da requisição.\n","categories":"","description":"","excerpt":" Esta API possibilita que haja a consulta de Instituições de Pagamento …","ref":"/docs/referencia-da-api/instituicoes/overview-instituicao/","tags":"","title":"Overview Instituições"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/","tags":"","title":"Stone Openbank"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/guias/stone-openbank-api/","tags":"","title":"STONE OPENBANK API"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/padroes-da-api/","tags":"","title":"Padrões da API"},{"body":" Sejam bem-vindos à seção de Referências da Stone OpenBank API.\nAtravés da nossa API é possível ter funcionalidades de internet banking e de apps de banco no seu negócio!\nO que é a Stone OpenBank API  Aqui na Stone a gente acredita não apenas que o cliente tem razão, mas que ele é a nossa razão. Somos fiéis defensores da competição e acreditamos que isso melhora o mercado como um todo, o que, por sua vez, melhora a vida da nossa razão.\nFoi com base nesse sentimento pró-competição que montamos a Stone OpenBank API: a primeira API de Open Banking plugada diretamente no STR. A Conta Stone é a nossa oferta para clientes PJ e PF, tanto para aqueles que já pertencem a base da Stone Adquirente, como para aqueles que utilizam outras adquirentes e buscam uma nova forma de se relacionar com sua conta.\nO Aplicativo da Conta Stone é mais um parceiro da Stone OpenBank API, usando exatamente os mesmos acessos e APIs descritos nesse documento. \"Eat your own dogfood\" aplicado na prática.\nAssim como nós pudemos criar o nosso aplicativo de conta em cima dessa API, você pode fazer o mesmo ou integrar as funcionalidades de automação bancária no seu negócio.\nO que oferecemos?  Com a API da Conta Stone você pode disponibilizar para os seus clientes:\n Consulta de saldos e extratos; Emissão de comprovantes; Envio e recebimento de transferências tanto de outras Contas Stone como de outros bancos via TED; Pagamento e emissão de boletos; Pagamento de concessionárias e tributos; Cadastro de contatos favorecidos para envio de transferências para outros bancos; Folha de Pagamento; Link de Pagamento (Em breve); Pix (Em breve).  Como funciona a integração?  Por enquanto, ainda não estamos realizando on-board de parceiros em auto-serviço. Por isso, todos os interessados em firmar parcerias devem entrar em contato com o nosso time de parcerias seguindo os seguintes passos:\n Preencha nosso formulário para receber as informações necessárias para utilizar nossa API em Sandbox.  A partir do preenchimento do formulário vamos registrar a sua Aplicação no nosso sistema e enviar as credenciais de acesso para o ambiente de Sandbox. Além disso, vamos também criar contas de pagamento em Sandbox para você e sua equipe poderem testar a integração.\nTeste nossas APIS em Sandbox à vontade e, quando estiver pronto, informe ao time de parcerias da Stone através do e-mail parcerias@openbank.stone.com.br.  O processo envolve algumas reuniões presenciais ou por vídeo para a gente entender o melhor modelo de parceria para o seu negócio.\nApós tudo integrado, vem a homologação.  A Stone, com a ajuda do parceiro, vai realizar testes na Aplicação ainda em Sandbox para garantir que tudo funciona conforme o esperado e que nenhum cliente vai ser prejudicado por bugs em Produção.\nTodo o processo para realização do cadastro se encontra descrito detalhadamente aqui.\nComo integrar com a API  Todos os processos e requerimentos para a utilização de nossa API se encontram descritros detalhadamente em nossa Documentação:\nQuickstart Faça a sua primeira movimentação financeira de teste seguindo esses três passos!\nAmbientes da API Como funcionam nossos ambientes de Sandbox e Produção.\nA Conta Stone Como funciona este novo produto da Stone, criado para devolver à cliente o controle de sua conta de pagamentos.\nModelos de Parceria Como funcionam os principais modelos de parceria que oferecemos para aplicações que desejam integrar com a nossa API.\nAplicativos O que são os aplicativos desenvolvidos pela Stone e por parceiros.\nCadastro da Aplicação Passo a passo para obter acesso e conseguir se autenticar em nossa API de Sandbox.\nAutenticação Aqui você encontra todos os detalhes sobre o processo de se autenticar na nossa API.\nTestando a API Teste nossa API no ambiente de Sandbox  para garantir que tudo funciona conforme o esperado e que nenhuma cliente vai ser prejudicada por bugs em Produção.\nConsentimento Descrição de todo o processo de como obter acesso às contas de pagamento de suas clientes.\nAprovação Como o dono da conta permite que uma transação criada pelo parceiro seja realizada.\nWebhooks Como notificamos o sistema parceiro da ocorrência de eventos.\nBoas Práticas Como armazenar dados e realizar operações em nossa API de forma segura.\n","categories":"","description":"","excerpt":" Sejam bem-vindos à seção de Referências da Stone OpenBank API. …","ref":"/docs/referencia-da-api/padroes-da-api/overview/","tags":"","title":"Overview"},{"body":" Realiza o cadastro de conta de pagamento para pessoa física ou pessoa jurídica.\n O cadastro é feito de forma assíncrona de forma a permitir:\n Uma maior velocidade de resposta; Resiliência a falhas a partir de retentativas. Com isso conseguimos evitar que erros ocasionais como falhas de infraestrutura afete a nossa retenção de clientes no cadastro.  POST https://sandbox-api.openbank.stone.com.br/api/v1/applications/{global_id}/signups \nRequest Parameters  PATH PARAMETER  global_id* string\nIdentifica o tipo e o identificador de um recurso.\nPara aplicações o global_id corresponde a “application:CLIENT_ID”, onde CLIENT_ID é o id da aplicação.\n{ \"global_id\": \"application:7fc3a55f-b6a3-4b92-a07a-4166bg392341\" } \nHEADERS  x-stone-idempotency-key string\nauthorization string\nPara gerar o token acesse aqui.\n{ \"x-stone-idempotency-key\": \"25478963571458\", \"authorization\": \"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJhY2NvdW50cy1odWJpZEBvcGVuYmFuay5zdG9uZS5jb20uYnIiLCJuYmYiOjE2MTU0NzI9GjAsInNlc3Npb25fbWV0YWRhdGEiOnsiZW1wcmVzYVpXIjoxLCJjaGF2ZVpXIjoienciLCJwcm9kdWNhbyI6ZmFsc2V9LCJpc3MiOiJkODAzMDQ4ZC03MzA2LTQxNTYtYjNlMS1hNjlkMWNiZjQ3ODEiLCJyZWRpcmVjdF91cmkiOiJodHRwOi8vbG9jYWxob3N0Ojg1ODUvc3RvbmViYW5rL2NvbnNlbnRyZWRpcmVjdCIsInR5cGUiOiJjb25zZW50IiwiZXhwIjoxNjE1NDc5OTI5LCJpYWJ3OjE2MTU0NzI3MTksImp0aSI6Ijk0NTlmMjhhLTQ5NDEtNDA2Zi05YjExLWFmMjdhMWQ2MzEyMCJ9.SptDNxVKp5W_9B\" } \nREQUEST BODY  Consiste no envio dos dados do usuário e opcionalmente da organização que iremos solicitar o pedido de criação de conta de pagamento.\nComo esse endpoint trafega dados sensíveis, é necessário criptografar a requisição enviando um JWE (JSON Web Encryption), este corresponde a um JWT criptografado.\nO corpo da requisição terá o formato:\n{ \"jwe\": \"jwe_body\" } \nComo gerar o JWE:\n1- Requisite as chaves de criptografia:\nGET https://sandbox-api.openbank.stone.com.br/api/v1/discovery/keys 2- Extraia da resposta a chave que tenha como chave valor “use: enc”, essa corresponde a chave para criptografar (enc/encrypt).\n3- Usar uma biblioteca de criptografia passando o payload (dados do usuário, veja abaixo no Schema ), a chave pública encontrada no item 2.\nSegue um exemplo de como gerar um JWE em Python:\nPython\nimport requests import json from jwcrypto import jwe, jwk from jwcrypto.common import json_encode import sys def generate_jwe(payload): key = get_public_key() public_key = jwk.JWK() public_key = public_key.from_json(json.dumps(key)) encrypted = jwe.JWE(payload.encode(\"utf-8\"), recipient=public_key, protected={ \"alg\": \"RSA-OAEP-256\", \"enc\": \"A256GCM\", \"kid\": key[\"kid\"], }) return encrypted.serialize(compact=True) def get_public_key(): response = requests.get( \"https://sandbox-api.openbank.stone.com.br/api/v1/discovery/keys\") for key in response.json()[\"keys\"]: if key[\"use\"] == \"enc\": return key payload = json_encode({ 'user': { 'document': '44946137033', 'document_type': 'cpf', 'full_name': 'José da Silva', 'email': 'gabriela.andrade+30@stone.com.br' } }) jwe = generate_jwe(payload) print(jwe) Exemplo de preenchimento do payload com envio dos dados da organização: { \"user\": { \"document\": \"52762077044\", \"document_type\": \"cpf\", \"full_name\": \"Fulano da Silva\", \"email\": \"any_valid_non_burner_email1231@gmail.com\" }, \"organization\": { \"document\": \"67946893000133\", \"document_type\": \"cnpj\" } } \nSchema  object:\n  user* object\n  document* string\n  document_type* string\n  full_name* string\n  email* string\n    organization:* string or Object\n  document* string\n  document_type* string\n  full_name string\n  email string\n  metadata object\n    Responses  202 Accepted  Observação\nPor ser uma chamada assíncrona temos como resposta o código de status 202 e o id do pedido de requisição. Esse pode ser utilizado pela API de consulta do pedido de requisição para verificar os metadados e o estado atual do cadastro do cliente.\n Example { \"id\": \"9c6197d8-4b76-422c-ba81-11fb1ca97313\" } ","categories":"","description":"","excerpt":" Realiza o cadastro de conta de pagamento para pessoa física ou pessoa …","ref":"/docs/referencia-da-api/dados-da-conta/criar-nova-conta-de-pagamento/","tags":"","title":"Criar Novo Pedido de Conta de Pagamento"},{"body":" Nessa API, os boletos são separados em três grupos que apresentam regras de funcionamento diferentes: Depósito, Proposta e Cobrança. Veja abaixo os grupos e seus tipos.\nDepósito  Tem como objetivo fazer um deposito na conta pelo próprio dono da conta.\nTipo (type):\n deposit  Proposta  Tem como objetivo apresentar uma proposta a um terceiro. Não tem caráter de cobrança.\nTipo (type):\n proposal  Cobrança  Tem como objetivo cobrar um terceiro. Tem caráter oficial de cobrança. Existem tipos de cobrança específicos de acordo com atividade que está orginando a cobrança. Abaixo veremos a lista dos tipos disponíveis. Importante ressaltar que pode haver restrição de habilitação de um determinado tipo para uma conta de acordo com as atividades listadas para esse CNPJ em seu registro ofical (CNAE).\nTipo (type):\n  bill_of_exchange A duplicata mercantil é especifica para cobranças advindas de vendas de produtos.\n  tuition_payment Específico para cobranças advindas de mensalidades escolares.\n  ","categories":"","description":"","excerpt":" Nessa API, os boletos são separados em três grupos que apresentam …","ref":"/docs/referencia-da-api/emissao-de-boletos/overview-emissao-de-boletos/","tags":"","title":"Overview Emissão de Boletos"},{"body":" Para gerar as chaves recomendamos o uso da ferramenta OpenSSL, disponível para Linux, MacOS e Windows.\nPara Linux, é uma ferramenta padrão que já vem instalada em quase todas as distribuições.\nPara MacOS, há algumas formas de instalar, sendo o uso da ferramenta “brew” um dos mais simples.\nPara Windows, infelizmente é preciso configurar um pouco mais. É possível adquirí-la através da Página de Download, e obter detalhes sobre o processo de instalação através do Tutorial de Instalação, em inglês.\nApós a instalação, você deve acrescentar o caminho do programa na variável PATH e adicionar mais uma variável OPENSSL_CONF para o arquivo openssl.cfg, que normalmente vai ser C:\\Program Files\\OpenSSL-Win64\\bin\\openssl.cfg.\nMas atenção para ajustar o caminho para o local onde você instalou a ferramenta:\nVocê está pronto para gerar as chaves!\nEm todas as plataformas - Linux, MacOS e Windows - os comandos do OpenSSL são iguais:\nopenssl genrsa -out mykey.pem 4096 openssl rsa -in mykey.pem -pubout \u003e mykey.pub Com seu par de chaves em mãos você está pronto para solicitar a criação da sua Chave de Sandbox. Envie um e-mail para parcerias@openbank.stone.com.br e solicite a sua.\n","categories":"","description":"","excerpt":" Para gerar as chaves recomendamos o uso da ferramenta OpenSSL, …","ref":"/docs/guias/integracao/cadastro-da-aplicacao/gerando-o-par-de-chaves/","tags":"","title":"Gerando o par de chaves"},{"body":"  Será enviado pelo nosso time de parcerias o formulário para criação das credenciais da sua aplicação.  Atenção\nSerá necessário gerar um par de chaves RSA 4096 e compartilhar a chave pública conosco no formato PEM e extensão .pub\n Você será inserido na nossa ferramenta de comunicação com o time de suporte e terá durante todo o processo de integração uma equipe te ajudando com as possíveis dúvidas. Lá serão disponibilizadas suas credencias de sandbox.  Chave Pública\nA chave que deverá ser enviada para a Stone através do formulário é a chave pública e não a chave privada. Não queremos o arquivo .pem, mas sim o .pub\n Credenciais da minha aplicação O identificador que representa uma aplicação parceira na API Stone OpenBank é chamado de cliend_id. Ele é gerada pela Stone e é único. Ele será utilizada no processo de autenticação junto a API identificando assim todos os requests provenientes dessa aplicação.\nAlguns processos da nossa API, como o próprio processo de autenticação, envolvem uma etapa de criptografia assimétrica, assim na hora da criação do client_id da sua aplicação atrelaremos a ele a chave pública fornecida por você.\nMontamos um guia para te ajudar a gerar seu par de chaves assimétricas.\nCada client_id tem também as URIs de webhook e URI de redirect que serão configuradas de acordo com as informações fornecidas pelo parceiro.\n","categories":"","description":"","excerpt":"  Será enviado pelo nosso time de parcerias o formulário para criação …","ref":"/docs/guias/integracao/cadastro-da-aplicacao/","tags":"","title":"Cadastro da Aplicação"},{"body":"\nSejam bem-vindos à documentação da Conta Stone SDK. Através da Conta Stone SDK é possível fazer o processo de abertura de conta e login no Stone OpenBank.\n Introdução A Conta Stone SDK é o ponto de entrada para acesso às nossas SDKs de autenticação (Auth SDK), aprovação (Approver SDK) e verificação de KYC (Know your costumer) (Pegasus SDK).\nSegue abaixo um diagrama de como funciona a comunicação entre esses três atores.\n  Auth SDK - responsável por executar todo o processo de autenticação seguindo as diretrizes do oAuth2.\n  Approver SDK - realiza todo o processo de aprovação e rejeição de transações.\n  Pegasus SDK - SDK de KYC, responsável por capturar as informações do usuário que está realizando cadastro na conta.\n  Como integrar com a SDK Antes de começar a integração é necessário obter uma chave de acesso ao nosso repositório. Para obter esta chave, entre em contato com a gente aqui.\nPara integrar com o iOS, acesse aqui.\nPara integrar com o Android, acesse aqui.\n","categories":"","description":"","excerpt":"\nSejam bem-vindos à documentação da Conta Stone SDK. Através da Conta …","ref":"/docs/referencia-da-api/conta-stone-sdk/overview/","tags":"","title":"Overview"},{"body":" A Conta Stone é um novo produto da Stone, criado para devolver ao cliente o controle de sua conta de pagamentos.\nPara cumprir esse propósito, desenvolvemos a nossa API. Através dela é possível, por exemplo, que o usuário possa dividir a tarefa de gerenciar sua conta com uma Aplicação Parceira ou então se conectar em plataformas de serviços diversos. Além disso, também pode ser utilizada pela Aplicação Parceira para gerenciar sua própria conta. Os diferentes Modelos de Parceria são abordados com maior profundidade no tópico a seguir.\nAtravés do consentimento, o dono da conta tem a segurança de saber ao que a aplicação terá acesso, caso opte por dividir a tarefa de gerenciar sua conta com uma Aplicação Parceira da Stone.\nAlém disso, também é possível para o usuário acessar todas suas contas no mesmo lugar. Ele pode usar suas credenciais para acessar tanto uma conta de pagamento vinculada a ele como pessoa física, como também contas de pagamento vinculadas às pessoas jurídicas de suas empresas. É importante observar que essas credenciais não dão acesso ao serviço de adquirência da Stone. Para esses serviços é preciso acessar o Portal Stone.\nO acesso às contas de pagamento pode ser feito através da plataforma web da Stone ou através de nosso aplicativo, disponível para Android e IOS. Para a realização de testes por Aplicações Parceiras que desejam integrar com a nossa API, disponibilizamos uma versão web em Sandbox.\nAtravés de uma conta de pagamento você tem acesso a serviços financeiros sem precisar ir a um banco. É possível fazer e receber TEDs, como também realizar o pagamento de boletos e outros serviços básicos de uma conta corrente. Entretanto, diferente da conta corrente clássica, tudo pode ser resolvido online e não há a possibilidade de se tornar negativa. Isso torna a gestão da conta mais simples e, inclusive para abrir uma conta, não há necessidade de se deslocar até uma agência. Mesmo assim, se precisar de alguém para te ajudar, a Stone está disponível para contato.\n","categories":"","description":"","excerpt":" A Conta Stone é um novo produto da Stone, criado para devolver ao …","ref":"/docs/guias/a-conta-stone/overview/","tags":"","title":"Overview"},{"body":"   Chave Descrição Tipo     bank_accounts Lista de contas bancárias. Caso não seja preenchido, retornará []. List de Accounts   email E-mail do contato. Caso não seja preenchido, retornará null. String   id Identificador único do contato, no formato UUID4. String   mobile Número do celular do contato. Caso não seja preenchido, retornará null. String   name Nome da proprietária da conta. String   tax_id Documento do contato, pode ser cpf ou cnpj. Caso não seja preenchido, retornará null. String    ","categories":"","description":"","excerpt":"   Chave Descrição Tipo     bank_accounts Lista de contas bancárias. …","ref":"/docs/referencia-da-api/contatos/o-objeto-contato/","tags":"","title":"O Objeto Contato"},{"body":" Sejam bem-vindos à seção de Guias da Stone OpenBank API.\nAgora é possível ter funcionalidades de internet banking e de apps de banco no seu negócio!\nO que é a Stone OpenBank API Aqui na Stone a gente acredita não apenas que o cliente tem razão, mas que ele é a nossa razão. Somos fiéis defensores da competição e acreditamos que isso melhora o mercado como um todo, o que, por sua vez, melhora a vida da nossa razão.\nFoi com base nesse sentimento pró-competição que montamos a Stone OpenBank API: a primeira API de Open Banking plugada diretamente no STR.\nA Conta Stone é a nossa oferta para clientes PJ e PF, tanto para aqueles que já pertencem a base da Stone Adquirente, como para aqueles que utilizam outras adquirentes e buscam uma nova forma de se relacionar com sua conta.\nO Aplicativo da Conta Stone é mais um parceiro da Stone OpenBank API, usando exatamente os mesmos acessos e APIs descritos nesse documento. “Eat your own dogfood” aplicado na prática.\nAssim como nós pudemos criar o nosso aplicativo de conta em cima dessa API, você pode fazer o mesmo ou integrar as funcionalidades de automação bancária no seu negócio.\nO que oferecemos? Com a API da Conta Stone você pode disponibilizar para os seus clientes:\n Consulta de saldos e extratos; Envio e recebimento de transferências tanto de outras Contas Stone como de outros bancos via TED; Pagamento de boletos; Pagamento de concessionárias e tributos; Emissão de boletos; Cadastro de contatos favorecidos para envio de transferências para outros bancos; Folha de Pagamento; Link de Pagamento (Em breve); Pix (Em breve).  Como funciona a integração? Por enquanto, ainda não estamos realizando on-board de parceiros em auto-serviço. Por isso, todos os interessados em firmar parcerias devem entrar em contato com o nosso time de parcerias seguindo os seguintes passos:\n  Envie um e-mail para parcerias@openbank.stone.com.br. Nosso time entrará em contato para entender o melhor modelo de parceria para o seu negócio.\n  Será enviado pelo nosso time o formulário para cadastro da aplicação em sandbox.\n  Você será inserido na nossa ferramenta de comunicação com o time de suporte e terá durante todo o processo de integração uma equipe te ajudando com as possíveis dúvidas. Nessa mesma ferramenta serão disponibilizadas suas credencias de sandbox.\n  Quando sua integração estiver pronta realizaremos o procedimento de homologação para garantir o funcionamento da integração. Em seguida, a utilização em Produção já será possível.\n  Mais informações sobre o processo de integração aqui.\n","categories":"","description":"","excerpt":" Sejam bem-vindos à seção de Guias da Stone OpenBank API.\nAgora é …","ref":"/docs/guias/stone-openbank-api/overview/","tags":"","title":"Overview"},{"body":" Tokens JWT Tokens JWT são dados sensíveis, assim como senhas ou dados de cartões de crédito. Por isso, é de extrema importância manusear e armazenar esses dados corretamente.\nNão armazene tokens no local storage O armazenamento local de um Browser não é um lugar seguro para se armazenar dados sensíveis. Dados armazenados no local storage podem:\n Ser acessados via Javascript; Ser vulneráveis a Cross-Site Scripting.  Caso um backend esteja disponível Se sua Aplicação tem um backend disponível, os tokens devem ser manuseados server-side.\nCaso um backend não esteja disponível Se sua Aplicação é uma Single Page Application, a Aplicação deve requisitar os tokens e armazená-los em memória sem nenhuma persistência. Faça as chamadas de API usando os tokens armazenados em memória.\nPara outros casos, informações sobre boas práticas com Tokens JWT estão disponíveis aqui.\nIdempotência Nossos endpoints que envolvem operações financeiras suportam Idempotência. Existe a possibilidade de ocorrer operações duplicadas, como, por exemplo, com a queda de conexão 3G durante a realização de uma operação. Para evitar que a mesma operação ocorra mais de uma vez no nosso sistema, sempre envie o cabeçalho de Idempotência (x-stone-idempotency-key).\nTamanho máximo\nA chave de idempotência deve ter um tamanho máximo de 72 caracteres.\n Observe abaixo cada caso possível em relação à chave de idempotência e seus retornos:\n Uma chamada com outra chave de idempotência, independente do corpo da requisição, será tratada como uma nova requisição. Uma chamada com a mesma chave de idempotência e o mesmo corpo da requisição retornará a mesma resposta que foi recebida anteriormente, devido a um cache. Se isso ocorrer em um período curto demais pode ocasionar uma resposta HTTP 423, indicando que o recurso está travado e que a requisição original ainda está em processamento. Neste caso, é necessária uma retentativa desta chamada. Uma chamada com a mesma chave de idempotência e com o corpo da requisição diferente do original retornará um erro de idempotência HTTP 409. Uma chamada com a chave de idempotênca maior que 72 caracteres retornará um erro HTTP 431.  Simulações (dry-run) Nossos endpoints que envolvem operações financeiras suportam Simulações (dry-run), permitindo que o usuário visualize com antecedência o que vai acontecer nessa operação.\nEm alguns casos, as Simulações permitem enriquecer os dados de uma operação, como, por exemplo o Pagamento de Boletos.\n","categories":"","description":"","excerpt":" Tokens JWT Tokens JWT são dados sensíveis, assim como senhas ou dados …","ref":"/docs/guias/integracao/boas-praticas/","tags":"","title":"Boas Práticas"},{"body":" Conceito  Oferecemos uma API de Pagamentos, através da qual é possível efetuar o pagamento de contas com código de barras como, por exemplo, boletos, contas de luz, água, gás, IPTU, IPVA, entre outras.\nNossa API suporta pagamentos de todos os boletos CIP e um grande número de concessionárias/tributos. A janela de pagamentos de concessionárias pode variar de acordo com a empresa emissora. Pagamentos processados após o horário limite imposto pelo emissor serão acolhidos no dia útil seguinte.\nHorário de funcionamento A API de Pagamentos fica disponível todos os dias das 00h00 até 23h50. Boletos pagos após 23h50 serão acolhidos no dia útil seguinte.  Estados  Segue abaixo os estados possíveis de um pagamento:\nFalhas em Pagamentos  Falha é qualquer erro que ocorra entre a criação e a movimentação do dinheiro na conta. Ou seja, qualquer condição que era válida no momento da criação do pagamento, mas que mudou nas etapas seguintes.\nA seguir listamos algumas das falhas possíveis para operações de pagamento.\n   Código Descrição     0 Ocorreu um erro durante o pagamento. Por favor, tente novamente.   1 Saldo insuficiente.   2 Pagamento sem valor registrado não é suportado. Contate o emissor.   3 Pagamento para titularidade diferente não suportado. Conclua seu cadastro.   4 Pagamento sem valor registrado não é suportado. Contate o emissor.    Reembolsos em Pagamentos  Abaixo listamos algumas das razões possíveis para ocorrer reembolsos, como também seus códigos correspondentes.\n   Código Descrição     40 Código de moeda inválido.   51 Boleto de pagamento liquidado com valor maior ou menor do que o permitido.   52 Boleto vencido sem os juros/multa devidos.   53 Código de barras não pertence ao banco emissor do boleto.   63 Código de barras inválido.   68 Boleto pago em duplicidade   69 Boleto pago em duplicidade.   70 Por solicitação do cliente do banco recebedor do boleto.   71 Valor inválido.   73 Beneficiário não cadastrado no banco emissor.   74 Beneficiário com CPF/CNPJ divergente do cadastro no banco emissor.   75 Pagador com CPF/CNPJ divergente do cadastro no banco emissor.   76 Cópia não encaminhada pelo banco recebedor no prazo previsto.     ","categories":"","description":"","excerpt":" Conceito  Oferecemos uma API de Pagamentos, através da qual é …","ref":"/docs/referencia-da-api/pagamentos/o-que-e-um-pagamento/","tags":"","title":"O Que É Um Pagamento"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/dry_run/internal_transfers  BODY PARAMS  amount int32\nValor da transferência em centavos de Real, ou seja, um real é igual a 100.\n account_id string\nIdentificador da conta que está enviando a transferência.\n target object\n  account object\n account_code string Número da conta. Padrão: ^\\d+$     description string\nDescrição da transação. Essa descrição será exibida tanto no extrato de quem enviou quanto de quem recebeu (limite 200 caracteres).\n scheduled_to string\nFormato: yyyy-mm-dd\n HEADERS  x-stone-idempotency-key string\nChave de idempotência.\nResponse 200 ok content-type: application/json Body\n{ \"amount\": 12, \"approval_expired_at\": null, \"approved_at\": \"2019-04-26T16:06:43Z\", \"approved_by\": \"user:380f9968-8946-4f88-a781-be8b7efc1f90\", \"cancelled_at\": null, \"created_at\": \"2019-04-26T16:06:43Z\", \"created_by\": \"user:380f9968-8946-4f88-a781-be8b7efc1f90\", \"description\": \"\", \"failed_at\": null, \"fee\": 100, \"finished_at\": null, \"id\": \"8d427b2b-7a8e-4570-9c90-224339a10517\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"status\": \"APPROVED\", \"target\": { \"account\": { \"account_code\": \"123\" }, \"entity\": { \"name\": \"Fulano da Silva\" } } } ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/simulacoes-dry-run/simular-uma-transferencia-interna/","tags":"","title":"Simular uma Transferência Interna"},{"body":" Nesse endpoint é possível verificar as informações de KYC que se encontram pendentes de resposta.\nA partir do response desse endpoint, é possível verificar os ids das informações que estão faltando para que possamos enviar os dados no endpoint para responder o KYC.\nGET https://sandbox-api.openbank.stone.com.br/api/v1/users/{id_do_usuario}/kyc/request \nHEADERS  authorization string Bearer token de autenticação\nResponse  200 OK { \"checks\": [ { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"birthdate\", \"id\": \"400bf541-788f-4d5f-86b1-6519f318ca65\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"requested\", \"updated_at\": \"2021-05-31T15:04:48Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"phone_number\", \"id\": \"6747569e-ea50-4b71-9230-7e0fd8b92d6d\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"requested\", \"updated_at\": \"2021-05-31T15:04:48Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"address\", \"id\": \"4f485886-1546-4726-b4e1-baa21bb0f4a1\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"requested\", \"updated_at\": \"2021-05-31T15:04:48Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"document_photo\", \"id\": \"cbe5a713-2d02-49b3-85e4-97bf39c27354\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"requested\", \"updated_at\": \"2021-05-31T15:04:48Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"document_selfies\", \"id\": \"5b6d185d-e080-4534-b346-389fffae7294\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"requested\", \"updated_at\": \"2021-05-31T15:04:48Z\" }, { \"context\": { \"income_ranges\": [ { \"formatted\": \"Até R$ 5.000,00\", \"range\": { \"lower_bounds\": null, \"upper_bounds\": 500000 } }, { \"formatted\": \"Entre R$ 5.000,01 e R$ 10.000,00\", \"range\": { \"lower_bounds\": 500001, \"upper_bounds\": 1000000 } }, { \"formatted\": \"Entre R$ 10.000,01 e R$ 20.000,00\", \"range\": { \"lower_bounds\": 1000001, \"upper_bounds\": 2000000 } }, { \"formatted\": \"Entre R$ 20.000,01 e R$ 100.000,00\", \"range\": { \"lower_bounds\": 2000001, \"upper_bounds\": 10000000 } }, { \"formatted\": \"Entre R$ 100.000,01 e R$ 1.000.000,00\", \"range\": { \"lower_bounds\": 10000001, \"upper_bounds\": 100000000 } }, { \"formatted\": \"Mais de R$ 1.000.000,00\", \"range\": { \"lower_bounds\": 100000001, \"upper_bounds\": null } } ] }, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"total_income_range\", \"id\": \"a24ad007-2d63-4108-8340-16b843873be2\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"requested\", \"updated_at\": \"2021-05-31T15:04:48Z\" } ], \"context\": {}, \"created_at\": \"2021-05-31T15:04:48Z\", \"id\": \"50a22e82-1fe6-407b-b76c-986f46db60e8\", \"input_type\": \"user_input\", \"is_mandatory\": true, \"reason\": \"account_request\", \"status\": \"requested\", \"updated_at\": \"2021-05-31T15:04:48Z\", \"user_id\": \"ef49c647-1dc9-47e8-a559-108cdf7e65a4\" } \nPróximo passo:\nConsultar URL para envio da foto. ","categories":"","description":"","excerpt":" Nesse endpoint é possível verificar as informações de KYC que se …","ref":"/docs/referencia-da-api/kyc/buscar-informacoes-pendentes/","tags":"","title":"Buscar informações pendentes"},{"body":" Conceito  Oferecemos uma API de Transferências, na qual permite-se efetuar a movimentação de fundos entre contas bancárias, podendo ser:\n  Transferência interna: Transferência entre duas Contas Stone. O valor transferido é creditado instantaneamente na conta destinatária, independente do horário e dia da efetuação da transação.\n  Transferência externa: TED (Transferência Eletrônica Disponível) para outros bancos. Nos dias úteis, entre 6:30 e 17:23, a transação é processada de forma assíncrona e o valor é creditado na conta destino em poucas horas. Caso a operação seja efetuada fora do horário citado e/ou em dias não úteis, a transação será agendada automaticamente para o dia útil seguinte.\n  Status: Segue abaixo os status possíveis de uma transferência externa: A transferência externa criada pelo parceiro aguardará a aprovação do usuário da conta no estado CREATED. Essa transferência pode ser rejeitada pelo usuário, concluindo no estado REJECTED, e não será efetuada. Caso ela seja uma transferência agendada, é possível que o prazo do agendamento expire antes dela obter aprovação, encerrando em EXPIRED.\nCaso ela seja agendada e aprovada dentro do prazo, seguirá para o estado SCHEDULED, e será efetuada na data do agendamento. É importante observar que caso a criação da transferência externa, tanto pelo parceiro quanto pelo usuário, seja feita fora do horário de 6:30 às 17:23, ela seguirá para um estado de DELAYED_TO_NEXT_BUSINESS_DAY, em que ela será agendada para a próxima janela de execução. É possível que o usuário cancele a transferência antes dela ser efetuada, encerrando no estado CANCELLED.\nQuando é o próprio usuário que cria a transação, o fluxo já se inicia no estado APPROVED ou SCHEDULED, caso tenha sido criada com agendamento. A transferência poderá falhar apenas caso não haja fundos e terminará no estado FAILED. Caso tenha sido aprovada e haja fundos, a Stone realizará a transferência para o banco externo, obtendo o estado FINISHED. Caso haja algum problema como, por exemplo, dados incorretos, ele será reembolsado e irá finalizar no estado REFUNDED.\nPara a transferência interna o fluxo é similar. Neste caso não haverá o estado REFUNDED, já que antes de realizar a transferência já conferimos a existência da conta destino. Não haverá também o estado DELAYED_TO_NEXT_BUSINESS_DAY, porque não há limites de horário para a realização de transferências para outras contas Stone.\nÉ possível consultar o status de uma transação a qualquer momento para saber em qual estado ela está.\nSegue abaixo os status possíveis de uma transferência interna: Horário de funcionamento No ambiente de sandbox, a API de transferência externa fica disponível de 6:30 às 17:23 todos os dias, inclusive nos fins de semana e feriados, para facilitar os testes.  Falhas em transferências  Falha é qualquer erro que ocorra entre a criação e a movimentação do dinheiro na conta. Ou seja, qualquer condição que era válida no momento da criação da transferência, mas que mudou nas etapas seguintes.\nA seguir listamos algumas das falhas possíveis para transações de transferência, tanto para interna quanto para externa.\n   Código Descrição     0 Ocorreu um erro durante a transferência. Por favor, tente novamente.   1 Saldo insuficiente.   2 A operação falhou por uma restrição em uma das contas.   409 É recebido esse erro quando é realizado o envio de uma nova TED anteriormente enviada com sucesso, porém, com a mesma chave de idempotência.    Reembolsos em transferências  Reembolsos ocorrem apenas em transferências para outros bancos, já que para transferências internas conferimos a existência da conta destino antes de realizar a transferência.\nAbaixo listamos algumas das razões possíveis para ocorrer reembolsos, como também seus códigos correspondentes.\n   Código Descrição     0 Ocorreu um erro durante a transferência. Por favor, tente novamente.   1 A conta destino não existe mais. Por favor, entre em contato com o titular.   2 A agência ou conta do destino estão incorretas. Por favor, confira os dados e tente novamente.   3 O CPF/CNPJ do destino está incorreto. Por favor, confira os dados e tente novamente.   4 Mensagem Inválida para o Tipo de Transação ou Finalidade.   5 Ocorreu um problema devido ao grande volume de transações. Tente novamente.   6 A conta destino não está apta a receber o valor enviado. Por favor, entre em contato com o titular.   7 Não conformidade no pagamento.   8 Os dados informados estão incorretos. Por favor, confira e tente novamente.   9 CPF/CNPJ inapto junto à Receita Federal do Brasil.   10 Por solicitação de cliente da instituição participante recebedora.    ","categories":"","description":"","excerpt":" Conceito  Oferecemos uma API de Transferências, na qual permite-se …","ref":"/docs/referencia-da-api/transferencias/o-que-e-uma-transferencia/","tags":"","title":"O Que É Uma Transferência"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/pix/outbound_pix_payments \nEsse endpoint foi idealizado para criação de um Pix pendente de confirmação enviando os dados do destino ou uma chave Pix.\nOu seja, com este endpoint é possível fazer um pix informando tanto o campo key como informando o campo target.\nCONSIDERAÇÕES IMPORTANTES\n O campo key se torna obrigatório na presença do campo transaction_id.\n A ausência do campo key, que seria o envio de um Pix pela Chave Pix torna o campo target, que é o campo com os dados bancários do destino, obrigatório.\n É possivel criar um Pix somente informando o campo account_id sem precisar informar o campo source.\n Após a criação do Pix através desse endpoint é necessário confirmar o mesmo através do endpoint /api/v1/pix/outbound_pix_payments/{id}/actions/confirm. Caso o Pix não seja confirmado, ele permanece no status de CREATED até ser confirmado.   HEADERS  authorization* string\nx-stone-idempotency-key* string Chave de idempotência\nExemplo:\n{ \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"24b53d84-a79d-11eb-bcbc-0242ac130002\" } \nBODY PARAMS  account_id* string Identificador da conta\namount integer Valor do Pix a ser realizado Esse campo é opcional na criação do Pix nesse endpoint, desde que este seja informado no endpoint /api/v1/pix/outbound_pix_payments/{id}/actions/confirm Valor mínimo: 0 Valor máximo: 1000000000000\ndescription string Descrição do pagamento a ser realizado\ntransaction_id string Identificador da transação, que relaciona uma cobrança a um pagamento Pix. Ela é enviada no response do endpoint /api/v1/pix/outbound_pix_payments/brcode Format: ^[a-zA-Z0-9]{1,25}$|^[a-zA-Z0-9]{26,35}$\nkey string Chave identificadora da contraparte Tamanho mínimo: 0 Tamanho máximo: 77\nsource Dados do pagador entity document string name string account account_type string Format: PG, PP ou CC account_code string Format: ^[1-9]\\d{1,19}$ branch_code string Format: ^\\d{4}$ institution ispb string\ntarget Dados da contraparte do pagamento entity document string name string account account_type string Format: PG, PP ou CC account_code string Format: ^[1-9]\\d{1,19}$ branch_code string Format: ^\\d{4}$ institution ispb string\nBody:\n{ \"account_id\": \"477f8576-ca82-462b-bw63-dc28cc6490c3\", \"amount\": 39511, \"description\": \"some description\", \"transaction_id\": \"6f4d67a374004257974facecelea4810\", \"key\": \"+5521999999999\", \"source\": { \"entity\": { \"document\": \"91098953062\", \"name\": \"João da Silva\" }, \"account\": { \"account_type\": \"CC\", \"account_code\": \"34\", \"branch_code\": \"0001\" }, \"institution\": { \"ispb\": \"16501555\" } } } \nResponses 201 OK { \"account_id\": \"477f8576-ca82-462b-be73-dc28cc6490c3\", \"amount\": 39511, \"created_at\": \"2020-12-14T17:38:02Z\", \"created_by\": \"user:380f9968-8946-4f88-a781-be8b7efc1f90\", \"description\": \"some description\", \"transaction_id\": \"c62153a222df4e60b2e538b068635d41\", \"key\": \"+5521988040465\", \"end_to_end_id\": \"E16501555202012141738a87df0acd5f\", \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"id\": \"5b695a22-187a-4181-93c8-811e155a89fc\", \"money_reserved_at\": null, \"refunded_amount\": 0, \"request_id\": \"1017dbdd97871b98eeaf1c650a20aa15\", \"settled_at\": null, \"source\": { \"account\": { \"account_code\": \"34\", \"account_type\": \"CC\", \"branch_code\": \"0001\" }, \"entity\": { \"document\": \"91092573062\", \"document_type\": \"cpf\", \"name\": \"João da Silva\" }, \"institution\": { \"ispb\": \"16501555\", \"name\": \"STONE PAGAMENTOS S.A.\" } }, \"status\": \"CREATED\", \"target\": { \"account\": { \"account_code\": \"10510656\", \"account_type\": \"CC\", \"branch_code\": \"0001\" }, \"entity\": { \"document\": \"04836916313\", \"document_type\": \"cpf\", \"name\": \"ARCILIO BERNARDI CARDOSO\" }, \"institution\": { \"ispb\": \"92894922\", \"name\": \"BANCO ORIGINAL S.A.\" } } } ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/pix/criar-pagamento-pendente/","tags":"","title":"Criar um pagamento pendente"},{"body":" Fluxo da recarga    Para efetuar a recarga de créditos para um celular é necessário que o cliente nos informe o número de celular desejado para a recarga. Com esse número, sugerimos a operadora mais provável desejada para a recarga, porém, também permitimos que o cliente escolha a operadora desejada.\n  Após a escolha da operadora, o cliente seleciona o valor que deseja recarregar.\n  Ao confirmar a recarga, adicionaremos os créditos junto a operadora.\n  Operadoras disponíveis   Claro; Correios; Embratel; Nextel; Oi; Tim; Vivo; Oi Fixo; Algar Fixo; Claro Fixo; Surf Telecom.  Atenção\nOs valores oferecidos para a recarga não são flexíveis e variam de acordo com a operadora.\n Horário de funcionamento A liquidação da recarga poderá ser executada em até 24 horas, porém, costuma ser efetuada em questão de segundos.  Ações a serem executadas para recarga de Celular  1) Listar todos os provedores para Celular GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/mobile/providers/{cellphone} Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Response 200 ok { \"possible_provider\": { \"name\": \"Tim\", \"id\": 2086, \"products\": [ { \"value\": 1000 }, { \"value\": 1500 }, { \"value\": 2000 }, { \"value\": 3000 }, { \"value\": 4000 }, { \"value\": 5000 }, { \"value\": 10000 } ] }, \"other_providers\": [ { \"name\": \"Claro\", \"id\": 2087 }, { \"name\": \"Claro Fixo\", \"id\": 2092 }, { \"name\": \"Correios\", \"id\": 2130 }, { \"name\": \"CTBC CEL\", \"id\": 2093 }, { \"name\": \"ALGAR FIXO\", \"id\": 2091 }, { \"name\": \"Embratel\", \"id\": 2090 }, { \"name\": \"Nextel\", \"id\": 2098 }, { \"name\": \"Oi\", \"id\": 2089 }, { \"name\": \"Vivo\", \"id\": 2088 } ] } \n2) Listar todos os valores para o provedor GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/mobile/values/{provider-id}/{cellphone} Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Response 200 ok { \"product\": [ { \"value\": 1000 }, { \"value\": 1500 }, { \"value\": 2000 }, { \"value\": 3000 }, { \"value\": 4000 }, { \"value\": 5000 }, { \"value\": 10000 } ] } \n3) Simular uma recarga de Celular POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/mobile/dry-run Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 1000, \"cellphone\": \"21971592768\", \"provider_id\": \"2086\" } Response 202 Accepted { \"amount\": 1000, \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"provider_id\": \"2086\", \"cellphone\": \"21971592768\" } \n4) Executar uma recarga de Celular POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/mobile Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\", \"x-stone-challenge-solution\": \"81080d67-aac9-415b-868f-4403243201d3\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 1000, \"cellphone\": \"21971592768\", \"provider_id\": \"2086\" } Response 200 ok { \"id\": \"d909dee9-a834-4d35-926f-7939890e9b17\", \"receipt\": \" PROTOCOLO 0006450144\\n1 01/04/2021 17:37\\nTERM 228005 AGENTE 228005 AUTE 05430\\n----------------------------------------\\nAUTO 975886 RECARGA\\n\\nPRODUTO: CLARO\\nTELEFONE: 11 941497981\\nNSU OPERADORA: 610761\\nDATA: 01/04/2021 17:37\\nVALOR: R$ 10,00\\n\\nVIVO TURBO: INTERNET + LIGACOES E SMS\\nILIMITADOS PARA VIVO (CEL E FIXO, USANDO\\nO 15)APENAS R$9,99 POR SEMANA. LIGUE\\n*9003 E CADASTRE SE!\\n----------------------------------------\\n\\n\", \"transaction_id\": \"aeac8eea-ebac-45c5-b429-5a3781b949ce\" } \nStatus_code: 403 Caso receba como resposta o status_code: 403, clique aqui para ter acesso ao fluxo de autorização do challenge que deverá ser enviado no Header do Request (x-stone-challenge-solution).  ","categories":"","description":"","excerpt":" Fluxo da recarga    Para efetuar a recarga de créditos para um …","ref":"/docs/referencia-da-api/recargas/recarga-de-celular/","tags":"","title":"Recarga para Celular"},{"body":" SDK de integração para iOS.\nContato  Se durante a integração encontrar algum problema ou ponto de melhoria entre em contato com a gente através do Azendoo.\nInstalação  Requisitos  iOS 10.0 Xcode 11.7  Configuração Antes de começar a usar o ContaStoneSDK é necessário seguir alguns procedimentos:\n  Baixe o arquivo zip no link com os frameworks necessários.\n  Extraia a pasta Frameworks no diretório raiz do projeto.\n  No target do projeto acesse a guia General e em Frameworks, Libraries, and Embedded Content adicione os frameworks:\n ContaStoneSDK.framework CryptoSwift.framework JOSESwift.framework TinyConstraints.framework XCoordinator.framework    Na guia Build Settings, em Build Options, selecione NO para a configuração Enable Bitcode.\n  Na guia Build Settings, em Runpath Search Paths, adicione a entrada @executable_path/Frameworks/ContaStoneSDK.framework/Frameworks/.\n  Logo abaixo em Framework Search Paths, adicione a entrada $(PROJECT_DIR)/Frameworks/ContaStoneSDK.framework/Frameworks/ no modo recursivo.\n  Em Build Phases adicione um novo script chamado “Sign” (Em Build Phases, clique sinal de “mais” e selecione New Run Script Phase).\n  pushd ${TARGET_BUILD_DIR}/${PRODUCT_NAME}.app/Frameworks/ContaStoneSDK.framework/Frameworks for EACH in *.framework; do echo \"-- signing ${EACH}\" /usr/bin/codesign --force --deep --sign \"${EXPANDED_CODE_SIGN_IDENTITY}\" --entitlements \"${TARGET_TEMP_DIR}/${PRODUCT_NAME}.app.xcent\" --timestamp=none $EACH done popd Adicione dependências:  // Cocoapods pod 'Alamofire', '4.8.2' pod 'RxSwift', '~\u003e 5' pod 'RxCocoa', '~\u003e 5' pod 'lottie-ios', '3.1.6' pod 'AloeStackView', '1.2.0' // Carthage github \"Alamofire/Alamofire\" \"4.8.2\" github \"ReactiveX/RxSwift\" \"5.1.1\" github \"airbnb/lottie-ios\" \"3.1.6\" github \"airbnb/AloeStackView\" \"v1.2.0\" USO  Configurando o AppDelegate import UIKit import ContaStoneSDK @UIApplicationMain class AppDelegate: UIResponder, UIApplicationDelegate { func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -\u003e Bool { ContaStone.configure( id: \"john.doe@openbank.com\", scopes: [\"offline_access\"], environmentType: .sandbox, // .homol, .sandbox, .production delegate: self ) return true } } extension AppDelegate: ContaStoneDelegate { func refreshApp() {} func sessionRevoked() {} func loggedOut() {} func showHelpCenter() {} func showChat() {} func showFrequentlyAskedQuestions() {} } Autenticação import UIKit import ContaStoneSDK class ViewController: UIViewController { func checkAuthenticationState() { if ContaStone.isAuthenticated { ContaStone.currentAcount.name // John Doe Inc } else { ContaStone.login(checkKYC: true) { /* callback */ } } } } Logout import UIKit import ContaStoneSDK class ViewController: UIViewController { func logout() { ContaStone.logout { /* callback */ } } } Aprovador var approverCoordinator: ApproverCoordinator? func showApprover() { let coordiantor = ApproverCoordinator() { _ in self.approverCoordinator = nil } present(coordiantor.rootViewController, animated: true, completion: nil) approverCoordinator = coordiantor // Holds the instance } Requisições class ViewController: UIViewController { func fetchBalance() { let id = ContaStone.currentAcount.id let endpoint = Endpoint\u003cBalanceResponse\u003e(method: .get, path: \"/api/v1/accounts/\\(id)/balance\") ContaStone.performRequest(endpoint) { result in switch result { case .success(let response): /* callback */ case .failure(let error): /* callback */ } } } } \nExemplo  Antes de abrir o projeto de exemplo, é necessário executar o script de bootstrap.\n./bootstrap open Sample.xcworkspace ","categories":"","description":"","excerpt":" SDK de integração para iOS.\nContato  Se durante a integração …","ref":"/docs/referencia-da-api/conta-stone-sdk/sdk-sample-ios/","tags":"","title":"Sample iOS"},{"body":" Cada Conta Stone possui sua própria configuração de criação de link de pagamento que limitam valor máximo permitido, configurações de checkout e outros parâmetros.\nAtenção\nÉ importante que antes da criação de qualquer link de pagamento as configurações da conta sejam checadas.\n  GET https://sandbox-api.openbank.stone.com.br/api/v1/payment_links/{account_id}/config  Response { \"accepted_multi_payment_methods\": [], \"bank_slip\": { \"bank\": 197, \"enabled\": false, \"expires_in\": 2, \"instructions\": \"Pagar até o vencimento\" }, \"billing_address_editable\": false, \"closed\": false, \"credit_card\": { \"capture\": true, \"enabled\": true, \"max_installments\": 12 }, \"customer_editable\": true, \"max_amount\": 5000000, \"min_amount\": 100, \"payment_method\": \"checkout\", \"payment_url_host\": \"http: //link.homolog.stone.credit\", \"skip_checkout_success_page\": true, \"success_url\": \"/sucesso\" } ","categories":"","description":"","excerpt":" Cada Conta Stone possui sua própria configuração de criação de link …","ref":"/docs/referencia-da-api/link-de-pagamentos/configuracoes-da-conta-para-um-link-de-pagamento/","tags":"","title":"Configurações da Conta para um Link de Pagamento"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/guias/a-conta-stone/","tags":"","title":"A CONTA STONE"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/dados-da-conta/","tags":"","title":"Dados da conta"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/institutions \nResponse  201 Created content-type: application/json \nBody\n[ { \"ispb_code\": \"16501555\", \"name\": \"Stone Pagamentos S.A.\", \"number_code\": \"197\", \"short_name\": \"STONE PAGAMENTOS S.A.\" }, { \"ispb_code\": \"00000000\", \"name\": \"Banco do Brasil S.A.\", \"number_code\": \"001\", \"short_name\": \"BCO DO BRASIL S.A.\" }, { \"ispb_code\": \"00360305\", \"name\": \"Caixa Econômica Federal\", \"number_code\": \"104\", \"short_name\": \"CAIXA ECONOMICA FEDERAL\" }, { \"ispb_code\": \"90400888\", \"name\": \"Banco Santander (Brasil) S. A.\", \"number_code\": \"033\", \"short_name\": \"BCO SANTANDER (BRASIL) S.A.\" }, { \"ispb_code\": \"60746948\", \"name\": \"Banco Bradesco S.A.\", \"number_code\": \"237\", \"short_name\": \"BCO BRADESCO S.A.\" }, { \"ispb_code\": \"60701190\", \"name\": \"Itaú Unibanco S.A.\", \"number_code\": \"341\", \"short_name\": \"ITAÚ UNIBANCO BM S.A.\" }, { \"ispb_code\": \"18236120\", \"name\": \"Nu Pagamentos S.A.\", \"number_code\": \"260\", \"short_name\": \"NU PAGAMENTOS S.A.\" }, { \"ispb_code\": \"00416968\", \"name\": \"Banco Inter S.A.\", \"number_code\": \"077\", \"short_name\": \"BANCO INTER\" } ] ","categories":"","description":"","excerpt":" GET https://sandbox-api.openbank.stone.com.br/api/v1/institutions …","ref":"/docs/referencia-da-api/instituicoes/listar-instituicoes/","tags":"","title":"Listar Instituições"},{"body":"","categories":"","description":"Conheça os endpoints da nossa API e seus contratos.\n","excerpt":"Conheça os endpoints da nossa API e seus contratos.\n","ref":"/docs/referencia-da-api/","tags":"","title":"Referência da API"},{"body":" A nossa API é RESTful, e todas suas respostas são em JSON, nos endpoint base, por ambiente:\n Sandbox: https://sandbox-api.openbank.stone.com.br Produção: https://api.openbank.stone.com.br  Seguimos alguns padrões para alguns tipos de dados em toda a nossa API. A seguir, juntamos alguns desses padrões para simplificar a vida da desenvolvedora.\nRealizando Chamadas Autenticadas  A nossa API só aceita chamadas autenticadas, ou seja, chamadas cujo sujeito da ação conseguimos identificar.\nCaso ainda não tenha realizado o procedimento para obter seu token de acesso, por favor siga o passo a passo descrito na página Autenticação de nossos Guias.\nCaso tenha em mãos seu token de acesso, já é possível realizar chamadas autenticadas.\nPara isso, exigimos que nas requisições HTTP exista no cabeçalho um campo chamado authorization, cujo valor será “Bearer” seguido do token de acesso.\nExemplo de cabeçalho de uma chamada autenticada:\nHeader GET /api/v1/accounts HTTP/1.1 Host: sandbox-api.openbank.stone.com.br User-Agent: Nome da aplicação Accept: */* authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c ","categories":"","description":"","excerpt":" A nossa API é RESTful, e todas suas respostas são em JSON, nos …","ref":"/docs/referencia-da-api/padroes-da-api/autenticacao/","tags":"","title":"Autenticação"},{"body":" Provê um conjunto de informações para acompanhar o pedido de cadastro da conta de pagamento.\n GET https://sandbox-api.openbank.stone.com.br/api/v1/applications/:client_id/signups/:sign_up_request_id \nAuthorization  oauth2 - authorizationCode\nA autenticação pública deve passar pelo nosso IAM Keycloak através do protocolo OpenID Connect e receber um token JWT.\n Flow: authorizationCode Authorization URL: https://sandbox-accounts.openbank.stone.com.br Token URL: https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token Required Scopes: stone_subject_id   Request Parameters  PATH PARAMETER  client_id* string\nsign_up_request_id* string\nHEADER  x-stone-subject-token string\nResponses  200 ok  A resposta contém os seguintes dados:\n id: identificador do pedido de sign up owner_id: identificador do usuário ou organização dona da conta de pagamento owner_type: tipo do dono da conta de pagamento (user ou organization) user_id: id do usuário atrelado a conta de pagamento organization_id: id da organização atrelada a conta de pagamento (pode ser nulo caso seja uma conta apenas de PF). user_email_verified: indica se o usuário está com o e-mail verificado. user_assessment_request_status: status do assessment request para criação do usuário. organization_assessment_request_status: status do assessment request para criação da organização (pode ser nulo caso seja uma conta apenas de PF). subject_id: id da aplicação que criou esse pedido de sign up. status: em qual status está o pedido de sign up created, kyc_analysis(em análise de kyc), finished, failed error: apenas presente caso o status seja failed, contém informações do motivo de falha ao fazer o sign up. metadata: metadados customizados passados ao realizar o cadastro. request_metadata: metadados da requisição de cadastro. Ex: user-agent, ip. resource_details: detalhes envolvendos esse cadastro. Ex: usuário verificou o e-mail, horário que o usuário verificou e-mail, assessment de usuário aprovado, conta de pagamento aberta/fechada/inexistente. resource_type: tipo de recurso principal criado (usuário, organização, conta de pagamento). user: alguns campos do usuário, atualmente só carregamos o id e o approval_status (limited|approved|partially_rejected|pending_analysis). organization: alguns campos da organização, atualmente só carregamos o id e o approval_status. inserted_at: timestamp da criação do pedido de conta de pagamento. updated_at: timestamp da última atualização do pedido de conta de pagamento.   Schema  Object:\n  id string\n  owner_id string\n  owner_type string\n  user_id string\n  organization_id string\n  subject_id string\n  status string\n  error string\n  matadata string\n  request_matadata string\n  insert_at string\n  update_at string\n  resource_details object\n  account_status boolean or string\n  account_status_changed_at string\n  account_status_timestamp string\n  organization_automatic_checks_status string\n  organization_automatic_checks_status_change_at string\n  organization_automatic_checks_status_timestamp string\n  organization_input_assessment_status string\n  organization_input_assessment_status_change_at string\n  organization_input_assessment_status_timestamp string\n  user_automatic_checks_status string\n  user_automatic_checks_status_change_at string\n  user_automatic_checks_status_timestamp string\n  user_input_assessment_status string\n  user_input_assessment_status_change_at string\n  user_input_assessment_status_timestamp string\n  resource_type string\nExample { \"error\": null, \"id\": \"ea3c66b7-e8cb-46b8-a140-bd6f33738380\", \"inserted_at\": \"2020-08-11T12:39:53.659803\", \"marketing_data\": { \"utm_adname\": null, \"utm_campaign\": null, \"utm_content\": null, \"utm_medium\": null, \"utm_source\": null, \"utm_term\": null }, \"metadata\": {}, \"organization_id\": \"3bf2ac6f-2219-4027-8516-d9457f7e6a96\", \"owner_id\": \"organization:3bf2ac6f-2219-4027-8516-d9457f7e6a96\", \"owner_type\": \"organization\", \"request_id\": \"ef53b9b8c8d2dfdf227ee47ca2b9d2ed\", \"request_metadata\": { \"device_generated_id\": null, \"idempotency_key\": null, \"platform_id\": null, \"referer\": null, \"remote_ip\": \"10.20.201.251, 10.9.2.19\", \"request_id\": \"ef53b9b8c8d2dfdf227ee47ca2b9d2ed\", \"user_agent\": \"PostmanRuntime/7.26.1\" }, \"resource_details\": { \"account_status\": \"created\", \"account_status_changed_at\": \"2020-11-26T19:20:10.219377\", \"account_status_timestamp\": \"2020-11-26T19:20:10.219377\", \"user_automatic_checks_status\": \"partially_rejected\", \"user_automatic_checks_status_changed_at\": \"2020-11-26T19:20:10.219377\", \"user_automatic_checks_status_timestamp\": \"2020-11-25T19:33:14\", \"user_email_verified\": true, \"user_email_verified_changed_at\": \"2020-11-26T19:20:10.219377\", \"user_email_verified_timestamp\": \"2020-11-25T19:35:44.770362\", \"user_input_assessment_status\": \"approved\", \"user_input_assessment_status_changed_at\": \"2020-11-26T19:20:10.219377\", \"user_input_assessment_status_timestamp\": \"2020-11-25T19:33:13\" }, \"resource_type\": \"srn:resource:paymentaccount\", \"status\": \"kyc_analysis\", \"subject_id\": \"user:790081f7-92ce-428f-8334-6443ecc3cbb2\", \"updated_at\": \"2020-08-11T12:39:56.568580\", \"user_id\": \"1f4b4f98-f2a2-4ae6-9d4d-2a8dbe5473e1\", \"user\": { \"approval_status\": \"approved\", \"id\": \"2d2e6aba-ce11-49be-88c0-0641843cabdc\" } } ","categories":"","description":"","excerpt":" Provê um conjunto de informações para acompanhar o pedido de cadastro …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-dados-do-pedido-da-conta-de-pagamento/","tags":"","title":"Consultar Dados do Pedido da Conta de Pagamento"},{"body":" Provê um conjunto de informações para acompanhar o pedido de cadastro da conta de pagamento.\n GET https://sandbox-api.openbank.stone.com.br/api/v1/applications/:client_id/signups/:sign_up_request_id  Authorization  oauth2 - authorizationCode\nA autenticação pública deve passar pelo nosso IAM Keycloak através do protocolo OpenID Connect e receber um token JWT.\n Flow: authorizationCode Authorization URL: https://sandbox-accounts.openbank.stone.com.br Token URL: https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token Required Scopes: stone_subject_id    Request Parameters  PATH PARAMETER  client_id* string\nsign_up_request_id* string\nHEADER  x-stone-subject-token string\nResponses  200 ok  A resposta contém os seguintes dados:\n id: identificador do pedido de sign up owner_id: identificador do usuário ou organização dona da conta de pagamento owner_type: tipo do dono da conta de pagamento (user ou organization) user_id: id do usuário atrelado a conta de pagamento organization_id: id da organização atrelada a conta de pagamento (pode ser nulo caso seja uma conta apenas de PF). user_email_verified: indica se o usuário está com o e-mail verificado. user_assessment_request_status: status do assessment request para criação do usuário. organization_assessment_request_status: status do assessment request para criação da organização (pode ser nulo caso seja uma conta apenas de PF). subject_id: id da aplicação que criou esse pedido de sign up. status: em qual status está o pedido de sign up created, kyc_analysis(em análise de kyc), finished, failed error: apenas presente caso o status seja failed, contém informações do motivo de falha ao fazer o sign up. metadata: metadados customizados passados ao realizar o cadastro. request_metadata: metadados da requisição de cadastro. Ex: user-agent, ip. resource_details: detalhes envolvendos esse cadastro. Ex: usuário verificou o e-mail, horário que o usuário verificou e-mail, assessment de usuário aprovado, conta de pagamento aberta/fechada/inexistente. resource_type: tipo de recurso principal criado (usuário, organização, conta de pagamento). user: alguns campos do usuário, atualmente só carregamos o id e o approval_status (limited|approved|partially_rejected|pending_analysis). organization: alguns campos da organização, atualmente só carregamos o id e o approval_status. inserted_at: timestamp da criação do pedido de conta de pagamento. updated_at: timestamp da última atualização do pedido de conta de pagamento.   Schema  Object:\n  id string\n  owner_id string\n  owner_type string\n  user_id string\n  organization_id string\n  subject_id string\n  status string\n  error string\n  matadata string\n  request_matadata string\n  insert_at string\n  update_at string\n  resource_details object\n  account_status boolean or string\n  account_status_changed_at string\n  account_status_timestamp string\n  organization_automatic_checks_status string\n  organization_automatic_checks_status_change_at string\n  organization_automatic_checks_status_timestamp string\n  organization_input_assessment_status string\n  organization_input_assessment_status_change_at string\n  organization_input_assessment_status_timestamp string\n  user_automatic_checks_status string\n  user_automatic_checks_status_change_at string\n  user_automatic_checks_status_timestamp string\n  user_input_assessment_status string\n  user_input_assessment_status_change_at string\n  user_input_assessment_status_timestamp string\n  resource_type string\nExample { \"error\": null, \"id\": \"ea3c66b7-e8cb-46b8-a140-bd6f33738380\", \"inserted_at\": \"2020-08-11T12:39:53.659803\", \"marketing_data\": { \"utm_adname\": null, \"utm_campaign\": null, \"utm_content\": null, \"utm_medium\": null, \"utm_source\": null, \"utm_term\": null }, \"metadata\": {}, \"organization_id\": \"3bf2ac6f-2219-4027-8516-d9457f7e6a96\", \"owner_id\": \"organization:3bf2ac6f-2219-4027-8516-d9457f7e6a96\", \"owner_type\": \"organization\", \"request_id\": \"ef53b9b8c8d2dfdf227ee47ca2b9d2ed\", \"request_metadata\": { \"device_generated_id\": null, \"idempotency_key\": null, \"platform_id\": null, \"referer\": null, \"remote_ip\": \"10.20.201.251, 10.9.2.19\", \"request_id\": \"ef53b9b8c8d2dfdf227ee47ca2b9d2ed\", \"user_agent\": \"PostmanRuntime/7.26.1\" }, \"resource_details\": { \"account_status\": \"created\", \"account_status_changed_at\": \"2020-11-26T19:20:10.219377\", \"account_status_timestamp\": \"2020-11-26T19:20:10.219377\", \"user_automatic_checks_status\": \"partially_rejected\", \"user_automatic_checks_status_changed_at\": \"2020-11-26T19:20:10.219377\", \"user_automatic_checks_status_timestamp\": \"2020-11-25T19:33:14\", \"user_email_verified\": true, \"user_email_verified_changed_at\": \"2020-11-26T19:20:10.219377\", \"user_email_verified_timestamp\": \"2020-11-25T19:35:44.770362\", \"user_input_assessment_status\": \"approved\", \"user_input_assessment_status_changed_at\": \"2020-11-26T19:20:10.219377\", \"user_input_assessment_status_timestamp\": \"2020-11-25T19:33:13\" }, \"resource_type\": \"srn:resource:paymentaccount\", \"status\": \"kyc_analysis\", \"subject_id\": \"user:790081f7-92ce-428f-8334-6443ecc3cbb2\", \"updated_at\": \"2020-08-11T12:39:56.568580\", \"user_id\": \"1f4b4f98-f2a2-4ae6-9d4d-2a8dbe5473e1\", \"user\": { \"approval_status\": \"approved\", \"id\": \"2d2e6aba-ce11-49be-88c0-0641843cabdc\" } } ","categories":"","description":"","excerpt":" Provê um conjunto de informações para acompanhar o pedido de cadastro …","ref":"/docs/referencia-da-api/dados-da-conta/verificar-status-de-uma-entidade/","tags":"","title":"Verificar Status de Uma Entidade"},{"body":" Segue abaixo os status possíveis de um boleto gerado:\nGlossário     Termo Definição     Created Boleto criado.   registered Registro do Boleto foi efetuado.   Settled Pagamento do Boleto foi liquidado.   Expired Passou a data limite de pagamento do boleto.   Cancelattion_request Pedido de cancelamento de um boleto ainda não pago.   Cancelled Boleto Cancelado pela solicitação.    ","categories":"","description":"","excerpt":" Segue abaixo os status possíveis de um boleto gerado:\nGlossário …","ref":"/docs/referencia-da-api/emissao-de-boletos/status/","tags":"","title":"Status"},{"body":"Como funcionam os principais modelos de parceria que oferecemos para aqueles que desejam integrar com a nossa API.\n A Stone oferece dois modelos principais de parceria:\nAPI de Open Banking Permite que o parceiro integre na API para disponibilizar todas as funcionalidades da Conta Stone para o usuário por meio de sua Aplicação. Dessa forma, é possível oferecer ao usuário um serviço mais completo, agregando valor ao seu produto.\nO usuário interage com seu serviço através de uma interface de sua responsabilidade.\nO usuário enxerga a Stone como provedor financeiro, agregando a imagem de confiança financeira da Stone ao seu serviço.\nA aprovação de cash-out (qualquer saída de recurso da conta) sempre terá que ser aprovada pelo usuário por meio de autenticação no ambiente Stone, através do aplicativo Aprovador. Dessa forma, o parceiro fica protegido da responsabilidade na movimentação de recursos financeiros.\nAPI de Tesouraria Facilita a gestão de operações financeiras complexas, através de um token para operar a sua própria conta com acesso ao Sistema de Pagamentos Brasileiro (SPB). Facilitadores (subadquirentes) e emissores de moeda eletrônica (wallets) podem se beneficiar de uma API RESTful conectada no backbone do Banco Central e integrada no last mile de todos os produtos básicos de conta que você precisa para cash-in e cash-out no seu serviço financeiro. A API de Openbank da Stone foi criada para aguentar um grande número de transações de forma rápida, simples e segura.\nNesse modelo você é o cliente final dono da conta. Não criamos, gerimos ou nos responsabilizamos pelas credenciais de seus clientes em seu ambiente. Todo fluxo financeiro é feito através de sua própria Conta Stone. Todo monitoramento e report de atividade para os reguladores serão feitos levando em consideração o parceiro como cliente final. Por isso, é importante que o parceiro mantenha monitoramento e controles dos seus clientes em seu lado.\nTodos os serviços disponíveis na Conta Stone poderão ser oferecidos para seus clientes, com a diferença que o fluxo financeiro é centralizado na sua conta.\n","categories":"","description":"","excerpt":"Como funcionam os principais modelos de parceria que oferecemos para …","ref":"/docs/guias/a-conta-stone/modelos-de-parceria/","tags":"","title":"Modelos de Parceria"},{"body":" \n   Chave Descrição Tipo     account_id Identificador da conta. String   amount Valor da transação, em centavos de reais. Integer   approval_expired_at Horário em que a transação expirou, em formato ISO8601. Retorna null caso a transação estaja aguardando aprovação ou já tenha sido aprovada em algum momento. String   approved_at Horário em que a transação foi aprovada, em formato ISO8601. Retorna null caso a transação não tenha sido aprovada em nenhum momento. String   approved_by Identificador único da usuária que aprovou a transação, no formato user:UUID4. Retorna null caso não tenha sido aprovada em nenhum momento. String   barcode Código de barras. String   cancelled_at Horário em que um pagamento agendado foi cancelado, em formato ISO8601. Retorna null caso não haja cancelamento. String   created_at Horário em que a transação foi criada, em formato ISO8601. Nesse caso nunca será null. String   created_by Identificador único da usuária que criou a transação, no formato user:UUID4. Neste caso nunca irá retornar null. String    details Detalhes da transferência como nome da instituição, nome do destinatário, documento do beneficiário e nome do beneficiário. Retorna null caso ainda não tenhamos essa informação. Uma outra forma de obter essa informação é realizar uma simulação. Objeto   failed_at Horário em que a transação falhou, em formato ISO8601. Retorna null caso a transação nunca tenha falhado. String   failure_reason_code Código do motivo da falha. String   failure_reason_description Descrição do motivo da falha. String   fee Taxa da transação, em centavos de reais. Integer     finished_at Horário em que a transação foi finalizada, em formato ISO8601. Retorna null caso a transação não tenha sido finalizada. String   id Identificador único da transação, no formato UUID4. String   refunded_at Horário em que a transação foi extornada em caso de falha, em formato ISO8601. Retorna null caso a transação não tenha sido extornada. String   rejected_at Horário em que a transação foi rejeitada, em formato ISO8601. Retorna null caso a transação não tenha sido rejeitada em nenhum momento. String   rejected_by Identificador único da usuária que rejeitou a transação, no formato user:UUID4. Retorna null caso não tenha sido rejeitada em nenhum momento. String   scheduled_to Data do agendamento. Caso não tenha sido agendado retornará null. String   status Status atual do pagamento, podendo ser um dentre os status à seguir: CREATED, REJECTED, EXPIRED, APPROVED, SCHEDULED, FAILED, FINISHED, CANCELLED. String   writable_line Código numérico que acompanha o código de barras. String    ","categories":"","description":"","excerpt":" \n   Chave Descrição Tipo     account_id Identificador da conta. …","ref":"/docs/referencia-da-api/pagamentos/o-objeto-pagamento/","tags":"","title":"O  Objeto Pagamento"},{"body":" Faça a sua primeira movimentação financeira de teste seguindo esses três passos:\n1 - Cadastre-se no Stone Open Bank API;\n2 - Escolha a sua linguagem/ferramenta preferida;\n3 - Crie uma transação.\n1 - Cadastre-se no Stone Open Bank\" ClientID\nObtenha o seu Access Token, enviando um e-mail para nosso time de Parcerias através de parcerias@openbank.stone.com.br. Somente com o Access Token em mãos você consegue realizar as autenticações necessárias para realizar as chamadas na Stone Open Bank API.\nO time de Parcerias do Stone Open Bank irá te enviar um formulário para preenchimento com os dados sobre seu projeto e posteriormente irá gerar um ClientID. Uma vez cadastrado e com o seu ClientID em mãos, você poderá realizar o processo de autenticação da aplicação, que permitirá que obtenha-se o Access Token. Este processo de autenticação  consiste nas seguintes etapas:\nGeração de um token que contenha:\n client_id: identificador enviado pelo time de suporte OpenBank; sub: igual ao client_id; realm: “stone_bank”; aud: https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank ; exp: horário da expiração do token em segundos; nbf: horário da geração do token em segundos.  Obtenção de access e refresh tokens\nUma vez obtido o token, deve-se configurar os seguintes parâmetros e realizar a seguinte chamada:\nPOST https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token content-type x-www-form-urlencoded  client_id: identificador enviado pelo time de suporte OpenBank; grant_type: sempre será client_credentials; client_assertion: token obtido na etapa de geração do token; client_assertion_type: sempre será “urn:ietf:params:oauth:client-assertion-type:jwt-bearer”.  Obtido sucesso, o servidor retornará o access_token e o refresh_token da conta da Aplicação.\nO fluxo acima é um exemplo de como iniciar a sua integração com a Stone Open Bank API.\nPara detalhes sobre o processo de integração, consultar a página Como Integrar com a API.\n 2 - Escolha a sua linguagem A Stone Open Bank disponibiliza sua infraestrutura por meio de uma API RESTful e respostas em JSON.\nTodas as requisições são feitas no endpoint base:\nhttps://sandbox-api.openbank.stone.com.br/api/v1\n 3 - Crie uma TED Depois de se cadastrar, pegar o seu token de teste e escolher a sua linguagem já é possível começar a movimentar a sua conta de teste!\nPara realizar uma movimentação de TED teste, por exemplo, você pode fazer uma chamada na Stone Open Bank API. Pode-se observar um exemplo de chamada teste abaixo:\ncURL curl --request POST \\ --url https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers \\ --header 'Content-Type: application/json' \\ --header 'authorization: Bearer {token}' \\ --data '{\"amount\":3000,\"target\":{\"account\":{\"account_code\":\"654321\",\"branch_code\":\"1234\",\"institution_code\":\"260\"},\"entity\":{\"cpf\":\"05971627007\",\"name\":\"Nome do destinatário\"}},\"account_id\":\"f49a9d13-18dc-4811-b286-edd168a428b2\"}'   Ruby require 'uri' require 'net/http' url = URI(\"https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers\") http = Net::HTTP.new(url.host, url.port) http.use_ssl = true request = Net::HTTP::Post.new(url) request[\"authorization\"] = 'Bearer {token}' request.body = \"{\\\"amount\\\":10050,\\\"target\\\":{\\\"account\\\":{\\\"account_code\\\":\\\"1456879\\\",\\\"branch_code\\\":\\\"0633\\\",\\\"institution_code\\\":\\\"379\\\"},\\\"entity\\\":{\\\"cpf\\\":\\\"67385417752\\\",\\\"name\\\":\\\"Vitoria Silva Correia\\\"}},\\\"account_id\\\":\\\"200568\\\"}\" response = http.request(request) puts response.read_body   JavaScript var data = JSON.stringify({ \"amount\": 10050, \"target\": { \"account\": { \"account_code\": \"1456879\", \"branch_code\": \"0633\", \"institution_code\": \"379\" }, \"entity\": { \"cpf\": \"67385417752\", \"name\": \"Vitoria Silva Correia\" } }, \"account_id\": \"200568\" }); var xhr = new XMLHttpRequest(); xhr.withCredentials = true; xhr.addEventListener(\"readystatechange\", function () { if (this.readyState === this.DONE) { console.log(this.responseText); } }); xhr.open(\"POST\", \"https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers\"); xhr.setRequestHeader(\"authorization\", \"Bearer {token}\"); xhr.send(data);   Python import requests url = \"https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers\" payload = \"{\\\"amount\\\":10050,\\\"target\\\":{\\\"account\\\":{\\\"account_code\\\":\\\"1456879\\\",\\\"branch_code\\\":\\\"0633\\\",\\\"institution_code\\\":\\\"379\\\"},\\\"entity\\\":{\\\"cpf\\\":\\\"67385417752\\\",\\\"name\\\":\\\"Vitoria Silva Correia\\\"}},\\\"account_id\\\":\\\"200568\\\"}\" headers = {'authorization': 'Bearer {token}'} response = requests.request(\"POST\", url, data=payload, headers=headers) print(response.text)   C# var client = new RestClient(\"https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers\"); var request = new RestRequest(Method.POST); request.AddHeader(\"authorization\", \"Bearer {token}\"); request.AddParameter(\"undefined\", \"{\\\"amount\\\":10050,\\\"target\\\":{\\\"account\\\":{\\\"account_code\\\":\\\"1456879\\\",\\\"branch_code\\\":\\\"0633\\\",\\\"institution_code\\\":\\\"379\\\"},\\\"entity\\\":{\\\"cpf\\\":\\\"67385417752\\\",\\\"name\\\":\\\"Vitoria Silva Correia\\\"}},\\\"account_id\\\":\\\"200568\\\"}\", ParameterType.RequestBody); IRestResponse response = client.Execute(request);   Caso queira saber mais sobre as chamadas disponíveis na nossa API, consulte nossos endpoints em API Reference.\n4 - Construindo o seu App Com a resposta gerada pela requisição da TED acima, você poderá elaborar uma tela exibindo as informações da transferência realizada. Por exemplo, para construir a tela abaixo:\nÉ utilizada a requisição citada 3º passo, tendo como resposta o seguinte JSON:\n{ \"amount\": 10050, \"approved_at\": \"2018-10-08T22:13:51Z\", \"approved_by\": \"user:380f9968-8946-4f88-a781-be8b7efc1f90\", \"created_at\": \"2018-10-08T22:13:51Z\", \"created_by\": \"user:380f9968-8946-4f88-a781-be8b7efc1f90\", \"failed_at\": null, \"fee\": 0, \"id\": \"79573d4a-613a-4ac7-8970-39c39fc18e5a\", \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"settled_at\": null, \"target\": { \"account\": { \"account_code\": \"1456879\", \"branch_code\": \"0633\", \"institution_code\": \"379\" }, \"entity\": { \"cpf\": \"67385417752\", \"name\": \"Vitoria Silva Correia\" } } }  Entenda mais sobre a Transfers API e a sua requisição de TED\nDetalhes sobre a Transfers API se encontram na página Transferir para Outros Bancos.\n ","categories":"","description":"","excerpt":" Faça a sua primeira movimentação financeira de teste seguindo esses …","ref":"/docs/guias/stone-openbank-api/quickstart/","tags":"","title":"Quickstart"},{"body":"POST https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts  PATH PARAMS  account_id string\nIdentificador da conta.\n BODY PARAMS  name string\nNome do contato.\ntax_id string\nDocumento do contato (CPF/CNPJ).\nemail string\nE-mail do contato.\nmobile string\nTelefone do contato.\n HEADERS  x-stone-idempotency-key string\nChave de idempotência.\n Response 200 ok content-type: application/json Body\n{ \"bank_accounts\": [], \"email\": \"guilherme.email@stone.com.br\", \"id\": \"222f3745-24ed-4968-929f-a88c168ce582\", \"mobile\": \"21 999999999\", \"name\": \"Guilherme Posse\", \"tax_id\": \"16426334022\" } ","categories":"","description":"","excerpt":"POST …","ref":"/docs/referencia-da-api/contatos/criar-um-contato/","tags":"","title":"Criar Um Contato"},{"body":"Descrição do modelo de contas.\n Em nossa modelagem da conta de pagamentos, temos o conceito de user_id e account_id. Esses conceitos podem ser definidos da seguinte maneira:\n  user_id: se refere ao identificador do perfil do usuário, contendo informações de dados cadastrais, como por exemplo, nome, apelido e CPF.\n  account_id: se refere ao identificador da conta do usuário, contendo dados da conta de pagamento.\n  Essa modelagem foi feita considerando que, antes de um user_id se tornar um account_id, ele passa por um processo de due diligence, que analisa informações de risco desse usuário antes dele ter uma conta de pagamentos Stone.\nAtenção\nTodo o processo de Due Diligence do usuário fica sob responsabilidade da Stone e, se aprovada, será gerado um account_id para o usuário.\n ","categories":"","description":"","excerpt":"Descrição do modelo de contas.\n Em nossa modelagem da conta de …","ref":"/docs/referencia-da-api/dados-da-conta/overview-dados-da-conta/","tags":"","title":"O Que é Uma Conta"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/dry_run/external_transfers  BODY PARAMS  amount int32\nValor da transferência em centavos de Real, ou seja, um real é igual a 100.\n account_id string\nIdentificador da conta.\n target object\n  account object\n  account_code string Número da conta. Padrão: ^\\d+$\n  branch_code string Número da agência. Padrão: ^\\d{1,4}$\n  institution_code string Código ISPB da instituição ou número do banco. Padrão: ^(\\d{8}|\\d{3})$\n    entity object\n  name string Nome da dona da conta alvo.\n  document string Número do documento sem pontos da dona da conta alvo.\n  document_type string Tipo do documento da dona da conta alvo. Pode ser cpf ou cnpj.\n     scheduled_to string\nFormato: yyyy-mm-dd\n HEADERS  x-stone-idempotency-key string\nChave de idempotência.\n Response 202 Accepted content-type: application/json Body\n{ \"amount\":16600, \"approval_expired_at\":null, \"approved_at\":\"2019-06-07T18:57:57Z\", \"approved_by\":\"user:b2b80e9a-7412-47de-b303-2f70f3c8e279\", \"cancelled_at\":null, \"created_at\":\"2019-06-07T18:57:57Z\", \"created_by\":\"user:b2b80e9a-7412-47de-b303-2f70f3c8e279\", \"delayed_to_next_business_day\":false, \"failed_at\":null, \"fee\":0, \"finished_at\":null, \"id\":\"05e2950b-ff0c-4b8f-aa5f-7055bb8bc6f1\", \"refund_reason_code\":null, \"refund_reason_description\":null, \"refunded_at\":null, \"rejected_at\":null, \"rejected_by\":null, \"scheduled_to_effective\":null, \"scheduled_to_requested\":null, \"status\":\"APPROVED\", \"target\":{ \"account\":{ \"account_code\":\"1241441\", \"branch_code\":\"1241\", \"institution_ispb\":\"60701190\", \"institution_name\":\"Itaú Unibanco S.A.\", \"institution_number_code\":\"341\" }, \"entity\":{ \"document\":\"133835162745\", \"document_type\":\"cpf\", \"name\":\"fulano novo\" } } } ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/simulacoes-dry-run/simular-uma-transferencia-externa/","tags":"","title":"Simular uma Transferência Externa"},{"body":" Nesse endpoint será informada a URL de cada uma das fotos enviadas de um usuário.\nEssa chamada deve ser realizada para cada foto que será enviada, por exemplo, na maioria dos casos é solicitada a foto da frente do documento, do verso do documento e de uma selfie com o documento, então esse endpoint, nesse caso, será chamado 3 vezes, cada um com o nome diferenciado do arquivo que será enviado.\nPOST https://sandbox-api.openbank.stone.com.br/api/v1/storage/{{image_name.jpg}} \nHEADERS  authorization* Bearer token\nContent-Type* : image/jpeg\nPATH PARAMS  Nome da imagem que será enviado, no formato .JPG.\nResponse  200 OK { \"public_url\": \"https://storage.googleapis.com/sdb-inside-gateway-frontend-3727/YXBwbGljYXRpb246MDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2Uz/c0ea5f60-3d4c-4fc0-815e-bb62681fdd4b/image_name.jpg\", \"upload_info\": { \"headers\": { \"content-type\": \"image/jpeg\", \"x-goog-acl\": \"public-read\" }, \"url\": \"https://storage.googleapis.com/sdb-inside-gateway-frontend-3727/YXBwbGljYXRpb246MDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2Uz/c0ea5f60-3d4c-4fc0-815e-bb62681fdd4b/image_name.jpg?Expires=1622485791\u0026GoogleAccessId=sdb-inside-gateway-c914%40inside-gateway-724c.iam.gserviceaccount.com\u0026Signature=Yy3xZLRyo95oRIVfNWz3J55Cs8YfiRinx0CCY%2BVQtm3PcU%2B2u2eHiSF8yIzO7sRWaHdZ9r6t8j964fS2J3mrbQOvUn68yrW4mVv1%2FQSr1J0kgQ%2B2fIq8JoHw%2BTlwe%2Fbt%2FufKwAq1Y2Kvcsi%2FKO%2BIMyqL8KwwmmcC%2F5oetCfnYg%2BJq2jty01ULuuG6UWvsxiSVjfNNRnOTqQBQ4Ws6r62YoK0xC5A2GrNnACfN4R5%2BKbv4VXoKLKYQ0pGZF3MPHFcbJW4y59XOmIFJP%2F00Xjw8SreELGtk0iCQoIMxU8pEEZQALAIpesTquKGzNqqAgL5RNc46sh6%2BjtNbrwBnhM1vQ%3D%3D\" } } \nA resposta do campo public_url deverá ser enviado no endpoint de enviar os dados de um usuário.\nO campo url deverá ser usado no endpoint para enviar de fato a imagem, no endpoint enviar fotos. Esse campo contém as Query Params desse endpoint.\nPróximo passo:\nEnviar fotos. ","categories":"","description":"","excerpt":" Nesse endpoint será informada a URL de cada uma das fotos enviadas de …","ref":"/docs/referencia-da-api/kyc/consultar-url-para-foto/","tags":"","title":"Consultar URL para envio da foto"},{"body":" Abaixo vamos trazer os campos de cada tipo de transferência.\nTransferência Interna:    Chave Descrição Tipo     id Identificador único da transação, no formato UUID4. String   amount Valor da transação, em centavos de Reais. Integer   fee Taxa da transação, em centavos de Reais. Integer   target Objeto com os dados de conta destino. Veja abaixo seus campos. Object   created_at Horário em que a transação foi criada, em formato ISO8601. Nesse caso nunca será null. String   approved_at Horário em que a transação foi aprovada, em formato ISO8601. Retorna null caso a transação não tenha sido aprovada em nenhum momento. String   rejected_at Horário em que a transação foi rejeitada, em formato ISO8601. Retorna null caso a transação não tenha sido rejeitada em nenhum momento. String   failed_at Horário em que a transação falhou, em formato ISO8601. Retorna null caso a transação nunca tenha falhado. String   failure_reason_code Código do motivo da falha. String   failure_reason_description Descrição do motivo da falha. String   status Status atual da transação, podendo ser um dentre os status à seguir: CREATED, REJECTED, EXPIRED, APPROVED, SCHEDULED, FAILED, FINISHED, CANCELLED. String   description Descrição que foi adicionada durante a criação da transação. Retornará \"\" caso não tenha sido preenchido. Campo com tamanho máximo de 140 caracteres. String   approved_by Identificador único do usuário que aprovou a transação, no formato user:UUID4. Retorna null caso não tenha sido aprovada em nenhum momento. String   created_by Identificador único do usuário que criou a transação, no formato user:UUID4. Neste caso nunca irá retornar null. String   rejected_by Identificador único do usuário que rejeitou a transação, no formato user:UUID4. Retorna null caso não tenha sido rejeitada em nenhum momento. String   approval_expired_at Horário em que a transação expirou, em formato ISO8601. Retorna null caso a transação esteja aguardando aprovação ou já tenha sido aprovada em algum momento. String   cancelled_at Horário em que um pagamento agendado foi cancelado, em formato ISO8601. Retorna null caso não haja cancelamento. String   finished_at Horário em que a transação foi finalizada, em formato ISO8601. Retorna null caso a transação não tenha sido finalizada. String   scheduled_to Data na qual a transferência será executada. Retornará null caso não haja agendamento. String    Transferência Externa:    Chave Descrição Tipo     id Identificador único da transação, no formato UUID4. String   amount Valor da transação, em centavos de Reais. Integer   fee Taxa da transação, em centavos de Reais. Integer   target Objeto com os dados de conta destino. Veja abaixo seus campos. Veja seus campos aqui Object   created_at Horário em que a transação foi criada, em formato ISO8601. Nesse caso nunca será null. String   approved_at Horário em que a transação foi aprovada, em formato ISO8601. Retorna null caso a transação não tenha sido aprovada em nenhum momento. String   rejected_at Horário em que a transação foi rejeitada, em formato ISO8601. Retorna null caso a transação não tenha sido rejeitada em nenhum momento. String   failed_at Horário em que a transação falhou, em formato ISO8601. Retorna null caso a transação nunca tenha falhado. String   failure_reason_code Código do motivo da falha. String   failure_reason_description Descrição do motivo da falha. String   status Status atual da transação, podendo ser um dentre os status à seguir: CREATED, REJECTED, EXPIRED, APPROVED, SCHEDULED, FAILED, FINISHED, CANCELLED. String   approved_by Identificador único do usuário que aprovou a transação, no formato user:UUID4. Retorna null caso não tenha sido aprovada em nenhum momento. String   created_by Identificador único do usuário que criou a transação, no formato user:UUID4. Neste caso nunca irá retornar null. String   rejected_by Identificador único do usuário que rejeitou a transação, no formato user:UUID4. Retorna null caso não tenha sido rejeitada em nenhum momento. String   approval_expired_at Horário em que a transação expirou, em formato ISO8601. Retorna null caso a transação esteja aguardando aprovação ou já tenha sido aprovada em algum momento. String   cancelled_at Horário em que um pagamento agendado foi cancelado, em formato ISO8601. Retorna null caso não haja cancelamento. String   finished_at Horário em que a transação foi finalizada, em formato ISO8601. Retorna null caso a transação não tenha sido finalizada. String   delayed_to_next_business_day Caso a transação seja feita fora do horário, será agendada para o póximo dia útil. Caso esse agendamento ocorra, retorna true, caso contrário, retorna false. Boolean   refund_reason_code Código do reembolso. Retorna null caso não haja reembolso. String   refund_reason_description Descrição do motivo do reembolso. Retorna null caso não haja reembolso. String   scheduled_to_effective Data na qual a TED será executada. Pode divergir da data solicitada quando esta for um dia não útil. Retornará null caso não haja agendamento. String   scheduled_to_requested Data para a qual o agendamento da TED foi solicitado. Retornará null caso não haja agendamento. String    Campos do objeto target:    Chave Descrição Tipo     account Objeto que representa a conta destino da transferência. Veja os campos desse objeto abaixo. Object   entity Objeto que contem os dados do indivíduo ou companhia responsável pela conta. Veja os campos desse objeto abaixo. Object    Campos do objeto account:    Chave Descrição Tipo     account_code Número da conta bancária. String   branch_code NNúmero da agência da conta. Apenas para transferência externa. String   institution_ispb Código ISPB da instituição responsável pela conta. Existe uma lista completa relacionando as instituições e seus respectivos códigos neste link. Apenas para transferência externa. String   institution_name Nome da instituição responsável pela conta. Apenas para transferência externa. String   institution_number_code Código numérico da instituição responsável pela conta.Apenas para transferência externa. String   account_type Código que identifica o tipo de conta. Os valores possíveis são:\nCC - Conta Corrente, CD - Conta de Depósito, CG - Conta garantida, CI - Conta de Investimento, PG - Conta de Pagamento, PP - Poupança. Apenas para transferência externa. String    Campos do objeto entity:    Chave Descrição Tipo     name Nome do proprietário da conta. String   document Número do documento sem pontos da dona da conta alvo. Apenas para transferência externa. String   document_type Tipo do documento da dona da conta alvo. Pode ser cpf ou cnpj. Utilizamos esse valor para distinguir o tipo de entidade da proprietária da conta entre pessoa física e pessoa jurídica. Apenas para transferência externa. String    A criação de transferências internas e externas estão sujeitas a um limite de \"amount\": 999999999999999999. Observe que o usuário não é limitado de nenhuma forma prática por esse valor.\n ","categories":"","description":"","excerpt":" Abaixo vamos trazer os campos de cada tipo de transferência. …","ref":"/docs/referencia-da-api/transferencias/o-objeto-transferencia/","tags":"","title":"O Objeto Transferência"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/pix/outbound_pix_payments/{id}/actions/confirm \nNa confirmação, o body pode conter opcionalmente os campos amount e description, caso eles não tenham sido preenchidos na criação.\nCONSIDERAÇÕES IMPORTANTES\n O campo {id} informado na URL é obrigatório e deve ser o valor do identificador do Pix criado. Ele é retornado pelo endpoint /api/v1/pix/outbound_pix_payments\n O campo amount se torna obrigatório caso este não tenha sido informado na criação do Pix através do endpoint /api/v1/pix/outbound_pix_payments. Caso este tenha sido informado, a presença dele se torna opcional.   HEADERS  authorization* string\nx-stone-idempotency-key* string Chave de idempotência\nExemplo:\n{ \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"24b53d84-a79d-11eb-bcbc-0242ac130003\" } \nPARAMETERS REQUEST  id* string\nBODY REQUEST  amount integer Valor a ser transferido\ndescription string Descrição do pagamento\nBody:\n{ \"amount\": 39511, \"description\": \"some description\" } \nResponses 204 OK ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/pix/confirmar-pagamento-pendente/","tags":"","title":"Confirmar um pagamento pendente"},{"body":" Fluxo da recarga    Para efetuar a recarga de créditos para um jogo é necessário que o cliente selecione e escolha o plano/valor.\n  Após a confirmação da recarga para um jogo, retornamos o código PIN ao cliente.\n  Com o código PIN em mãos, o cliente acessa o site/app do provedor e resgata os créditos obtidos.\n  Provedores disponíveis   Blizzard; GG Credits Free Fire; HABBO; League of Legends; PS Plus; PSN Store; Rixty; STEAM; Xbox Live; Xbox Live (CSV).  Atenção\nOs valores oferecidos para a recarga não são flexíveis e variam de acordo com a operadora.\n Horário de funcionamento A liquidação é executada no provedor em questões de segundos. O resgate dos créditos é feito ao informar o Código PIN retornado após a confirmação da recarga.  Ações a serem executadas para recarga de Jogos  1) Listar todos os provedores de Jogos GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/games/providers Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Response 200 ok { \"providers\": [ { \"name\": \"GG Credits Free Fire\", \"id\": 2151 }, { \"name\": \"LEVEL UP\", \"id\": 2096 }, { \"name\": \"PSN Store\", \"id\": 2147 }, { \"name\": \"PS Plus\", \"id\": 2148 }, { \"name\": \"Xbox Live Gold\", \"id\": 2125 }, { \"name\": \"Xbox Live (CSV)\", \"id\": 2149 } ] } \n2) Listar todos os valores para o provedor GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/games/values/{provider-id} Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Responses 200 ok - Name: GG Credits Free Fire / id: 2151\n{ \"product\": [ { \"value\": 3000 }, { \"value\": 5000 }, { \"value\": 15000 } ] } - Name: LEVEL UP / id: 2096\n{ \"product\": [ { \"product_name\": \"LEVELUP 20\", \"value\": 2000 }, { \"product_name\": \"LEVELUP 40\", \"value\": 4000 } ] } …\n3) Simular uma recarga de Jogos POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/games/dry-run Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 500, \"provider_id\": \"2149\" } Response 202 Accepted { \"amount\": 500, \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"provider_id\": \"2149\" } \n4) Executar uma recarga de Jogos POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/games Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\", \"x-stone-challenge-solution\": \"81080d67-aac9-415b-868f-4403243201d3\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 500, \"provider_id\": \"2149\" } Response 200 ok { \"id\": \"eee1466a-458a-4afa-87ec-6a52fc3ff331\", \"receipt\": \" PROTOCOLO 0002751870\\n1 06/04/2021 14:42\\nTERM 228005 AGENTE 228005 AUTE 04926\\n----------------------------------------\\nAUTO 978079 \\n\u003cVIA1\u003e\\nESTE CUPOM NAO TEM VALOR FISCAL\\nPRODUTO: XBOX LIVE (CSV)\\nVALOR: R$ 5,00\\nPIN: 6365-4427-6400-1327\\nSERIE: 00000000\\n\\nCOMO RESGATAR O CODIGO XBOX:\\nVISITE XBOX.COM/REDEEMCODE\\nDIGITE O CODIGO DESTE RECIBO E COMECE A \\nUSAR!\\n\\nAPOS O USO, INUTILIZE ESTE CUPOM\\nIS2B - INTEGRATED SOLUTIONS TO BUSINESS\\n\\n\\n\\n\\n\u003c/VIA1\u003e----------------------------------------\\n\\n\", \"transaction_id\": \"58a3e84d-c33c-4681-bd41-855c56f27eb9\", \"pin\": \"6365-4427-6400-1327\" } \nStatus_code: 403 Caso receba como resposta o status_code: 403, clique aqui para ter acesso ao fluxo de autorização do challenge que deverá ser enviado no Header do Request (x-stone-challenge-solution).  ","categories":"","description":"","excerpt":" Fluxo da recarga    Para efetuar a recarga de créditos para um jogo é …","ref":"/docs/referencia-da-api/recargas/recarga-de-jogos/","tags":"","title":"Recarga para Jogos"},{"body":" SDK de integração para Android.\nA Conta Stone SDK é responsável por todo o fluxo de login e Know Your Customer da Stone Openbank API.\nContato  Se durante a integração encontrar algum problema ou ponto de melhoria entre em contato com a gente através do Azendoo.\nComo funciona  A Conta Stone SDK é o ponto de entrada para acesso às nossas SDKs de autenticação, aprovação e verificação de KYC (Know your constumer).\n  A SDK de autenticação é responsável por executar todo o processo de autenticação seguindo as diretrizes do oAuth2.\n  A SDK de aprovação é responsável pelo processo de aprovação e rejeição de transações.\n  A SDK de KYC é responsável por capturar as informações do usuário que está realizando cadastro na conta.\n  Como Integrar com a Conta Stone SDk  Antes de começar a integração é necessário obter uma chave de acesso ao repositório, pois trata-se de um repositório privado. Para obter esta chave entre em contato com a gente.\nNo arquivo build.gradle do projeto adicione a URL do repositório e substitua o {access-key} pela chave fornecida.\nmaven { url \"https://packagecloud.io/priv/${access-key}/Stone/stoneid/maven2\"} Também é preciso adicionar o Jetpack, pois usamos algumas libs que estão disponíveis neste repositório.\nmaven { url 'https://jitpack.io' } Importe a dependência da Conta Stone SDK.\nimplementation 'co.stone:conta:${latest_version}' A Conta Stone SDK utiliza o Firebase para implementar alguns de seus serviços, logo é necessário ter um projeto no firebase e integrá-lo no seu app. Para mais informações sobre como adicionar o Firebase ao seu projeto acesse este link.\nSincronize o projeto e pronto, já é possível utilizar a Conta Stone SDK!\nInicializando a SDK  Uma vez que a dependência foi importada o passo seguinte da integração é inicializar a SDK no seu app, para isso é necessário especificar os parâmetros abaixo.\nprivate val environment = Environment.Sandbox ContaStone.initialize( application = application, environment = environment, appInfo = AppInfo( name = \"Conta Stone Sample App\", applicationId = BuildConfig.APPLICATION_ID, buildId = BuildConfig.BUILD_TYPE, version = BuildConfig.VERSION_NAME ), authFlowUIConfig = AuthFlowUIConfig(themeId = R.style.Theme_ContaStoneSdkSample), clientId = \"myapp@example.com.br\", deepLinkUris = DeepLinkUris( uriLogout = \"sample://uri.logout\", uriChat = \"sample://uri.chat\", uriDashboard = \"sample//uri.dashboard\", uriHelp = \"sample://uri.help\", uriKyc = \"sample://uri.kyc\", uriUpdateApp = \"sample://uri.update.app\" ), httpClientConfig = HttpClientConfig(), logger = InternalLogger(), tokenKeyMasterUri = URI(\"android-keystore://stone-mobile\") )   application: Trata-se da instância do Application do seu app.\n  environment: Existem 3 ambientes para os quais a sdk pode apontar: Homolog, Sandbox e Production para fins de teste use o Environment.Sandbox.\n  appInfo: Informações referentes ao app como nome, versão e buildId.\n  client_id: Identificador fornecido pelo time de suporte OpenBank.\n  authFlowUIConfig: Com esta configuração é possível passar o tema da sua aplicação para a SDK, assim as cores principais do estilo do seu app serão aplicadas nas telas internas da SDK.\n  httpClientConfig: Trata-se de configurações HTTP customizadas do cliente, como interceptors, connectionTimeoutMs, readTimeoutMs, writeTimeoutMs e networkInterceptors.\n  tokenKeyMasterUri: Uma URI para a chave mestra no formato android-keystore://. Essa chave será utilizada para acessar o Keystore do android e salvar o token do usuário de forma segura.\n  deepLinkUris: Uris usadas para fazer a navegação para Activities externas a sdk. Exemplo, a uriLogout se refere a Activity que o usuário deve ser redirecionada depois que ele for deslogada do app, essa navegação é feita por deeplink.\n  Iniciando fluxo de Autenticação e verificação de KYC  Para iniciar o fluxo de autenticação e verificação de KYC é necessário chamar o método abaixo.\ncontaStoneSdk.startAuthAndVerificationFlowForResult( context = this, params = VerificationParams( launchMode = VerificationLaunchMode.StartingApp, authMode = AuthFlowMode.RegisteredUser ), requestCode = LOGIN_RC ) O atributo params recebe dois argumentos: O modo de inicialização, o qual define como que o fluxo deve ser iniciado e o authMode que neste caso sempre vai ser AuthFlowMode.RegisteredUser. O modo de inicialização pode ser:\n  StartingApp - Inicia todo o fluxo de autenticação e check de KYC.\n  AccountSelectionRequest - Exibe a tela de troca de conta e lida com a escolha do usuário nos casos em que o usuário em questão possui mais de uma conta de pagamento.\n  PushNotificationReceived - Deve ser iniciado ao receber um push notification referente ao processo de abertura de conta.\n  NewAccountCreated - Deve ser chamado após a criação de uma nova conta de pagamento para que seja verificado se esta conta não possui nenhuma pendência em seu cadastro.\n  Este método inicia a Activity principal da SDK e executa os fluxos internos de autenticação e verificação de KYC. Quando o processo é finalizado a Conta Stone SDK retorna um Result através do onActivityResult da Activity que deve ser tratado pelo app.\nLidando com o resultado da SDK  Ao finalizar o fluxo de autenticação e verificação a SDK emite um resultado para o app informando o desfecho do fluxo. Segue abaixo um exemplo de como tratar o resultado emitido pela Conta Stone SDK e o que cada um significa.\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) { super.onActivityResult(requestCode, resultCode, data) if (requestCode == LOGIN_RC) { val result = contaStoneSdk.parseAuthAndVerificationResult(data) when (result) { is AuthAndVerificationResult.Ok -\u003e toast(\"User is authenticated\") is AuthAndVerificationResult.MissingData -\u003e toast(\"some information is missing\") is AuthAndVerificationResult.UserCancelled -\u003e toast(\"User cancelled flow\") is AuthAndVerificationResult.Error -\u003e toast(\"Error during login ${result.error}\") is AuthAndVerificationResult.UserLoggedOut -\u003e toast(\"User requests logout\") is AuthAndVerificationResult.BlockedUser -\u003e toast(\"User is blocked\") } } } } \nComo fazer logout  Para deslogar o usuário podemos fazer uma chamada para o método de logout seguindo o exemplo abaixo.\ncontaStoneSdk.logout { if (it != null) { toast(\"Error on logout. Try again!\") } else toast(\"user successfully logged out\") } Quando a exception é nula o logout ocorreu com sucesso, quando não, algum erro ocorreu durante o fluxo.\nObtendo o Client autenticado  A authSDK é responsável por todo o processo de autenticação incluindo a adição do token no header das chamadas para a API do Stone Openbank. Para isso a SDK fornece um OkHttpClient configurado que pode ser utilizado nas chamadas HTTP do seu app. Este client possui certificate pinning com os certificados da API do Stone OpenBank e é possível acessá-lo chamando o método contaStone.auth().client().\nprivate fun performAuthenticatedRequest() { val httpService = HttpService.BankingGatewaySandbox val client = contaStoneSdk.auth().getOkHttpClient(httpService) val request = Request.Builder() .url(\"${httpService.url}/api/v1/institutions\") .get() .build() val callback = object : Callback { override fun onFailure(call: Call, e: IOException) { runOnMainThread { toast(\"Error fetching institutions $e\") } } override fun onResponse(call: Call, response: Response) { runOnMainThread { toast(\"Request executed successfully\") } } } client.newCall(request).enqueue(callback) } \nComo inicializar o Aprovador  Para conseguir iniciar o aprovador é necessário fazer a chamada conforme o exemplo abaixo:\ncontaStoneSdk.startApproverForResult( source = this, requestCode = APPROVER_RQ, params = ApproverParams(loggedAccount, ApproverLaunchMode.SDKLaunchMode) ) Para recuperar o loggedAccount a Conta Stone SDK disponibiliza a sessão do usuário logado com todas as informações que o LoggedAccount precisa:\ncontaStoneSdk.getSession( onComplete = { result -\u003e when (result) { is SessionResult.Success -\u003e { currentAccount?.paymentAccount?.let { LoggedAccountInfo( id = it.id, accountNumber = it.accountCode, accountOwner = currentAccount?.owner?.name.orEmpty(), accountOwnerDocument = currentAccount?.owner?.document.orEmpty(), bankName = \"Stone Pagamentos S.A\", bankNumber = \"197\", branchNumber = \"0001\", userLoggedName = profile.fullName ) } } is SessionResult.HasNoActiveSession -\u003e redirectToLogin() } }, onError = { toast(\"Error trying to get session\") } ) ","categories":"","description":"","excerpt":" SDK de integração para Android.\nA Conta Stone SDK é responsável por …","ref":"/docs/referencia-da-api/conta-stone-sdk/sdk-sample-android/","tags":"","title":"Sample Android"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/payment_links/{account_id}/orders \nResponse { \"data\": [{ \"amount\": 1000, \"closed\": true, \"closed_at\": \"2020-05-15T18:54:35Z\", \"code\": \"Y0PNSR8FOK\", \"created_at\": \"2020-05-15T02:06:14Z\", \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-07T23:33:15Z\", \"delinquent\": false, \"document\": 12345678912, \"email\": \"gabrieltavares@email.com\", \"id\": \"cus_WVbg8Qkc0WIelO4k\", \"name\": \"Gabriel Tavares\", \"phones\": { \"mobile_phone\": { \"area_code\": 11, \"country_code\": 55, \"number\": 987654321 } }, \"updated_at\": \"2020-05-15T02:02:24Z\" }, \"id\": \"or_djKAl9dacPfB7gBR\", \"items\": [{ \"amount\": 1000, \"created_at\": \"2020-05-15T02:06:14Z\", \"description\": \"Camisa de malha 100% algodão - Tamanho G - Branca\", \"id\": \"oi_BQWg5P2FLTlGn97z\", \"quantity\": 1, \"status\": \"active\", \"type\": \"product\", \"updated_at\": \"2020-05-15T02:06:14Z\" }], \"status\": \"canceled\", \"updated_at\": \"2020-05-15T18:54:35Z\" }, { \"amount\": 1000, \"closed\": false, \"code\": \"18E1H2I09N\", \"created_at\": \"2020-05-15T02:04:47Z\", \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-07T23:33:15Z\", \"delinquent\": false, \"document\": \"09876543201\", \"email\": \"gabriella@gmail.com\", \"id\": \"cus_WVbg8Qkc0WIelO4k\", \"name\": \"Gabriella Pires\", \"phones\": { \"mobile_phone\": { \"area_code\": 21, \"country_code\": 55, \"number\": 912345678 } }, \"updated_at\": \"2020-05-15T02:02:24Z\" }, \"id\": \"or_p3EGP2LCdrcvYjq6\", \"items\": [{ \"amount\": 1000, \"created_at\": \"2020-05-15T02:04:47Z\", \"description\": \"Camisa de malha 100% algodão - Tamanho G - Verde\", \"id\": \"oi_2X7MD4LFN8sjDE4J\", \"quantity\": 1, \"status\": \"active\", \"type\": \"product\", \"updated_at\": \"2020-05-15T02:04:47Z\" }], \"status\": \"pending\", \"updated_at\": \"2020-05-15T02:04:47Z\" } ], \"paging\": { \"next\": \"https://api.mundipagg.com/core/v1/orders?page=2\u0026amp;size=10\u0026amp;navigation=True\", \"total\": 2 } } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/link-de-pagamentos/listar-links-de-pagamento-da-conta/","tags":"","title":"Listar Links de Pagamentos da Conta"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/guias/integracao/","tags":"","title":"INTEGRAÇÃO"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/institutions/code \nPATH PARAMS  code string\nCódigo da Instituição\nExample: 197\n\nResponse  201 Created content-type: application/json \nBody\n{ \"ispb_code\": \"16501555\", \"name\": \"Stone Pagamentos S.A.\", \"number_code\": \"197\", \"short_name\": \"STONE PAGAMENTOS S.A.\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/instituicoes/retornar-uma-instituicao/","tags":"","title":"Retornar Uma Instituição"},{"body":" Representação de datas e horários.\n Todas as datas com horário seguem o padrão ISO8601 Extended Format, em UTC com anotação do offset. Ex: 2018-11-06T22:10:00Z Todas as datas sem horário estão no mesmo padrão. Ex: 2018-11-06  Para evitar problemas, sempre mandamos as datas em UTC e anotamos essa informação na string codificada.\nUTC (Coordinated Universal Time), como o próprio nome diz, é coordenado internacionalmente. O horário de Brasília é atrasado 3 horas em relação a esse horário. Tenha isso em mente sempre que for gerar um token ou fazer algum agendamento!\n ","categories":"","description":"","excerpt":" Representação de datas e horários.\n Todas as datas com horário seguem …","ref":"/docs/referencia-da-api/padroes-da-api/data-e-hora/","tags":"","title":"Data e Hora"},{"body":" Válidas para todos os tipos de boleto     Regras Todos os tipos     Registro O registro de boletos é automático e feito em até alguns poucos minutos após sua emissão.   Baixa final Um boleto não pago sofrerá baixa automática sete dias após sua data limite.   Baixa por pagamento Ao ser pago o boleto sofrerá baixa automática, impedindo novos pagamentos desse mesmo documento.   Baixa solicitada Quando o amissor solicita a baixa de um boleto que ainda não foi pago e não chegou a data limite.   Data de vencimento Precisa ser igual ou maior que o dia atual e igual ou menor do que a limit_date. Caso seja um dia não útil o pagamento poderá ser feito até o próximo dia útil.   Formato / Layout Hoje os dados do boleto são devolvidos no formato PDF através de um link.    Variáveis por tipo de boleto     Regras Depósito Proposta Cobrança (todos os tipos)     Disponível para Todas as contas de pagamento da base. Todas as contas de pagamento da base. É necessário sinalizar na integração para habilitação desse tipo para a conta pagamento.   Data limite\n(limit_date) Sempre deve ser igual a data de vencimento, podendo ser até 365 dias após a data de emissão. Caso seja um dia não útil o pagamento poderá ser feito até o próximo dia útil.\nCaso seja informada alguma data diferente da vencimento retornará erro. Caso não seja informada será configurada automaticamente a data de vencimento. Deve ser igual ou maior a data de vencimento.\nCaso não seja informada será configurada automaticamente a data de vencimento. Deve ser igual ou maior a data de vencimento.\nCaso não seja informada será configurada automaticamente a data de vencimento.   Pagamento Não obrigatório Não obrigatório Obrigatório   Pagador\n(customer) Sempre deve ser igual ao beneficiário.\nCaso seja informado algum dado diferente do beneficiário será ignorado.\nCaso não seja informado será configurado automaticamente com dados do beneficiário. Pode ser diferente do beneficiário.\nObrigatório o envio do objeto. Pode ser diferente do beneficiário.\nObrigatório o envio do objeto.   Valor\n(amount) Valor Min de R$ 20,00 e valor Max: R$ 10.000,00. Valor Min de R$ 20,00 e valor Max: R$ 10.000,00. Valor Min de R$ 20,00 e valor Max: R$ 10.000,00.   Juros\n(interest) Não suporta Não suporta Juros deve ser maior que 0% e até 1% ao mês.\nO valor é aplicado por dia levando em conta o valor proporcional dado o juros mensal. Ex: 1% ao mês, seria 0,033% ao dia.\nO juros passam a contar a partir da data informada. Essa data tem que ser maior que o vencimento e menor que data limite. Caso nenhuma data seja informada serão aplicados a patir do dia seguinte ao vencimento.\nNos casos em que a data de vencimento cai em um dia não últil ela é automaticamente estendida para o próximo dia útil e os juros só passam a ser aplicados depois dessa data.\nCampo não obrigatório, só preencher se for aplicar juros.   Multa\n(fine) Não suporta Não suporta Multa deve ser maior que 0% e até 2% do valor do boleto.\nA multa é cobrada uma única vez.\nA multa passa a contar a partir da data informada. Essa data tem que ser maior que o vencimento e menor que data limite.\nCaso nenhuma data seja informada será aplicada a patir do dia seguinte ao vencimento.\nNos casos em que a data de vencimento cai em um dia não últil ela é automaticamente estendida para o próximo dia útil e a multa só passará a ser aplicada depois dessa data.\nCampo não obrigatório, só preencher se for aplicar multa.   Desconto\n(discount) Não suporta Não suporta Desconto deve ser maior que 0% e até 90%.\nO desconto se aplica caso o pagameto seja feito até a data informada. A data informada deve ser menor do que a data de vencimento do boleto e maior que sua data de emissão.\nCampo não obrigatório, só preencher se for aplicar desconto.   Múltiplos descontos Não suporta Não suporta É possível aplicar até 3 descontos a um boleto onde cada um terá sua data até a qual o desconto é válido.   Sacador avalista\n(receiver) Não suporta Quando um boleto é emitido em uma conta, mas o comprador final reconhece a compra em nome de outra empresa é possível usar o campo sacador avalista para apresentar o nome dessa empresa no boleto.\nO beneficiário final não muda, ou seja, o valor do boleto será liquidado para a conta que o emitiu.\nFuncionalidade comumente usada por subadquirentes. Quando um boleto é emitido em uma conta, mas o comprador final reconhece a compra em nome de outra empresa é possível usar o campo sacador avalista para apresentar o nome da empresa que o comprador reconhe no boleto.\nO beneficiário final não muda, ou seja, o valor do boleto será liquidado para a conta que o emitiu.\nFuncionalidade comumente usada por subadquirentes.     Atenção\nDesconto em boleto não é valido para pagamentos realizados no final de semana.\n ","categories":"","description":"","excerpt":" Válidas para todos os tipos de boleto     Regras Todos os tipos …","ref":"/docs/referencia-da-api/emissao-de-boletos/regras-de-negocio/","tags":"","title":"Regras de negócio"},{"body":" O Dry Run de pagamentos retorna, além do Objeto Pagamento em si, os Objetos Barcode Details e Details.\nComo complemento, descrevemos os possíveis resultados para o campo document_payment_type.\nObjeto Barcode Details  O Objeto Barcode Details é composto por meio da extração das informações contidas no código de barras informado, dispondo-as nos seguintes campos:\n   Chave Descrição Tipo     bank_code Código numérico da instituição que emitiu o documento. String   bank_name Nome da instituição que emitiu o documento. String   barcode Código de barras. String   expiration_date Data de vencimento. String   face_value Valor com o qual o documento foi criado e que consta do código de barras. Integer   writable_line Código numérico que acompanha o código de barras. String    Objeto Details  O Objeto Details traz informações do status atual desse documento segundo sua fonte emissora, como juros, multas, horário limite de pagamento, entre outras. Veja todas as informações retornadas abaixo.\n   Chave Descrição Tipo     bank_name Nome da instituição que emitiu o documento. String   barcode Código de barras. String   discount_value Valor do desconto que está sendo aplicado ao boleto. Caso nenhum desconto esteja sendo aplicado vira null. Integer   document_payment_type Informa o código referente a título. Integer   document_type Informa o tipo de documento. Valores possíveis são: boleto e concessionaria. String   expiration_date Data de vencimento String   face_value Valor com o qual o documento foi criado e que consta do código de barras. Integer   fine_value Valor da multa que está sendo aplicada ao boleto. Caso nenhuma multa esteja sendo aplicada vira null. Integer   interest_value Valor dos juros que estão sendo aplicados ao boleto. Caso não haja juros aplicados vira null. Integer   max_value Valor máximo que será aceito no pagamento deste documento. Integer   min_value Valor mínimo que será aceito no pagamento deste documento. Integer   payer_cpf_cnpj Número do documento do pagador sem pontos. String   payer_legal_name É o nome que identifica o pagador para fins legais, administrativos e outros fins oficiais. String   payer_trade_name Nome fantasia do pagador. String   payment_end_time Horário até o qual o pagamento é possível em um dia útil. Respeita o payment_limit_date. Formato hh:mm:ss. String   payment_limit_date Data limite para pagamento do documento. Formato ISO8601 “YYYY-MM-DD”. String   payment_start_time Horário a partir do qual o pagamento é possível em um dia útil. Respeita o payment_limit_date. Formato hh:mm:ss. String   recipient_cpf_cnpj Número do documento do beneficiário sem pontos. String   recipient_name Nome do beneficiário. String   settlement_date Data em que o dinheiro do pagamento do boleto é depositado na conta do beneficiário. Formato ISO8601 “YYYY-MM-DDThh:mm:ssZ”. Caso o boleto ainda não tenha sido pago voltará null. String   status Status atual do documento na sua instituição emissora. Valores possíveis: payable, paid ou unpayable. String   total_added_value Total que foi adicionado ao valor original do documento decorrente de juros e multas. Integer   total_discounted_value Total que foi abatido do valor originial do documento decorrente de descontos. Integer   updatable_value Indica se é permitido alterar o valor do documento. Só disponível para document_type com valor concessionaria. Boolean   value Valor atualizado já com descontos, multas e juros que se aplicam. Integer   writable_line Código numérico que acompanha o código de barras. String   unpayable_reason_code Código que representa o motivo de estar impagável. String   unpayable_reason_description Descrição do motivo de estar impagável. String    Document_payment_type     Domínio Descrição     1 CH Cheque.   2 DM Duplicata Mercantil.   3 DMI Duplicata Mercantil Indicação.   4 DS Duplicata de Serviço.   5 DSI Duplicata de Serviço Indicação.   6 DR Duplicata Rural.   7 LC Letra de Câmbio.   8 NCC Nota de Crédito Comercial.   9 NCE Nota de Crédito Exportação.   10 NCI Nota de Crédito Industrial.   11 NCR Nota de Crédito Rural.   12 NP Nota Promissória.   13 NPR Nota Promissória Rural.   14 TM Triplicata Mercantil.   15 TS Triplicata de Serviço.   16 NS Nota de Seguro.   17 RC Recibo.   18 FAT Bloqueio.   19 ND Nota de Débito.   20 AP Apólice de Seguro.   21 ME Mensalidade Escolar.   22 PC Parcela de Consórcio.   23 NF Nota Fiscal.   24 DD Documento de Dívida.   25 Cédula de Produto Rural.   26 Warrant.   27 Dívida Ativa de Estado.   28 Dívida Ativa do Município.   29 Dívida Ativa da União.   30 Encargos Condominiais.   31 Cartão de Crédito.   32 Boleto Proposta.   33 Boleto de Depósito e Aporte.   99 Outros.    ","categories":"","description":"","excerpt":" O Dry Run de pagamentos retorna, além do Objeto Pagamento em si, os …","ref":"/docs/referencia-da-api/simulacoes-dry-run/objetos-simulacao-de-pagamento/","tags":"","title":"Objetos da Simulação de Pagamento"},{"body":" A API pode ser utilizada através de dois ambientes completamente separados: usuários criados em ambiente de Sandbox não existem em Produção, e vice-versa.\nAmbiente de Sandbox É destinado à testes e pode ser acessado pelo endpoint https://sandbox-api.openbank.stone.com.br.\nAmbiente de Produção É onde ocorrem transações em contas reais e pode ser acessado pelo endpoint https://api.openbank.stone.com.br.\nAtenção\nNós não liberamos o acesso para Produção antes de realizar testes em Sandbox para garantir a confiabilidade da integração.\n ","categories":"","description":"","excerpt":" A API pode ser utilizada através de dois ambientes completamente …","ref":"/docs/guias/stone-openbank-api/ambientes-da-api/","tags":"","title":"Ambientes da API"},{"body":" Aplicativos são desenvolvidos pela própria Stone ou por parceiros, e oferecem soluções de gestão da conta de pagamento, mais ou menos específicas. A Stone possui um web app e aplicativos mobile, para iOS e Android, que permitem a gestão da Conta Stone. Esses aplicativos usam as mesmas APIs e métodos de autenticação que os Aplicativos de Parceiros.\nAplicativos de Parceiros são controlados por pessoas ou organizações que não são diretamente ligadas à Stone. Esses aplicativos não conseguem administrar as contas às quais possuem acesso (não podem redefinir a senha, mudar dados cadastrais, etc), mas podem operacionalizar essas contas (iniciar envios de TEDs, iniciar pagamentos, etc) quando possuem consentimento.\n","categories":"","description":"","excerpt":" Aplicativos são desenvolvidos pela própria Stone ou por parceiros, e …","ref":"/docs/guias/a-conta-stone/aplicativos/","tags":"","title":"Aplicativos"},{"body":" Usado para realizar pagamentos de boleto e concessionárias.\nAtenção\nO pagamento pode ser agendado através do campo scheduled_to.\nA data usada no campo scheduled_to deve estar entre a data next_available_execution_date e a data limite retornada no campo execution_limit_date da API de calendário de agendamento chamada com o parâmetro operation_type=payment.\nCaso a data escolhida seja menor do que next_available_execution_date, o pagamento será executado imediatamente.\nCaso a data seja maior que execution_limit_date, será retornado um erro 422 na criação.\nA criação e o agendamento de pagamentos pode acontecer em qualquer dia (incluindo fins de semana e feriados) e em qualquer horário.\n  POST https://sandbox-api.openbank.stone.com.br/api/v1/payments  BODY PARAMS  barcode* string\nCódigo de barras do documento.\n account_id* string\nIdentificador da conta que irá pagar o documento.\n scheduled_to* string\nFormato: yyyy-mm-dd\nHEADERS  x-stone-idempotency-key* string\nChave de idempotencia.\nResponse 202 Accepted Body\n{ \"account_id\": \"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:22:19Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"barcode\": \"89670000000010003137498189637166095077491613\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:22:19Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"details\": null, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": null, \"id\": \"1879158c-03c6-48ff-b7c3-c34a992cfa9c\", \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"status\": \"APPROVED\", \"writable_line\": \"896700000004010003137493818963716605950774916130\" } ","categories":"","description":"","excerpt":" Usado para realizar pagamentos de boleto e concessionárias.\nAtenção\nO …","ref":"/docs/referencia-da-api/pagamentos/criar-um-pagamento/","tags":"","title":"Criar Um Pagamento"},{"body":"Detalhes sobre o processo de se autenticar na nossa API.\n Segurança sempre foi um assunto complexo, principalmente por ter uma terminologia específica. Para facilitar ao máximo a integração com a nossa API, procuramos adotar padrões estabelecidos de mercado.\nAutenticação de Aplicativos Parceiros Cada Aplicativo recebe um identificador exclusivo chamado clientID quando é criado. Esse ID não pode ser modificado e será usado no token de acesso do seu aplicativo quando chamar a API.\nOutra informação importante é o par de chaves do seu aplicativo, que deve ser mantida confidencial em todos os momentos. Se alguém obtiver acesso a sua chave privada, essa pessoa poderá acessar recursos protegidos em nome do seu aplicativo. Isso não pode acontecer sob hipótese alguma.\nO desenvolvedor deve usar essa chave privada para assinar os tokens enviados para a Stone e nos enviar a chave pública para verificarmos a assinatura.\nAutenticação com o Auth e Open ID Connect OAuth 2.0 é um padrão de autorização que permite ao usuário conceder acesso limitado a seus recursos na Conta Stone para Aplicativos de Parceiros, sem precisar expor suas credenciais. Ou seja, o cliente não precisa compartilhar seu login e senha com ninguém.\nJá o OpenID Connect é uma camada de identidade construída em cima do OAuth 2.0 e que permite a fácil verificação da identidade do usuário, bem como a capacidade de obter informações básicas de perfil do provedor de identidade (no caso, a Conta Stone).\nAutenticando a Aplicação Parceira A nossa API só aceita chamadas autenticadas, ou seja, chamadas cujo sujeito da ação conseguimos identificar.\nPara isso exigimos que nas requisições HTTP exista no cabeçalho um campo chamado authorization, cujo valor será “Bearer” seguido do token de acesso. Os próximos tópicos explicam como obter esse token de acesso.\nExemplo de cabeçalho de uma chamada autenticada:\nGET /api/v1/accounts HTTP/1.1 Host: sandbox-api.openbank.stone.com.br User-Agent: curl/7.61.1 Accept: */* authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c \nDessa forma, após o cadastro da Aplicação do desenvolvedor, é necessário implementar a autenticação.\nComo foi detalhado acima, nosso fluxo se baseia na especificação OAuth 2.0 e OpenID Connect. O fluxo de integração OAuth 2.0 que usamos é o de client credentials. Neste fluxo, o desenvolvedor irá precisar:\n1. Gerar um token JWT com as configurações da sua Aplicação, assinando com sua chave privada.\n2. Fazer uma requisição POST para nosso servidor de autenticação, enviando o JWT. Se for um token válido, enviaremos como resposta um token de acesso.\n3. Usar esse access_token para fazer as chamadas autenticadas.\n1. Gerando o token JWT JWT é uma especificação para gerarmos tokens que sejam assinados e/ou criptografados. Nesta página temos várias bibliotecas de desenvolvimento em várias linguagens que implementam esta especificação.\nBasicamente, um JWT possui 3 partes:\n header: possui informações sobre o algoritmo de criptografia utilizado, entre outros metadados deste processo, como um id da chave utilizada. Na nossa API utilizaremos sempre o algoritmo “RS256”. Falaremos mais sobre ele. Um exemplo de header seria:  { \"alg\": \"RS256\", \"typ\": \"JWT\" } Este deve ser encondado na base 64 para ser incluído no token. Para o exemplo, fica: eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.\n payload: um conjunto de alegações (claims, do inglês) que possuem a estrutura chave/valor. É aqui que colocamos informações como tempo de expiração do token, qual o id da Aplicação e etc. signature: a assinatura do header e payload usando o algoritmo descrito no header e a chave privada.  Claims Para conseguir se autenticar com sucesso, o desenvolvedor precisará colocar nos claims os seguintes valores:\n   Nome Valor     exp Tempo de expiração do token em segundos desde o início da era UNIX (1970). É UTC e não pode ser maior que 15 min. Ex: “exp”: 1542235633   nbf “Not before”, ou seja, data a partir da qual o token é válido. É UTC. Ex: “nbf”: 1542235633   aud Quem é a “audiência” deste token. No caso, é o nosso servidor de autenticação. Para o ambiente de Sandbox será: https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank . Para Produção será: https://accounts.openbank.stone.com.br/auth/realms/stone_bank   realm Qual é o “reino” das nossos usuários. Será sempre “stone_bank”.   sub O sujeito referente ao token. Deve ser o ClientID enviado ao desenvolvedor pós-cadastro da Aplicação.   clientId Mesmo valor de sub, ou seja, o ClientID enviado ao desenvolvedor pós-cadastro da Aplicação.   jti Identificador único do token gerado. Normalmente se utiliza um UUID, mas não é obrigatório usar esse formato desde que a unicidade seja garantida. Mais informações   iat Momento em que o token foi gerado. É UTC. Ex. “iat”: 1542235633    Usando a chave privada e o algoritmo “RS256”, o desenvolvedor consegue gerar e assinar o Token JWT com qualquer uma das libs listadas neste site.\nNós temos guardada de forma segura a chave pública que usaremos para validar este token.\nEsse é um processo de criptografia assimétrica, no qual usaremos o par de chaves pública e privada gerado pela desenvolvedora no momento do cadastro da Aplicação.\nRS256 Este algoritmo especificado nesta RFC usa criptografia “RSASSA-PKCS1-v1_5 com SHA-256”. É o mesmo padrão de integração das APIs que muitas outras grandes empresas utilizam.\n2. Fazendo a requisição para receber o token de acesso Após a geração do token local, é preciso fazer uma chamada para o nosso servidor de autenticação para que a gente faça a validação e retorne um access_token nosso.\nEsta chamada será nas seguintes URLs (por ambiente):\n Sandbox: https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token Produção: https://accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token  A chamada é com o método POST com o header Content-Type e User-Agent. O Content-Type informado deve ser x-www-form-urlencoded (o mesmo usado por submissão de formulários HTML) e o header User-Agent deve estar habilitado.\nEx.:\n{ \"user-agent\": \"Nome da aplicação\", \"content-type\": \"application/x-www-form-urlencoded\" } Glossário    Nome Valor     client_id É o valor enviado para o desenvolvedor pós-cadastro da Aplicação.   grant_type Será sempre “client_credentials”.   client_assertion Aqui deve ser o token que o desenvolvedor gerou.   client_assertion_type Sempre será urn:ietf:params:oauth:client-assertion-type:jwt-bearer, que é o que fecha o fluxo de client credentials para o servidor.    Examples Curl { curl -X POST https://sandbox-accounts.openbank.stone.com.br/auth/realms/stone_bank/protocol/openid-connect/token -H 'content-type: application/x-www-form-urlencoded' -d 'client_id=ID_EXEMPLO\u0026grant_type=client_credentials\u0026client_assertion_type=urn:ietf:params:oauth:client-assertion-type:jwt-bearer\u0026client_assertion=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c' }   Python import jwt import time import requests import subprocess class AppData: def __init__(self, client_id, base_url, base_auth_url, private_key): self.client_id = client_id self.base_url = base_url self.base_auth_url = base_auth_url self.private_key = private_key def getApplicationData(): return AppData( 'insira aqui seu client_id', 'https://sandbox-api.openbank.stone.com.br/api/v1', 'https://sandbox-accounts.openbank.stone.com.br', private_key ) private_key = \"\"\"-----BEGIN RSA PRIVATE KEY----- Insira aqui sua private_key -----END RSA PRIVATE KEY-----\"\"\" def getToken(): app_data = getApplicationData() base_url = f'{app_data.base_auth_url}/auth/realms/stone_bank' auth_url = f'{base_url}/protocol/openid-connect/token' payload = { 'exp': int(time.time()) + 3600, 'nbf': int(time.time()), 'aud': base_url, 'realm': 'stone_bank', 'sub': app_data.client_id, 'clientId': app_data.client_id, 'jti': str(time.time()), 'iat': int(time.time()) } token = jwt.encode(payload, app_data.private_key, algorithm='RS256') headers = { 'Content-Type': 'application/x-www-form-urlencoded', 'User-Agent': 'Insira aqui o Nome da Aplicação' } token_payload = { 'client_id': app_data.client_id, 'grant_type': 'client_credentials', 'client_assertion': token.decode(), 'client_assertion_type': 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer' } return requests.post(auth_url, data=token_payload, headers=headers) # COMENTAR PRA NÃO COPIAR O TOKEN response = getToken() access_token = response.json()['access_token'] print (access_token)   Response { \"access_token\": \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ijh3eWRUZGpzTEdYVSJ9.eyJqdGkiOiIzM2RlNjg2Mi1iYmVkLTQ3ZWYtYTY5Yi0wNDAzNTI0YTRhNGEiLCJleHAiOjE1NTkyNDg3OTUsIm5iZiI6MCwiaWF0IjoxNTU5MjQ3ODk1LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJjMWExZmE5NC0zOTc4LTRhNjgtODBlNy1mZWU2ZTkwNmNiMmUiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJhZG1pbi1jbGkiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiJhN2YxN2QxMC1jMGY1LTQzMzItOWE5MC1lNDQxMTVmMWNlMGEiLCJhY3IiOiIxIiwic2NvcGUiOiJleHBlbmQ6dHJhbnNmZXJzOmludGVybmFsIGVudGl0eTpsZWdhbF93cml0ZSBlbnRpdHk6d3JpdGUgcHJpbmNpcGFsOmNvbnNlbnQgZW1haWwgZXhwZW5kOnRyYW5zZmVyczpleHRlcm5hbCBzdG9uZV9zdWJqZWN0X2lkIGV4cGVuZDpyZWFkIGV4cGVuZDpib2xldG9pc3N1YW5jZSBlbnRpdHk6cmVhZCBwcm9maWxlIHBheW1lbnRhY2NvdW50OiogZXhwZW5kOnBheW1lbnRzIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInN0b25lX3N1YmplY3RfaWQiOiJ1c2VyOjNmMDcwN2NiLWEyYzgtNDlhMS04NDc4LWFjMDg1MGY5Njc4MCIsIm5hbWUiOiJKb2FvIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiam9hby5leGVtcGxvQGVtYWlsLmNvbS5iciIsImdpdmVuX25hbWUiOiJKb2FvIiwiZW1haWwiOiJqb2FvLmV4ZW1wbG9AZW1haWwuY29tLmJyIn0.baf0-ZMg_IPtoReTpQBnMIYPjrLWFklPT7T1CGE2ecxfxt-a3h1CSdveK0Xd0f9FWna6obcSIonHn7HD0mJnxwBoIK8w6_cg_ODTS-l2jgGWVTl-jN41rdyTg5kgtTT6M3v02QJxTOfklo9mpW4tX8cZorx5vP_ykb5Kk186PGxYTJ9mGwQEuyrHl7-mc8aN7x10Ue7P_fk2Br43T2uR7LoFFIVM9I45p1hntZx-e59alleIuUqnZzk5Vo8knk67ZEJEAWOiigS0yyyy9gT3wqPypBYnoP3SMVws7e6lfKuZasCS58z8arJiYVQVgF6xSoQQdDBTY4I1_5kL-phmAA\", } \n3. Usando o access_token da resposta Se tudo deu certo no passo anterior, a resposta do servidor será um JSON com uma chave access_token, onde terá o valor de um token de sessão.\nComo falamos no início dos tópicos anteriores, para usar este token basta colocá-lo no header Authorization com o valor Bearer ACCESS_TOKEN. Aqui, o desenvolvedor deve substituir “ACCESS_TOKEN” pelo valor recebido.\nAutenticação nos exemplos\nCada exemplo de endpoint desta documentação tem um campo especial para o ACCESS_TOKEN.\n Pronto! Com isto já é possível fazer uma chamada autenticada para a nossa API. A URL é (por ambiente):\n Sandbox: https://sandbox-api.openbank.stone.com.br Produção: https://api.openbank.stone.com.br  Bem-vindo ao time de fintechs do futuro!\nEsta chamada retorna um access_token que pode ser usado nas próximas chamadas.\n","categories":"","description":"","excerpt":"Detalhes sobre o processo de se autenticar na nossa API.\n Segurança …","ref":"/docs/guias/integracao/autenticacao/","tags":"","title":"Autenticação"},{"body":"GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts  PATH PARAMS  account_id string\nIdentificador da conta.\n QUERY PARAMS  tax_id string\nFiltra contatos pelo documento fornecido.\naccount_code string\nFiltra contatos pelo código da conta fornecido.\ninstitution_code string\nFiltra contatos pelo código da instituição fornecido.\n Response 200 ok content-type: application/json Body\n[ { \"bank_accounts\": [ { \"account_code\": \"35746698\", \"branch_code\": \"00001\", \"id\": \"1ede2f26-28cd-462b-a7ea-429960c8480b\", \"institution_code\": \"197\" } ], \"email\": \"contactemail@empresaxyz.com\", \"id\": \"f0c83515-c7ea-40b8-b9c4-c85d9489c40c\", \"mobile\": \"21 999999999\", \"name\": \"Contact name\", \"tax_id\": \"47647430351\" }, { \"bank_accounts\": [ { \"account_code\": \"883841975\", \"branch_code\": \"0001\", \"id\": \"5b332a1b-57ef-4398-bb9c-79011cc6c58e\", \"institution_code\": \"197\" } ], \"email\": \"tyson@huber.com\", \"id\": \"a0ee3a1a-a1d6-48ad-8ea3-7fdf5ea5c250\", \"mobile\": null, \"name\": \"Tyson Huber\", \"tax_id\": \"11111111111\" }, { \"bank_accounts\": [], \"email\": \"johndoe@hotmail.com\", \"id\": \"a862d499-26cc-48df-9583-585ba604e9c8\", \"mobile\": \"2124759861\", \"name\": \"John Doe\", \"tax_id\": \"42373740761\" } ] ","categories":"","description":"","excerpt":"GET …","ref":"/docs/referencia-da-api/contatos/listar-contatos/","tags":"","title":"Listar Contatos"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/transferencias/transferencias-internas/","tags":"","title":"Transferências Internas"},{"body":" Faz transferências monetárias para outra conta dentro da Stone. A transferência pode ser agendada, através do campo scheduled_to. A data usada no campo scheduled_to deve estar entre a data next_available_execution_date e a data limite retornada no campo execution_limit_date da API de caléndario de agendamento chamada com o parâmetro operation_type=internal_transfer.\nCaso a data escolhida seja menor do que next_available_execution_date, a transferência será executada imediatamente. Caso a data seja maior que execution_limit_date, será retornado um erro 422.\nHorário de funcionamento A criação e o agendamento de transferências internas pode acontecer em qualquer dia (incluindo fins de semana e feriados) e em qualquer horário.   POST https://sandbox-api.openbank.stone.com.br/api/v1/internal_transfers  BODY PARAMS  amount* int32 Valor da transferência em centavos de Real, ou seja, um real fica 100.\n account_id* string Identificador da conta que está enviando a transferência.\n target object account object account_code* string Número da conta. Padrão: ^\\d+$\n description string Descrição da transação. Essa descrição será exibida tanto no extrato de quem enviou quanto de quem recebeu (limite 200 caracteres).\n scheduled_to string Formato: yyyy-mm-dd\nHEADERS  x-stone-idempotency-key string Chave de idempotência\n\nAs transferências internas estão disponíveis 24hs por dia. Elas se referem a transações entre contas Stone.\nCiclo de vida assíncrono As transações são executadas de forma assíncrona, então receber o retorno com código 202 não significa que a transação foi executada. É possível enviar uma transação, receber 202 como retorno e logo depois ocorrer uma falha como, por exemplo, saldo insuficiente. Também é importante lembrar que a transferência precisa de uma aprovação.\n Response 202 Accepted content-type: application/json Body\n{ \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:00:27Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:00:27Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"description\": \"\", \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": null, \"id\": \"c97de6a6-a35a-423d-a3df-add006a0038e\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"settled_at\": null, \"status\": \"APPROVED\", \"target\": { \"account\": { \"account_code\": \"58859\" }, \"entity\": { \"name\": \"Fernando Antonio\" } }, \"target_account_code\": \"58859\", \"target_account_owner_name\": \"Fernando Antonio\" } ","categories":"","description":"","excerpt":" Faz transferências monetárias para outra conta dentro da Stone. A …","ref":"/docs/referencia-da-api/transferencias/transferencias-internas/transferir-para-contas-stone/","tags":"","title":"Transferir para Contas Stone"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id  PATH PARAMS\n account_id string\nIdentificador da conta no formato UUID.\nAtenção\nA primeira coisa que faremos antes de lhe dar acesso a dados de uma conta é verificar se você tem acesso a essa conta. Caso você erre o id da conta, sempre receberá o erro de não autorizado.\n  Response 200 OK content-type: application/json Body\n{ \"account_code\": \"403881\", \"branch_code\": \"1\", \"id\": \"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"owner_document\": \"31455351881\", \"owner_id\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"owner_name\": \"Nome da Usuária\", \"created_at\": \"2019-07-31T19:13:56Z\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-dados-da-conta/","tags":"","title":"Consultar Dados da Conta"},{"body":" Nesse endpoint serão enviadas as fotos do usuário necessários para realização da análise do KYC.\nDeverá ser um request do tipo PUT com o endereço recebido no campo url do endpoint de Consultar URL para envio da foto.\nExemplo:\nPUT https://storage.googleapis.com/sdb-inside-gateway-frontend-3727/dXNlcjo4YTZmMzYzZi05Mzg4LTRiMzEtOGY0ZC05Zjk2NTAyY2Q1NzA=/53acaa13-f74b-4884-9420-f05b0ca79d25/doc_cnh_front.jpg?Expires=1615042461\u0026GoogleAccessId=sdb-inside-gateway-c914%40inside-gateway-724c.iam.gserviceaccount.com\u0026Signature=L1kzM4t2dq4qjzJ9gP%2BM7N7o2UWlQ59TXYui7OyMBe107TvVvSLEqN%2B1VL4Y5pBK%2FKqKoJWXKGizT6PNC%2BP5aPRz9qR94m1oPG2lsNspjFLO%2BdrRhdMTx21ylHNLIOWy54vJ5A84WIAlnAIZvHU7%2B1a2%2BRn8Wd3b62djcOpndFEAYCJDQBBENLwY%2B0Qs0KbumICdVWNqfxwttaOj%2FDpzMqp0TrDfmx8xfL5FyIzyBn7BYwfmhJeWU2VFjWVztohj0wiOIPcHlK%2BUkgGNYQ8qXYMY5aWeO6A55%2FO20QErizp%2BX2Ad2YlfS5mOozXvjFPShR7%2FRBxkhAj%2BEFx9EyVy2A%3D%3D \nHEADERS  Content-Type: image/jpeg\nx-goog-acl: public-read\nQUERY PARAMS  Expires* Dado virá no campo url do endpoint de Consultar URL para envio da foto.\nGoogleAccessId* Dado virá no campo url do endpoint de Consultar URL para envio da foto.\nSignature* Dado virá no campo url do endpoint de Consultar URL para envio da foto.\nBODY PARAMS  photo* binary\nResponse  200 OK  400 Bad Request \u003c?xml version='1.0' encoding='UTF-8'?\u003e \u003cError\u003e \u003cCode\u003eExpiredToken\u003c/Code\u003e \u003cMessage\u003eThe provided token has expired.\u003c/Message\u003e \u003cDetails\u003eRequest signature expired at: 2021-03-06T14: 54: 21+00: 00\u003c/Details\u003e \u003c/Error\u003e \nPróximo passo:\nEnviar dados do usuário. ","categories":"","description":"","excerpt":" Nesse endpoint serão enviadas as fotos do usuário necessários para …","ref":"/docs/referencia-da-api/kyc/enviar-fotos/","tags":"","title":"Enviar fotos do usuário"},{"body":" Fluxo da recarga    Para efetuar a recarga de créditos para um Conteúdo Digital é necessário que o cliente selecione e escolha o plano/valor.\n  Após a confirmação da recarga para um Conteúdo Digital, retornamos o código PIN ao cliente.\n  Com o código PIN em mãos, o cliente acessa o site/app do provedor e resgata os créditos obtidos.\n  Provedores disponíveis   Spotify; Ifood.  Atenção\nPara o Spotify os valores oferecidos não são flexíveis;\nQuanto ao Ifood a escolha do valor é flexível, com o mínimo de R$1,00 e máximo de R$149,00.\n Horário de funcionamento A liquidação é executada no provedor em questões de segundos. O resgate dos créditos é feito ao informar o Código PIN retornado após a confirmação da recarga.  Ações a serem executadas para recarga de Conteúdo Digital  1) Listar todos os provedores de Conteúdo Digital GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/digital-content/providers Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Response 200 ok { \"providers\": [ { \"name\": \"Ifood\", \"id\": 2153 }, { \"name\": \"Spotify\", \"id\": 2141 } ] } \n2) Listar todos os valores para o provedor GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/digital-content/values/{provider-id} Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Responses 200 ok - Name: Spotify / id: 2141\n{ \"product\": [ { \"product_name\": \"Spotify Pin 17 BRL\", \"value\": 1700 }, { \"product_name\": \"Spotify Pin 50 BRL\", \"value\": 5000 }, { \"product_name\": \"Spotify Pin 100 BRL\", \"value\": 10000 } ] } - Name: Ifood / id: 2153\n{ \"product\": [ { \"value\": 1000 } ] } \n3) Simular uma recarga de Conteúdo Digital POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/digital-content/dry-run Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 5000, \"provider_id\": \"2141\" } Response 202 Accepted { \"amount\": 5000, \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"provider_id\": \"2141\" } \n4) Executar uma recarga de Conteúdo Digital POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/digital-content Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\", \"x-stone-challenge-solution\": \"81080d67-aac9-415b-868f-4403243201d3\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 5000, \"provider_id\": \"2141\" } Response 200 ok { \"id\": \"cd5ff1c2-8f7e-4f56-a9d8-241d4cd1a1a8\", \"receipt\": \" PROTOCOLO 0002751870\\n1 06/04/2021 15:27\\nTERM 228005 AGENTE 228005 AUTE 07642\\n----------------------------------------\\nAUTO 978142 \\n\u003cVIA1\u003e\\nESTE CUPOM NAO TEM VALOR FISCAL\\nPRODUTO: SPOTIFY\\nVALOR: R$ 50,00\\nPIN: 6365-4427-6400-1327\\nSERIE: 00000000\\n\\nCOMO RESGATAR OS CREDITOS SPOTIFY:\\n1. VISITE SPOTIFY.COM/REDEEM\\n2. INFORME O PIN DESTE RECIBO\\n3. VALIDADE: 12 MESES\\nINFORMACOES: WWW.SPOTIFY.COM/GIFT-CARD\\n\\nAPOS O USO, INUTILIZE ESTE CUPOM\\nIS2B - INTEGRATED SOLUTIONS TO BUSINESS\\n\\n\\n\\n\\n\u003c/VIA1\u003e----------------------------------------\\n\\n\", \"transaction_id\": \"b6cb2b73-0e30-4a93-9de6-31201628df79\", \"pin\": \"6365-4427-6400-1327\" } \nStatus_code: 403 Caso receba como resposta o status_code: 403, clique aqui para ter acesso ao fluxo de autorização do challenge que deverá ser enviado no Header do Request (x-stone-challenge-solution).  ","categories":"","description":"","excerpt":" Fluxo da recarga    Para efetuar a recarga de créditos para um …","ref":"/docs/referencia-da-api/recargas/recarga-de-conteudo-digital/","tags":"","title":"Recarga para Conteúdo Digital"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/payment_links/{account_id}/orders/{order_id} \nResponse { \"amount\": 1000, \"charges\": [{ \"amount\": 1000, \"checkout_payment\": { \"amount\": 1000, \"billing_address_editable\": false, \"created_at\": \"2020-05-15T02:00:59Z\", \"customer_editable\": false, \"id\": \"chk_advD5VdsjJfjlE7k\", \"payment_url\": \"https://api.mundipagg.com/checkout/v1/orders/chk_advD5VdsjJfjlE7k\", \"shippable\": false, \"skip_checkout_success_page\": false, \"status\": \"closed\", \"updated_at\": \"2020-05-15T02:02:27Z\" }, \"code\": \"JDOFY4A33Z\", \"created_at\": \"2020-05-15T02:02:24Z\", \"currency\": \"BRL\", \"customer\": { \"address\": { \"city\": \"Rio de Janeiro\", \"complement\": \"\", \"country\": \"BR\", \"created_at\": \"2020-05-15T02:02:24Z\", \"id\": \"addr_WDXrMyxfbhK6J9jl\", \"neighborhood\": \"Centro\", \"number\": 1213, \"state\": \"RJ\", \"status\": \"active\", \"street\": \"Rua Guedes Ramos Santos\", \"updated_at\": \"2020-05-15T02:02:24Z\", \"zip_code\": 21467098 }, \"created_at\": \"2020-05-07T23:33:15Z\", \"delinquent\": false, \"document\": 12345678912, \"email\": \"lucia@email.com\", \"id\": \"cus_WVbg8Qkc0WIelO4k\", \"name\": \"Lucia Santos\", \"phones\": { \"mobile_phone\": { \"area_code\": 21, \"country_code\": 55, \"number\": 987654321 } }, \"type\": \"individual\", \"updated_at\": \"2020-05-15T02:02:24Z\" }, \"id\": \"ch_2gn67yws0ugEDl3d\", \"last_transaction\": { \"acquirer_auth_code\": 197, \"acquirer_message\": \"Transação capturada com sucesso\", \"acquirer_name\": \"stone\", \"acquirer_nsu\": 7130, \"acquirer_return_code\": \"00\", \"acquirer_tid\": 10188458259306, \"amount\": 1000, \"antifraud_response\": {}, \"card\": { \"billing_address\": { \"city\": \"Rio de Janeiro\", \"complement\": \"\", \"country\": \"BR\", \"neighborhood\": \"Centro\", \"number\": 1213, \"state\": \"RJ\", \"street\": \"Rua Guedes Ramos Santos\", \"zip_code\": 21467098 }, \"brand\": \"visa\", \"created_at\": \"2020-05-07T23:33:15Z\", \"exp_month\": 3, \"exp_year\": 2025, \"first_six_digits\": 400000, \"holder_document\": 12628792729, \"holder_name\": \"LUCIA SANTOS\", \"id\": \"card_XaADo0knUdUDqM32\", \"last_four_digits\": \"0010\", \"status\": \"active\", \"type\": \"credit\", \"updated_at\": \"2020-05-15T02:02:25Z\" }, \"created_at\": \"2020-05-15T02:02:25Z\", \"gateway_id\": \"84e27b4c-400a-499c-b01b-74fcd159e9aa\", \"gateway_response\": { \"code\": 200, \"errors\": [] }, \"id\": \"tran_49NMZAPfeINQmPQn\", \"installments\": 4, \"metadata\": {}, \"operation_key\": 8733852509751, \"operation_type\": \"auth_and_capture\", \"status\": \"captured\", \"success\": true, \"transaction_type\": \"credit_card\", \"updated_at\": \"2020-05-15T02:02:25Z\" }, \"paid_amount\": 1000, \"paid_at\": \"2020-05-15T02:02:26Z\", \"payment_method\": \"credit_card\", \"status\": \"paid\", \"updated_at\": \"2020-05-15T02:02:26Z\" }], \"checkouts\": [{ \"accepted_multi_payment_methods\": [], \"accepted_payment_methods\": [ \"credit_card\" ], \"amount\": 1000, \"billing_address\": {}, \"billing_address_editable\": true, \"closed_at\": \"2020-05-15T02:02:27Z\", \"created_at\": \"2020-05-15T02:00:59Z\", \"credit_card\": { \"authentication\": { \"threed_secure\": {}, \"type\": \"none\" }, \"capture\": true, \"installments\": [{ \"number\": 1, \"total\": 1000 }, { \"number\": 2, \"total\": 1000 }, { \"number\": 3, \"total\": 1000 }, { \"number\": 4, \"total\": 1000 }, { \"number\": 5, \"total\": 1000 }, { \"number\": 6, \"total\": 1000 }, { \"number\": 7, \"total\": 1000 }, { \"number\": 8, \"total\": 1000 }, { \"number\": 9, \"total\": 1000 }, { \"number\": 10, \"total\": 1000 }, { \"number\": 11, \"total\": 1000 }, { \"number\": 12, \"total\": 1000 } ] }, \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-15T02:00:58Z\", \"delinquent\": false, \"id\": \"cus_vXgl4jbjH5im4mbj\", \"name\": \"Lucia\", \"phones\": {}, \"updated_at\": \"2020-05-15T02:00:58Z\" }, \"customer_editable\": true, \"expires_at\": \"2020-05-16T02:00:59Z\", \"id\": \"chk_advD5VdsjJfjlE7k\", \"metadata\": {}, \"payment_url\": \"https://api.mundipagg.com/checkout/v1/orders/chk_advD5VdsjJfjlE7k\", \"shippable\": false, \"skip_checkout_success_page\": true, \"status\": \"closed\", \"success_url\": \"https://sandbox-link.openbank.stone.com.br/t/sucesso\", \"updated_at\": \"2020-05-15T02:02:27Z\" }], \"closed\": true, \"closed_at\": \"2020-05-15T02:02:27Z\", \"code\": \"JDOFY4A33Z\", \"created_at\": \"2020-05-15T02:00:58Z\", \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-15T02:00:58Z\", \"delinquent\": false, \"id\": \"cus_vXgl4jbjH5im4mbj\", \"name\": \"Lucia\", \"phones\": {}, \"updated_at\": \"2020-05-15T02:00:58Z\" }, \"id\": \"or_ob546qyfOtw6RZnr\", \"items\": [{ \"amount\": 1000, \"created_at\": \"2020-05-15T02:00:58Z\", \"description\": \"Camisa de malha 100% algodão - Tamanho G - Verde\", \"id\": \"oi_nkZBpLnH5SkmB8wY\", \"quantity\": 1, \"status\": \"active\", \"type\": \"product\", \"updated_at\": \"2020-05-15T02:00:58Z\" }], \"status\": \"paid\", \"updated_at\": \"2020-05-15T02:02:28Z\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/link-de-pagamentos/detalhes-de-um-link-de-pagamento/","tags":"","title":"Detalhes de um Link de Pagamento"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/simulacoes-dry-run/","tags":"","title":"Simulações (DRY-RUN)"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/guias/tutoriais/","tags":"","title":"TUTORIAIS"},{"body":" Nossas APIs usam um padrão de paginação por cursor. O retorno possui o seguinte formato:\n{ cursor: { after: \"string | null\", before: \"string | null\", limit: \"number\" }, data: array[object], } \nComo funciona:  Deve-se informar o limite de items para a paginação, passando o parâmetro ?limit=10. Na resposta dessa query, será retornado as hashs referente ao cursor no momento da resposta, ex.:\n{ cursor: { after: \"ASsa987fqw\", before: \"null\", limit: \"10\" }, data: []; } Assim, caso queira consultar o próximo cursor, acrescentar o parâmetro after na chamada: ?limit=10\u0026after=ASsa987fqw, será retornado a próxima paginação.\n","categories":"","description":"","excerpt":" Nossas APIs usam um padrão de paginação por cursor. O retorno possui …","ref":"/docs/referencia-da-api/padroes-da-api/paginacao/","tags":"","title":"Paginação"},{"body":" Boleto     Chave Descrição Tipo Caracteres (min/max)     account_id Identificador da conta do beneficiário. String min: 36 / max: 36   amount Valor do boleto bancário gerado, em centavos de reais. Integer min: 2000 / max: 9999999999999999999   barcode Código de barras. String min: 44 / max: 44   beneficiary Objeto com os dados do beneficiário. Veja os campos desse object abaixo. Object - - - - - - - - - - -   created_at Data e hora em que o boleto bancário foi gerado. Nesse caso nunca será null. Formato ISO8601 \"YYYY-MM-DDThh:mm:ssZ\". String min: 20 / max: 20   created_by Identificador único do usuário ou aplicação que criou a transação, no formato user:UUID4 ou application:UUID4respectivamente. Nesse caso nunca será null. String min: 42 / max: 48   customer Objeto com os dados do cliente que será informa como pagador no ato de registro do boleto. Veja os campos desse object abaixo. Object - - - - - - - - - - -   discount Objeto com os dados referentes ao desconto. Veja os campos desse object abaixo. Object - - - - - - - - - - -   expiration_date Data de vencimento do boleto bancário. Mesmo depois dessa data expirar o pagamento ainda pode ser feito. Formato \"YYYY-MM-DD\". String min: 10 / max: 10   fee Projeção da taxa que seria cobrada do beneficiário no ato de recebimento do pagamento caso o recebimento fosse agora. É atualizada com a taxa cobrada quando receber o pagamento. Integer min: 0 / max: 4   fee_metadata Objeto que identifica detalhes sobre a aplicação da taxa. Veja os campos desse object abaixo. Object - - - - - - - - - - -   fine Objeto com os dados referentes a multa. Veja os campos desse object abaixo. Object - - - - - - - - - - -   id Identificador único do boleto bancário, no formato UUID4. String min: 36 / max: 36   interest Objeto com os dados referentes aos juros. Veja os campos desse object abaixo. Object - - - - - - - - - - -   invoice_type Tipo de boleto bancário. Valores suportados: proposal, deposit e bill_of_exchange. String min: 7 / max: 16   issuance_date Data da emissão de boleto bancário. Formato \"YYYY-MM-DD\". String min: 10 / max: 10   limit_date Data limite para pagamento do boleto bancário. Sempre igual ou maior a data de vencimento. Formato \"YYYY-MM-DD\". String min: 10 / max: 10   our_number Número que identifica unicamente um boleto para uma conta frente a outras instituições. String min: 20 / max: 20   receiver Objeto com os dados do sacador avalista. Veja os campos desse object abaixo. Object - - - - - - - - - - -   registered_at Data e hora de registro do boleto bancário. Formato ISO8601 \"YYYY-MM-DDThh:mm:ssZ\". String min: 20 / max: 20   settled_at Data e hora em que o dinheiro do pagamento do boleto é depositado na conta do beneficiário. Formato ISO8601 \"YYYY-MM-DDThh:mm:ssZ\". String min: 20 / max: 20   status Status atual do boleto bancário, podendo ser um dentre os status à seguir: CREATED, REGISTERED, SETTLED, CANCELLED ou EXPIRED. String min: 7 / max: 22   writable_line Código de barras traduzido em números. String min: 47 / max: 47    Campos do objeto beneficiary     Chave Descrição Tipo Caracteres (min/max)     account_code Número da conta bancária. String min: 3 / max: 20   branch_code Número da agência da conta. String min: 4 / max: 4   document Número do documento do beneficiário sem pontos. String min: 11 / max: 14   document_type Tipo do documento do beneficiário. Pode ser ‘cpf’ ou ‘cnpj’. String min: 3 / max: 4   legal_name É o nome que identifica o beneficiário para fins legais, administrativos e outros fins oficiais. String min: 1 / max: 50   trade_name Nome fantasia do beneficiário. String min: 1 / max: 80    Campos do objeto discount     Chave Descrição Tipo Caracteres (min/max)     date Data até a qual o desconto deve ser aplicado.\nFormato ISO8601 \"YYYY-MM-DD\". String min: 8 / max: 8   value Valor percentual (%) do desconto que será aplicado ao boleto. O valor do deve ser maior que 0.0 e até 90.0. Formato decimal. Ex: “20.0”. String min: \u003e 0 / max: \u003c 90    Campos do objeto fee_metadata     Chave Descrição Tipo Caracteres (min/max)     billing_exemption_participant Indica se o usuário possui alguma condição especial vigente. Boolean min: 4 / max: 5   fee Projeção da taxa que seria cobrada no ato de recebimento do pagamento caso o recebimento fosse agora. Integer min: 0 / max: 4   max_free Indica o número total de boletos emitidos que podem ser liquidados sem que haja custos por mês. Integer min: 0 / max: 2   original_fee Indica a taxa original do item para a essa conta. Integer min: 0 / max: 4   remaining_free Indica o número restante de boletos gerados que podem ser pagos sem que haja custos no periódo. Integer min: 0 / max: 2    Campos do objeto fine     Chave Descrição Tipo Caracteres (min/max)     date Data que define o dia a partir do qual a multa deve ser aplicada ao boleto.\nFormato ISO8601 \"YYYY-MM-DD\". String min: 10 / max: 10   value Valor percentual (%) da multa que será aplicada ao boleto. O valor do deve ser maior que 0.0 e até 2.0.\nFormato decimal. Ex: “2.0”. String min: \u003e 0 / max: \u003c 2    Campos do objeto interest     Chave Descrição Tipo Caracteres (min/max)     date Data que define o dia a partir do qual os juros passam a ser aplicados ao boleto.\nFormato ISO8601 \"YYYY-MM-DD\". String min: 10 / max: 10   value Valor percentual (%) dos juros que serão aplicados ao boleto. O valor do deve ser maior que 0.0 e até 2.0.\nFormato decimal. Ex: “2.0”. String min: \u003e 0 / max: \u003c 1    Campos do objeto customer     Chave Descrição Tipo Caracteres (min/max)     document Número do documento do pagador sem pontos. String min: 11 / max: 14   document_type Tipo do documento do pagador. Pode ser CPF ou CNPJ. String min: 3 / max: 4   legal_name É o nome que identifica o pagador para fins legais, administrativos e outros fins oficiais. String min: 1 / max: 50   trade_name Nome fantasia do pagador. String min: 1 / max: 80    Campos do objeto receiver     Chave Descrição Tipo Caracteres (min/max)     document Número do documento do sacador avalista. String min: 11 / max: 14   legal_name É o nome que identifica o sacado avalista para fins legais, administrativos e outros fins oficiais. String min: 1 / max: 50    ","categories":"","description":"","excerpt":" Boleto     Chave Descrição Tipo Caracteres (min/max)     account_id …","ref":"/docs/referencia-da-api/emissao-de-boletos/campos/","tags":"","title":"Campos"},{"body":" Nossa API é baseada em REST e a comunicação é feita utilizando métodos de requisição HTTP (GET, POST, PUT, DELETE, etc)\nPara todos os endpoints, o formato esperado para o content_type é sempre application/json. A URL base para a API em Sandbox é https://sandbox-api.openbank.stone.com.br/api/v1\nAbaixo temos um exemplo de uma requisição válida para a API em Sandbox, utilizando a ferramenta curl:\ncurl --request GET \\ --url https://sandbox-api.openbank.stone.com.br/api/v1/institutions/197 O retorno das chamadas na API será, por padrão, um objeto do tipo JSON. A chamada anterior tem a seguinte resposta:\n{ \"ispb_code\":\"16501555\", \"name\":\"Stone Pagamentos S.A.\", \"number_code\":\"197\", \"short_name\":\"STONE PAGAMENTOS S.A.\" } A chamada abaixo é usada para enviar uma TED. Nesse caso, adicionamos como headers o tipo de conteúdo como sendo application/json e a autenticação via Bearer token, como discutida na sessão de autenticação.\ncurl --request POST \\ --url https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers \\ --header 'Content-Type: application/json' \\ --header 'authorization: Bearer {token}' \\ --data '{\"amount\":3000,\"target\":{\"account\":{\"account_code\":\"654321\",\"branch_code\":\"1234\",\"institution_code\":\"260\"},\"entity\":{\"cpf\":\"05971627007\",\"name\":\"Nome do destinatário\"}},\"account_id\":\"f49a9d13-18dc-4811-b286-edd168a428b2\"}' Essas requisições geram respostas, conforme podemos ver abaixo:\n{ \"amount\":16600, \"approval_expired_at\":null, \"approved_at\":\"2019-06-07T18:57:57Z\", \"approved_by\":\"user:b2b80e9a-7412-47de-b303-2f70f3c8e279\", \"cancelled_at\":null, \"created_at\":\"2019-06-07T18:57:57Z\", \"created_by\":\"user:b2b80e9a-7412-47de-b303-2f70f3c8e279\", \"delayed_to_next_business_day\":false, \"failed_at\":null, \"fee\":0, \"finished_at\":null, \"id\":\"05e2950b-ff0c-4b8f-aa5f-7055bb8bc6f1\", \"refund_reason_code\":null, \"refund_reason_description\":null, \"refunded_at\":null, \"rejected_at\":null, \"rejected_by\":null, \"scheduled_to_effective\":null, \"scheduled_to_requested\":null, \"settled_at\":null, \"status\":\"APPROVED\", \"target\":{ \"account\":{ \"account_code\":\"1241441\", \"branch_code\":\"1241\", \"institution_code\":\"00000000\", \"institution_name\":\"Banco do Brasil S.A.\" }, \"entity\":{ \"cpf\":\"37818425098\", \"name\":\"fulano novo\" } } } \nHomologando sua Integração Uma vez que o seu sistema que integra na API do Stone OpenBank está pronto e testado em Sandbox, você vai passar pelo processo de Homologação antes de ir para Produção. Esse processo consiste em executar todas as ações que a sua Aplicação tem autorização para fazer, numa sequência definida e com o acompanhamento da equipe da Stone. Esse processo visa garantir que sua Aplicação vá funcionar conforme o esperado e que possui acesso a todos os recursos necessários. Qualquer problema encontrado durante esta fase deve ser resolvido antes de prosseguir com a subida para Produção.\n","categories":"","description":"","excerpt":" Nossa API é baseada em REST e a comunicação é feita utilizando …","ref":"/docs/guias/integracao/testando-a-api/","tags":"","title":"Testando a API"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/dry_run/payments  BODY PARAMS  barcode string\nCódigo de barras do documento.\n account_id string\nIdentificador da conta pagadora\n HEADERS  x-stone-idempotency-key string\nChave de idempotência\n Results Params    Chave Descrição     document_type Tipo do documento, podendo ser um dentre os valores à seguir: ‘boleto’ ou ‘concessionaria’   payment_being_processed? Indica se a Stone já recebeu uma solicitação de pagamento deste documento e ainda está processando a solicitação. Em caso de “true” não deve ser feito novo pagamento.     Response 200 ok content-type: application/json Body\n{ \"account_id\": \"79d8449d-94f7-454d-9a37-6f053748058f\", \"amount\": 15000, \"approval_expired_at\": null, \"approved_at\": \"2021-05-20T17:58:59Z\", \"approved_by\": \"user:893c0cfb-166f-4233-a97d-02c5943cebe0\", \"barcode\": \"19796863300000150000000025300979370888041628\", \"barcode_details\": { \"bank_code\": \"197\", \"bank_name\": \"STONE PAGAMENTOS S.A.\", \"barcode\": \"19796863300000150000000025300979370888041628\", \"expiration_date\": \"2021-05-27\", \"face_value\": 15000, \"writable_line\": \"19790000052530097937108880416287686330000015000\" }, \"cancelled_at\": null, \"cancelled_by\": null, \"created_at\": \"2021-05-20T17:58:59Z\", \"created_by\": \"user:893c0cfb-166f-4233-a97d-02c5943cebe0\", \"details\": { \"payer_trade_name\": \"E\", \"divergent_amount_auth_type\": 3, \"interest_value\": 0, \"updatable_value\": null, \"min_value\": 15000, \"payer_cpf_cnpj\": \"11725907020\", \"payment_limit_date\": \"2021-05-27\", \"writable_line\": \"19790000052530097937108880416287686330000015000\", \"total_discounted_value\": null, \"barcode\": \"19796863300000150000000025300979370888041628\", \"accepts_partial_payment\": false, \"interest_date\": null, \"status\": \"payable\", \"recipient_name\": \"Nome do CPF 11725907020\", \"payment_end_time\": null, \"discounts\": [{ \"date\": null }], \"bank_name\": null, \"discount_value\": 0, \"fine_value\": 0, \"document_payment_type\": \"33\", \"total_added_value\": null, \"unpayable_reason_code\": null, \"value\": 15000, \"unpayable_reason_description\": null, \"payer_legal_name\": \"Nome do CPF 11725907020\", \"payment_start_time\": null, \"face_value\": 15000, \"document_type\": \"boleto\", \"settlement_date\": null, \"fine_date\": null, \"max_value\": 15000, \"expiration_date\": \"2021-05-27\", \"recipient_cpf_cnpj\": \"11725907020\" }, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": null, \"id\": null, \"idempotency_key\": null, \"payment_being_processed?\": false, \"refund_reason_code\": null, \"refund_reason_description\": null, \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"request_id\": \"7d9abd369b0a19a3e26fc6b3e2f52f8c\", \"scheduled_to\": null, \"status\": \"APPROVED\", \"writable_line\": \"19790000052530097937108880416287686330000015000\" } ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/simulacoes-dry-run/simular-o-pagamento-de-um-documento/","tags":"","title":"Simular o Pagamento de Um Documento"},{"body":"GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts/contact_id  PATH PARAMS  account_id string\nIdentificador da conta.\n contact_id string\nIdentificador do contato.\n Response 200 ok content-type: application/json Body\n{ \"bank_accounts\": [ { \"account_code\": \"4567864\", \"branch_code\": \"1234\", \"id\": \"9145a75a-f86b-4cc5-bcfe-64b658c610b6\", \"institution_code\": \"00000000\" }, { \"account_code\": \"106497993\", \"branch_code\": \"1\", \"id\": \"f125f6ff-4f63-4735-92c4-f89754ed2826\", \"institution_code\": \"16501555\" } ], \"email\": null, \"id\": \"93305585-0576-4ca0-aeac-3a75f9cc3c18\", \"mobile\": null, \"name\": \"Mauro Frederico\", \"tax_id\": \"58515428881\" } ","categories":"","description":"","excerpt":"GET …","ref":"/docs/referencia-da-api/contatos/retornar-um-contato/","tags":"","title":"Retornar Um Contato"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/payments  QUERY PARAMS  account_id* string\nIdentificador da conta.\n before* string\nCursor opaco da paginação.\n after* string\nCursor opaco da paginação.\n limit* int32\nLimit de itens retornados.\nResponse 200 OK Body\n{ \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25, \"total_count\": null, \"total_count_cap_exceeded\": null }, \"data\": [ { \"account_id\": \"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:25:20Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"barcode\": \"89640000000010003139146877284281444986767347\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:25:20Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"details\": { \"bank_name\": null, \"expiration_date\": null, \"recipient_cpf_cnpj\": \"89581759239\", \"recipient_name\": \"Ana Sophia de Lara\" }, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2019-08-02T18:25:21Z\", \"id\": \"3f799fb7-ed0b-4bbe-be0e-575d0075f69d\", \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"status\": \"FINISHED\", \"writable_line\": \"896400000007010003139143687728428149449867673476\" }, { \"account_id\": \"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:23:58Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"barcode\": \"89670000000010003137498189637166095077491613\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:23:58Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"details\": { \"bank_name\": null, \"expiration_date\": null, \"recipient_cpf_cnpj\": \"17085470968\", \"recipient_name\": \"Paulo da Penha\" }, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2019-08-02T18:23:59Z\", \"id\": \"851e9719-ed26-4627-a7d4-02b54d896d54\", \"refunded_at\": \"2019-08-02T18:24:01Z\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"status\": \"REFUNDED\", \"writable_line\": \"896700000004010003137493818963716605950774916130\" }, { \"account_id\": \"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-07-31T19:12:51Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"barcode\": \"89690000000010003139343476533694034641055662\", \"cancelled_at\": null, \"created_at\": \"2019-07-31T19:12:51Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"details\": { \"bank_name\": null, \"expiration_date\": null, \"recipient_cpf_cnpj\": \"90890860998\", \"recipient_name\": \"Sr. Luiz Bulhões\" }, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2019-07-31T19:12:52Z\", \"id\": \"ace4331a-45ef-488a-9fde-c439739b9d4a\", \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"status\": \"FINISHED\", \"writable_line\": \"896900000002010003139341347653369400346410556622\" } ] } ","categories":"","description":"","excerpt":" GET https://sandbox-api.openbank.stone.com.br/api/v1/payments  QUERY …","ref":"/docs/referencia-da-api/pagamentos/listar-pagamentos/","tags":"","title":"Listar Pagamentos"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/transferencias/transferencias-externas/","tags":"","title":"Transferências Externas"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/internal_transfers  QUERY PARAMS  account_id* string Identificador da conta.\n before* string Cursor opaco da paginação.\n after* string Cursor opaco da paginação.\n limit* int32 Limite de itens retornados.\n status* string Allowed values: SCHEDULE\nResponse 200 OK content-type: application/json Body\n{ \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:00:27Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:00:27Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"description\": \"\", \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2019-08-02T18:00:28Z\", \"id\": \"c97de6a6-a35a-423d-a3df-add006a0038e\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"settled_at\": \"2019-08-02T18:00:28Z\", \"status\": \"FINISHED\", \"target\": { \"account\": { \"account_code\": \"58859\" }, \"entity\": { \"name\": \"Marcus Oliveira\" } }, \"target_account_code\": \"58859\", \"target_account_owner_name\": \"Marcus Oliveira\" }, { \"amount\": 1600, \"approval_expired_at\": null, \"approved_at\": \"2019-07-31T19:13:55Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-07-31T19:13:55Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"description\": \"\", \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2019-07-31T19:13:56Z\", \"id\": \"4aab75b9-c15f-4d27-82e2-ec9c549c1cd8\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"settled_at\": \"2019-07-31T19:13:56Z\", \"status\": \"FINISHED\", \"target\": { \"account\": { \"account_code\": \"58859\" }, \"entity\": { \"name\": \"Marcus Oliveira\" } }, \"target_account_code\": \"58859\", \"target_account_owner_name\": \"Marcus Oliveira\" } ] } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/transferencias/transferencias-internas/listar-transferencias-internas/","tags":"","title":"Listar Transferências Internas"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts  QUERY PARAMS\n paginate boolean\nAtenção\nCaso ‘true’, irá limitar a mostrar somente 50 contas, se for setado para ‘false’ mostrará todas as contas as quais o usuário tem acesso.\n  Response 200 OK content-type: application/json Body\n{ \"cursor\": { \"after\": null, \"before\": null, \"limit\": 50 }, \"data\": [ { \"account_code\": \"403881\", \"branch_code\": \"1\", \"id\": \"31091cb9-26e1-407c-a363-3578f6f28289\", \"owner_document\": \"96156305270\", \"owner_id\": \"user:23f7eb28-5ab3-4606-8b59-55e9d89f02bd\", \"owner_name\": \"Nome da Usuária\", \"created_at\": \"2019-07-31T19:13:56Z\" } ] } ","categories":"","description":"","excerpt":" GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts  QUERY …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-todas-as-contas-as-quais-o-usuario-tem-acesso/","tags":"","title":"Consultar Todas Contas às Quais Se Tem Acesso"},{"body":" Nesse endpoint serão solicitados os dados do usuário necessários para realização do envio dos mesmos para início da análise do KYC.\nPOST https://sandbox-api.openbank.stone.com.br/api/v1/users/{{user_id}}/kyc/answer \nHEADERS  authorization string Bearer token de autenticação\nPATH PARAMS  user_id* string Identificador do usuário recebido no response da chamada da API para Criar novos pedidos de usuários. Ex: ef49c647-1dc9-58e8-a559-108cdf7e65a4\nBODY PARAMS  { \"answers\": [ { \"check_id\": \"{{birthdate_id}}\", \"value\": \"2000-10-10\" }, { \"check_id\": \"{{phone_number_id}}\", \"value\": \"21971697123\" }, { \"check_id\": \"{{address_id}}\", \"value\": { \"street\": \"Rua Buarque de Macedo\", \"city\": \"Rio de Janeiro\", \"country\": \"Brasil\", \"extra\": \"\", \"postal_code\": \"22220030\", \"street_number\": \"38383838\", \"neighborhood\": \"Flamengo\", \"state\": \"RJ\", \"reference_point\": \"\" } }, { \"check_id\": \"{{document_photo_id}}\", \"value\": { \"type\": \"CNH\", \"front\": \"https://storage.googleapis.com/sdb-inside-gateway-frontend-3727/dXNlcjo4YTZmMzYzZi05Mzg4LTRiMzEtOGY0ZC05Zjk2NTAyY2Q1NzA=/53acaa13-f74b-4884-9420-f05b0ca79d25/doc_cnh_front.jpg\", \"back\": \"https://storage.googleapis.com/sdb-inside-gateway-frontend-3727/dXNlcjo4YTZmMzYzZi05Mzg4LTRiMzEtOGY0ZC05Zjk2NTAyY2Q1NzA=/53acaa13-f74b-4884-9420-f05b0ca79d25/doc_cnh_front.jpg\" } }, { \"check_id\": \"{{document_selfies_id}}\", \"value\": [ \"https:\\/\\/storage.googleapis.com\\/hml-inside-gateway-frontend-4715\\/dXNlcjplZDFhZTdjYy0zZGRhLTQ3MGMtYjlhMi02ZmI5MzJhY2U2NDc=\\/79767818-0254-4f85-9cdb-f560013036d0\\/CBED44AF-900B-4EC7-B8BF-DB7373BF4070.jpg\", \"https:\\/\\/storage.googleapis.com\\/hml-inside-gateway-frontend-4715\\/dXNlcjplZDFhZTdjYy0zZGRhLTQ3MGMtYjlhMi02ZmI5MzJhY2U2NDc=\\/b2ea2032-c7f2-4c4d-b377-90920afec4cd\\/43964A19-69C4-451B-8CF9-B66F8C8CC0A8.jpg\", \"https:\\/\\/storage.googleapis.com\\/hml-inside-gateway-frontend-4715\\/dXNlcjplZDFhZTdjYy0zZGRhLTQ3MGMtYjlhMi02ZmI5MzJhY2U2NDc=\\/6aacb6d4-91f2-416e-8b04-72cca5313984\\/591B208A-0374-4642-A38E-DAC0A9AFCF53.jpg\", \"https:\\/\\/storage.googleapis.com\\/hml-inside-gateway-frontend-4715\\/dXNlcjplZDFhZTdjYy0zZGRhLTQ3MGMtYjlhMi02ZmI5MzJhY2U2NDc=\\/43e42571-4d6e-4fda-9b45-c99276b18024\\/B6076B95-B67F-4DAE-85F1-CAB1FA013B30.jpg\", \"https:\\/\\/storage.googleapis.com\\/hml-inside-gateway-frontend-4715\\/dXNlcjplZDFhZTdjYy0zZGRhLTQ3MGMtYjlhMi02ZmI5MzJhY2U2NDc=\\/89f45dbc-5797-4f4c-b067-8d04e7dc1c6d\\/7BFB3285-BE78-4F73-B36E-087DDD82CA6A.jpg\", \"https:\\/\\/storage.googleapis.com\\/hml-inside-gateway-frontend-4715\\/dXNlcjplZDFhZTdjYy0zZGRhLTQ3MGMtYjlhMi02ZmI5MzJhY2U2NDc=\\/acddcea6-94ce-4d70-bf8a-95f8b1cfa145\\/8673814D-7B81-4DEB-A15A-CD431A91DAD2.jpg\" ] }, { \"check_id\": \"{{total_income_range_id}}\", \"value\": { \"upper_bounds\": 500000 } } ] } \nResponse  200 OK { \"checks\": [ { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"birthdate\", \"id\": \"400bf541-788f-4d5f-86b1-6519f318ca65\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"answered\", \"updated_at\": \"2021-05-31T20:10:18Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"phone_number\", \"id\": \"6747569e-ea50-4b71-9230-7e0fd8b92d6d\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"answered\", \"updated_at\": \"2021-05-31T20:10:18Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"address\", \"id\": \"4f485886-1546-4726-b4e1-baa21bb0f4a1\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"answered\", \"updated_at\": \"2021-05-31T20:10:18Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"document_photo\", \"id\": \"cbe5a713-2d02-49b3-85e4-97bf39c27354\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"answered\", \"updated_at\": \"2021-05-31T20:10:18Z\" }, { \"context\": null, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"document_selfies\", \"id\": \"5b6d185d-e080-4534-b346-389fffae7294\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"answered\", \"updated_at\": \"2021-05-31T20:10:18Z\" }, { \"context\": { \"income_ranges\": [ { \"formatted\": \"Até R$ 5.000,00\", \"range\": { \"lower_bounds\": null, \"upper_bounds\": 500000 } }, { \"formatted\": \"Entre R$ 5.000,01 e R$ 10.000,00\", \"range\": { \"lower_bounds\": 500001, \"upper_bounds\": 1000000 } }, { \"formatted\": \"Entre R$ 10.000,01 e R$ 20.000,00\", \"range\": { \"lower_bounds\": 1000001, \"upper_bounds\": 2000000 } }, { \"formatted\": \"Entre R$ 20.000,01 e R$ 100.000,00\", \"range\": { \"lower_bounds\": 2000001, \"upper_bounds\": 10000000 } }, { \"formatted\": \"Entre R$ 100.000,01 e R$ 1.000.000,00\", \"range\": { \"lower_bounds\": 10000001, \"upper_bounds\": 100000000 } }, { \"formatted\": \"Mais de R$ 1.000.000,00\", \"range\": { \"lower_bounds\": 100000001, \"upper_bounds\": null } } ] }, \"created_at\": \"2021-05-31T15:04:48Z\", \"detailed_reason\": \"Precisamos de algumas informações\", \"field_type\": \"total_income_range\", \"id\": \"a24ad007-2d63-4108-8340-16b843873be2\", \"input_type\": \"user_input\", \"reason\": \"account_request\", \"status\": \"answered\", \"updated_at\": \"2021-05-31T20:10:18Z\" } ], \"context\": {}, \"created_at\": \"2021-05-31T15:04:48Z\", \"id\": \"50a22e82-1fe6-407b-b76c-986f46db60e8\", \"input_type\": \"user_input\", \"is_mandatory\": true, \"reason\": \"account_request\", \"status\": \"answered\", \"updated_at\": \"2021-05-31T20:10:18Z\", \"user_id\": \"ef49c647-1dc9-47e8-a559-108cdf7e65a4\" } ","categories":"","description":"","excerpt":" Nesse endpoint serão solicitados os dados do usuário necessários para …","ref":"/docs/referencia-da-api/kyc/enviar-dados-do-usuario/","tags":"","title":"Enviar dados do usuário"},{"body":" Fluxo da recarga    Para efetuar a recarga de créditos para uma Tv por Assinatura é necessário que o cliente nos informe o CPF ou Código do Assinante e escolha o provedor.\n  Após a confirmação, a Celcoin adiciona os créditos junto ao provedor.\n  Provedores disponíveis   Claro TV; Oi TV; SKY TV.  Atenção\nPara cada provedor, há um diferente plano/valor disponível.\n Horário de funcionamento A liquidação da recarga poderá ser executada em até 24 horas, porém, costuma ser efetuada em questão de segundos.  Ações a serem executadas para recarga de TV por Assinatura  1) Listar todos os provedores para a TV GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/tv/providers Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Response 200 ok { \"providers\": [ { \"name\": \"Claro TV\", \"id\": 2126 }, { \"name\": \"Oi TV\", \"id\": 2140 }, { \"name\": \"SKY TV\", \"id\": 2127 } ] } \n2) Listar todos os valores para o provedor GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/tv/values/{provider-id} Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Responses 200 ok - Name: Claro TV / id: 2126\n{ \"product\": [ { \"product_name\": \"R$ 18,00 - INICIAL 30d\", \"value\": 1800 }, { \"product_name\": \"R$ 36,00 - LIGHT 15d\", \"value\": 3600 }, { \"product_name\": \"R$ 55,00 - MIX 15d\", \"value\": 5500 }, { \"product_name\": \"R$ 58,00 - LIGHT 30d\", \"value\": 5800 }, { \"product_name\": \"R$ 80,00 - TOP 15d\", \"value\": 8000 }, { \"product_name\": \"R$ 86,00 - MIX 30d\", \"value\": 8600 }, { \"product_name\": \"R$ 109,00 - TOP 30d\", \"value\": 10900 } ] } …\n3) Simular uma recarga para a TV POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/tv/dry-run Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 0, \"client_code\": \"10036389709\", \"provider_id\": \"2126\" } Response 202 Accepted { \"amount\": 10900, \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"provider_id\": \"2126\", \"client_code\": \"10036389709\" } \n4) Executar uma recarga para a TV POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/tv Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\", \"x-stone-challenge-solution\": \"81080d67-aac9-415b-868f-4403243201d3\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 4490, \"client_code\": \"10036389709\", \"provider_id\": \"2140\" } Response 200 ok { \"id\": \"60d9d4f5-e4ea-4548-b41b-58662f3f2dfd\", \"receipt\": \" PROTOCOLO 0006463141\\n1 07/04/2021 09:48\\nTERM 228005 AGENTE 228005 AUTE 07295\\n----------------------------------------\\nAUTO 979250 RECARGA\\n\\nPRODUTO: OI TV\\nASSINANTE: 10036389706\\nTELEFONE: 11 941497981\\nNSU OPERADORA: 610761\\nDATA: 07/04/2021 09:48\\nVALOR: R$ 44,90\\n\\nVIVO TURBO: INTERNET + LIGACOES E SMS\\nILIMITADOS PARA VIVO (CEL E FIXO, USANDO\\nO 15)APENAS R$9,99 POR SEMANA. LIGUE\\n*9003 E CADASTRE SE!\\n----------------------------------------\\n\\n\", \"transaction_id\": \"7b367d74-f2b8-4088-8329-6426816ff995\", \"pin\": \"\" } \nStatus_code: 403 Caso receba como resposta o status_code: 403, clique aqui para ter acesso ao fluxo de autorização do challenge que deverá ser enviado no Header do Request (x-stone-challenge-solution).  ","categories":"","description":"","excerpt":" Fluxo da recarga    Para efetuar a recarga de créditos para uma Tv …","ref":"/docs/referencia-da-api/recargas/recarga-de-tv-por-assinatura/","tags":"","title":"Recarga para TV por Assinatura"},{"body":" Horário de funcionamento A API de Link de Pagamentos fica disponível todos os dias da semana, 24 horas por dia.  POST https://sandbox-api.openbank.stone.com.br/api/v1/payment_links/orders \nBody Request { \"account_id\": \"436df6e1-1d38-4637-892d-106a5e0b3154\", \"items\": [{ \"amount\": 13000, \"description\": \"Máquina para cortar cabelos sem fio\", \"quantity\": 1 }], \"customer\": { \"name\": \"Antonio Brasil de Castro\" }, \"closed\": true, \"payments\": [{ \"amount\": 13000, \"payment_method\": \"checkout\", \"checkout\": { \"expires_in\": 10080, \"skip_checkout_success_page\": true, \"billing_address_editable\": false, \"customer_editable\": true, \"accepted_payment_methods\": [ \"credit_card\" ], \"accepted_multi_payment_methods\": [], \"success_url\": \"https://sandbox-link.openbank.stone.com.br/sucesso\", \"credit_card\": { \"capture\": true, \"installments\": [{ \"number\": 1, \"total\": 13000 }, { \"number\": 2, \"total\": 13000 }, { \"number\": 3, \"total\": 13000 } ] } } }] } Response { \"amount\": 13000, \"checkouts\": [{ \"accepted_multi_payment_methods\": [], \"accepted_payment_methods\": [ \"credit_card\" ], \"amount\": 13000, \"billing_address\": {}, \"billing_address_editable\": true, \"created_at\": \"2020-05-15T20:27:36Z\", \"credit_card\": { \"authentication\": { \"threed_secure\": {}, \"type\": \"none\" }, \"capture\": true, \"installments\": [{ \"number\": 1, \"total\": 13000 }, { \"number\": 2, \"total\": 13000 }, { \"number\": 3, \"total\": 13000 } ] }, \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-15T20:27:35Z\", \"delinquent\": false, \"id\": \"cus_bvYkAxFVxTLyo8ex\", \"name\": \"Antonio Brasil de Castro\", \"phones\": {}, \"updated_at\": \"2020-05-15T20:27:35Z\" }, \"customer_editable\": true, \"expires_at\": \"2020-05-22T20:27:36Z\", \"id\": \"chk_WpMBK50cx8hZlnPA\", \"metadata\": {}, \"payment_url\": \"https://api.mundipagg.com/checkout/v1/orders/chk_WpMBK50cx8hZlnPA\", \"shippable\": false, \"skip_checkout_success_page\": true, \"status\": \"open\", \"success_url\": \"https://sandbox-link.openbank.stone.com.br/sucesso\", \"updated_at\": \"2020-05-15T20:27:36Z\" }], \"closed\": false, \"code\": \"R03FYWF3OR\", \"created_at\": \"2020-05-15T20:27:35Z\", \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-15T20:27:35Z\", \"delinquent\": false, \"id\": \"cus_bvYkAxFVxTLyo8ex\", \"name\": \"Antonio Brasil de Castro\", \"phones\": {}, \"updated_at\": \"2020-05-15T20:27:35Z\" }, \"id\": \"or_WzqJoA5HnUaLo1YL\", \"items\": [{ \"amount\": 13000, \"created_at\": \"2020-05-15T20:27:35Z\", \"description\": \"Máquina para cortar cabelos sem fio\", \"id\": \"oi_534KzWos4xcyNE0v\", \"quantity\": 1, \"status\": \"active\", \"type\": \"product\", \"updated_at\": \"2020-05-15T20:27:35Z\" } ], \"status\": \"pending\", \"updated_at\": \"2020-05-15T20:27:36Z\" } ","categories":"","description":"","excerpt":" Horário de funcionamento A API de Link de Pagamentos fica disponível …","ref":"/docs/referencia-da-api/link-de-pagamentos/criar-link-de-pagamento/","tags":"","title":"Criar Link de Pagamento"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/transferencias/","tags":"","title":"Transferências"},{"body":" Todos os valores na API serão sempre inteiros e expressos em centavos de Reais.\nAssim, o valor de um real (R$1,00) ficaria: 100.\n","categories":"","description":"","excerpt":" Todos os valores na API serão sempre inteiros e expressos em centavos …","ref":"/docs/referencia-da-api/padroes-da-api/valores-financeiros/","tags":"","title":"Valores Financeiros"},{"body":"   Chave Descrição Tipo     balance Saldo da conta livre para movimentação. Deve ser somado ao blocked_balance para calcular o saldo total. Integer   blocked_balance Saldo da conta bloqueado. Deve ser somado ao balance para calcular o saldo total. Integer   scheduled_balance Soma do valor de transações agendadas. Nâo tem relação direta com o saldo da conta, podendo inclusive ter um valor maior que o mesmo. Integer    ","categories":"","description":"","excerpt":"   Chave Descrição Tipo     balance Saldo da conta livre para …","ref":"/docs/referencia-da-api/dados-da-conta/o-objeto-saldo/","tags":"","title":"O Objeto Saldo"},{"body":" Horário de funcionamento   API de Boletos\nFica disponível para emissão todos os dias da semana, 24 horas por dia;\nO registro de boletos é automático, executado no momento da criação do boleto, pode demorar de 3 segundos a 15 minutos a depender do volume de boletos emitidos.\n    Liquidação de Boletos\nPara boletos emitidos e pagos na Stone terão a sua liquidação efetuada no mesmo dia. Boletos emitidos na Stone e pagos em outras instituições, serão liquidados em até D+2 dias úteis.\n   POST https://sandbox-api.openbank.stone.com.br/api/v1/barcode_payment_invoices \nBODY PARAMS  account_id* string Identificador da conta que irá gerar o documento.\n amount* int32 Valor do boleto em centavos de Real, ou seja, 20 reais fica 2000.\n expiration_date* string Data de vencimento do boleto bancário. Mesmo depois dessa data expirar o pagamento ainda pode ser feito. Formato: yyyy-mm-dd\n limit_date string Data limite para pagamento do boleto bancário. Deve ser igual ou maior que data de vencimento. Se não informada, será usada a expiration_date.\n invoice_type* string Tipo de boleto bancário. Valores suportados: proposal, deposit e bill_of_exchange.\n customer object document string (obrigatório) Número do documento do pagador sem pontos. Não é obrigatório no tipo deposit. legal_name string (obrigatório) É o nome que identifica o pagador para fins legais, administrativos e outros fins oficiais. Não é obrigatório no tipo deposit. trade_name string (obrigatório) Nome fantasia do pagador. Obrigatório no caso de pagador PJ.\n discounts array_of_objects \ndate string Data até a qual o desconto deve ser aplicado. Formato ISO8601 \"YYYY-MM-DD\". Só é aceito no tipo de cobrança. value string Valor percentual (%) do desconto que será aplicado ao boleto. O valor do deve ser maior que 0.0 e até 90.0. Formato decimal. Ex: “20.0”. Só é aceito no tipo de cobrança.\n fine object \ndate string (obrigatório) Data que define o dia a partir do qual a multa deve ser aplicada ao boleto. Caso não seja infromada será consiederada a data de validdade. Só é aceito no tipo de cobrança. value string (obrigatório) Valor percentual (%) da multa que será aplicada ao boleto. O valor do deve ser maior que 0.0 e até 2.0. Formato decimal. Ex: “2.0”. Só é aceito no tipo de cobrança.\n interest object \ndate string (obrigatório) Data que define o dia a partir do qual os juros passam a ser aplicados ao boleto. Só é aceito no tipo de cobrança. value string (obrigatório) Valor parcentual (%) dos juros que será aplicado ao boleto por mês. O valor do deve ser maior que 0.0 e até 1.0. Formato decimal. Ex: “1.0”. Só é aceito no tipo de cobrança.\n receiver object \nlegal_name string É o nome que identifica o sacado avalista para fins legais, administrativos e outros fins oficiais. document string Número do documento do sacador avalista.\n\nHEADERS  x-stone-idempotency-key string Chave de idempotência\nData limite no tipo proposal A limit_date será sempre igual a expiration_date para boletos do tipo proposal uma vez que a proposta é válida somente até a data do vencimento.\n Response 200 OK content-type: application/json Body\n{ \"account_id\": \"ec363b21-113f-44e9-8cc3-dfcdb3cc2dc3\", \"amount\": 2100, \"barcode\": \"19797845600000021000000063139072468215929006\", \"beneficiary\": { \"account_code\": \"1085737\", \"branch_code\": \"1\", \"document\": \"39809096038\", \"document_type\": \"cpf\", \"legal_name\": \"Pereira da Silva\", \"trade_name\": null }, \"created_at\": \"2020-07-27T18:25:38Z\", \"created_by\": \"user:34a071d5-e1d4-4cb0-acf7-ca9b106fec65\", \"customer\": { \"document\": \"11121744590\", \"document_type\": \"cpf\", \"legal_name\": \"Pereira da Silva\", \"trade_name\": null }, \"discounts\": [ { \"date\": \"2020-11-20\", \"value\": \"0.1\" } ], \"expiration_date\": \"2020-12-01\", \"fee\": 0, \"fee_metadata\": { \"billing_exemption_participant\": true, \"fee\": 0, \"max_free\": 5, \"original_fee\": 200, \"remaining_free\": 5 }, \"fine\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"id\": \"172caf21-13de-4baa-9823-a21ac17ba8fa\", \"interest\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"invoice_type\": \"bill_of_exchange\", \"issuance_date\": \"2020-07-27\", \"limit_date\": \"2021-02-01\", \"our_number\": \"63139072468215929006\", \"customer\": { \"document\": \"11121740790\", \"document_type\": \"cpf\", \"legal_name\": \"Pereira da Silva\", \"trade_name\": null }, \"receiver\": null, \"registered_at\": null, \"settled_at\": null, \"status\": \"CREATED\", \"writable_line\": \"19790000056313907246482159290061784560000002100\" } ","categories":"","description":"","excerpt":" Horário de funcionamento   API de Boletos\nFica disponível para …","ref":"/docs/referencia-da-api/emissao-de-boletos/emitir-boleto/","tags":"","title":"Emitir Boleto"},{"body":"Como obter acesso as contas de pagamento.\n Consentimento é o processo em que o usuário, dono da conta, acessa um link gerado pela Aplicação Parceira e através dele permite o acesso a suas informações e a sua conta de pagamento.\nToda vez que uma Aplicação faz um pedido de consentimento a um usuário, o mesmo englobará todos os escopos que aquela aplicação tem. No fluxo serão listados todos os escopos que estão sendo solicitados.\nFluxo de consentimento Para realizar esse processo, o usuário precisa receber do sistema do parceiro um link que o direcione para uma página da Stone. Nessa página o usuário poderá escolher a quais contas de pagamento ele deseja conceder o acesso. Será necessário que o sistema do parceiro gere esse link, como descrito abaixo. O tempo de expiração do link deve ser de no máximo duas horas.\nCaso o usuário não acesse o link disponibilizado dentro de seu intervalo de tempo de vida, ele irá expirar. Nesse caso não haverá a concessão do acesso e não será mais possível obtê-lo através desse mesmo link, precisando gerar um novo.\nTambém é possível que o usuário acesse o link mas não conceda o acesso, ao escolher a opção Ignorar. Nesse caso o usuário será redirecionado para uma página do sistema do parceiro e não será possível para ele operar na conta do usuário.\nHavendo a concessão de acesso, o usuário será redirecionado para uma página da Aplicação e o parceiro obterá as autorizações necessárias para operar na conta.\nO sistema do parceiro será informado do ocorrido para cada um desses três casos.\nObserve que no fluxo atual é preciso que o parceiro direcione seu cliente a abrir uma Conta Stone. Quando o usuário estiver com sua Conta Stone aberta, o parceiro poderá realizar o processo de consentimento para operar em sua conta.\nGerando um link de consentimento Uma vez cadastrada e autenticada a Aplicação, a primeira funcionalidade a ser desenvolvida é o consentimento.\nPara dar início ao processo de consentimento, basta que o desenvolvedor gere um link com os parâmetros necessários conforme especificados abaixo. Toda a interação com o usuário será gerida pela nossa plataforma.\nApós o link ser gerado, ele deverá ser enviado pela Aplicação Parceira para o usuário. Isso deve ser feito dentro da própria Aplicação como, por exemplo, através de um botão. O link de consentimento não deve ser enviado por e-mail para o usuário sob hipótese alguma.\nO link de consentimento deve conter três parâmetros:  client_id: o ClientID recebido pelo desenvolvedor pós-cadastro; type: no caso, será sempre o valor “consent”; jwt: será um token gerado localmente pelo desenvolvedor com a mesma chave privada e algoritmo que ele usa para se autenticar. Mais detalhes abaixo.  Com estes parâmetros, basta gerar um link no seguinte formato (por ambiente):\n Sandbox: https://sandbox.conta.stone.com.br/consentimento?client_id=CLIENT_ID\u0026jwt=JWT Produção: https://conta.stone.com.br/consentimento?client_id=CLIENT_ID\u0026jwt=JWT  Substituindo CLIENT_ID e JWT por seus respectivos valores.\nGerando o token Gerar um token JWT de consentimento é parecido com o processo de gerar um token de autenticação. O token deve conter os claims:\n   Campo Descrição Tipo     Obrigatórios     type Será sempre “consent” neste caso. String   client_id Será o ClientID da Aplicação Parceira. String   redirect_uri A URI para redirecionamento após a ação do usuário. Esta URI foi informada previamente no cadastro da Aplicação Parceira. Caso seja enviada uma URI diferente, retornará erro. String   session_metadata Um objeto que contenha qualquer chave relevante para o parceiro identificar a sessão do usuário. Este valor estará presente na URI de redirecionamento e não pode ser nulo ou um mapa vazio. Objeto   iss Usar o client_id da Aplicação. String   iat Momento em que o token foi gerado. É um timestamp UTC. Exemplo: “iat”: 1542235633. Int   aud accounts-hubid@openbank.stone.com.br String   jti Identificador único do token gerado. Normalmente se utiliza um UUID. String   nbf É o momento em que o token passa a ser válido. Na maioria dos casos terá o mesmo valor que iat (issued at) pois queremos que ele esteja válido logo a partir do momento de geração. Int   exp Momento de expiração do token em segundos desde o início da era UNIX (1970). É um timestamp UTC e não pode ser maior que 2 horas. Exemplo: “exp”: 1542235633 Int    Observe que é preciso assinar o token JWT com a chave privada da aplicação e o algoritmo RS256, assim como é feito para o token de autenticação. Dessa forma, neste token também é preciso incluir um header com as informações sobre o algoritmo de criptografia utilizado, entre outros metadados, como um id da chave utilizada. Por exemplo:\n{ \"alg\": \"RS256\", \"typ\": \"JWT\" }  Atenção\nApesar do ClientID ser o disponibilizado pela Stone ao parceiro no Cadastro da Aplicação e o mesmo utilizado para montar o token de autenticação, observe que o nome do campo para esse token é client_id, diferente de clientId utilizado no token de autenticação.\n Assim, um exemplo de claims para este token seria:\n{ \"type\": \"consent\", \"client_id\": \"MY CLIENT ID\", \"iss\": \"MY CLIENT ID\", \"redirect_uri\": \"https://mypreviouslyregistereduri.com\", \"session_metadata\": { \"user_session\": \"xxxxxxxxxxxxxxxxxxxxx\", }, \"iat\": 1542235633, \"nbf\": 1542235633, \"exp\": 1549069563, \"jti\": \"41e8aa9f-bb9c-4fd2-9953-2595dbbd5a83\", \"aud\": \"accounts-hubid@openbank.stone.com.br\" } \nRedirect callback O usuário irá visualizar as permissões às quais a Aplicação Parceira está pedindo acesso e poderá optar por ignorar ou consentir o acesso.\nEm ambos os casos, faremos um redirecionamento para a URI cadastrada no token. Acrescentaremos na URI os seguintes campos:\n   Chave Valor     session_metadata Com os mesmos os valores de passados no token.   consent_result Indica o resultado do pedido de consentimento e pode ter os seguintes valores: - “ignored” caso o usuário não dê consentimento, - “approved” caso ele dê o consentimento, - “already_granted” caso o consentimento desse recurso para essa aplicação já tenha sido dado anteriormente.   resource_id Identificador do resource ao qual o consentimento foi dado. Só é retornado quando o resultado do consent é “approved”.    Webhook Quando o consent_result é approved é enviado também o webhook consent_requested com os dados do consentimento dado.  Assim, fica fácil para o desenvolvedor prover uma experiência para ambos os casos: basta validar estes campos!\nFluxo para o usuário Para uma integração Open Banking de sucesso é essencial considerar a experiência do usuário, principalmente em fluxos de redirecionamento como para o consentimento. No início desta sessão detalhamos o passo a passo desse procedimento, neste tópico vamos exemplificar algumas das principais telas utilizadas.\nAo seguir o link gerado pelo desenvolvedor, o usuário será redirecionado para uma página da Stone. Solicitaremos ao dono o acesso à sua conta, explicitando quais permissões ele está concedendo à aplicação parceira. Podemos observar abaixo um exemplo de tela em que isso ocorre.\nCaso o usuário opte por conceder o acesso no botão Permitir e ocorra tudo bem, será exibida uma tela de sucesso, confirmando que a permissão foi concedida. Podemos observar um exemplo dessa tela abaixo.\nAo clicar no botão Ok, entendi ele será redirecionado para uma página da aplicação parceira, cujo endereço foi definido no cadastro da aplicação, em Redirect URI.\nÉ possível que ocorra também um caso em que o usuário já concedeu o acesso à aplicação parceira. Neste caso, o usuário irá visualizar uma tela como o seguinte exemplo.\nAssim como no caso anterior, ele também será redirecionado para uma página da aplicação parceira ao clicar no botão Ok, entendi.\n","categories":"","description":"","excerpt":"Como obter acesso as contas de pagamento.\n Consentimento é o processo …","ref":"/docs/guias/integracao/consentimento/","tags":"","title":"Consentimento"},{"body":"POST https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts/contact_id  PATH PARAMS  account_id string\nIdentificador da conta.\n contact_id string\nIdentificador do contato.\n BODY PARAMS  name string\nNome do contato.\n tax_id string\nDocumento do contato.\n email string\nE-mail do contato.\n mobile string\nTelefone do contato.\n HEADERS  x-stone-idempotency-key string\nChave de idempotência.\n Response 200 ok content-type: application/json Body\n{ \"bank_accounts\": [], \"email\": null, \"id\": \"93305585-0576-4ca0-aeac-3a75f9cc3c18\", \"mobile\": null, \"name\": \"Mauro Barcelos\", \"tax_id\": \"58515428881\" } ","categories":"","description":"","excerpt":"POST …","ref":"/docs/referencia-da-api/contatos/atualizar-contato/","tags":"","title":"Atualizar Contato"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/payments/payment_id  PATH PARAMS  payment_id* string\nIdentificador do pagamento.\nResponse 200 OK Body\n{ \"account_id\": \"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:25:20Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"barcode\": \"89640000000010003139146877284281444986767347\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:25:20Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"details\": { \"bank_name\": null, \"expiration_date\": null, \"recipient_cpf_cnpj\": \"89581759239\", \"recipient_name\": \"Ana Sophia de Lara\" }, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2019-08-02T18:25:21Z\", \"id\": \"3f799fb7-ed0b-4bbe-be0e-575d0075f69d\", \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"status\": \"FINISHED\", \"writable_line\": \"896400000007010003139143687728428149449867673476\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/pagamentos/retornar-um-pagamento/","tags":"","title":"Retornar Um Pagamento"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/internal_transfers/transfer_id \nPATH PARAMS  transfer_id string Identificador da transferência.\nResponse 200 OK content-type: application/json Body\n{ \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:00:27Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:00:27Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"description\": \"\", \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2019-08-02T18:00:28Z\", \"id\": \"c97de6a6-a35a-423d-a3df-add006a0038e\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"settled_at\": \"2019-08-02T18:00:28Z\", \"status\": \"FINISHED\", \"target\": { \"account\": { \"account_code\": \"58859\" }, \"entity\": { \"name\": \"Antonio Nunes\" } }, \"target_account_code\": \"58859\", \"target_account_owner_name\": \"Antonio Nunes\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/transferencias/transferencias-internas/retornando-uma-transferencia-interna/","tags":"","title":"Retornando uma Transferência Interna"},{"body":" Fluxo da recarga  O Fluxo de recarga se diferencia para os dois Provedores disponíveis:\n Uber    Para efetuar a recarga de créditos para o Provedor Uber é necessário que o cliente selecione e escolha o plano/valor.\n  Após a confirmação da recarga para o Provedor Uber, retornamos o código PIN ao cliente.\n  Com o código PIN em mãos, o cliente acessa o site/app do provedor e resgata os céditos obtidos.\n   Bilhete Único de SP    Para efetuar a recarga de créditos para o Provedor Bilhete Único SP é necessário que o cliente informe o número do bilhete único.\n  É necessário que o cliente informe o tipo de recarga (Comun / Diário / Mensal).\n  Por fim, informar o valor da recarga.\n  Provedores disponíveis   Uber; Bilhete Único de SP.  Atenção\n  Uber:\nO valor escolhido para recarga, deverá estar entre R$1,00 e R$121,00.\n    Bilhete único de SP:\nO valor de recarga varia de acordo com as quotas mínimas/máximas pré-estabelecidas.\n   Horário de funcionamento   Uber:\nA liquidação da recarga é executada no provedor em questão de segundos. O resgaste dos créditos é feito ao informar o Código PIN retornado após a confirmação da recarga.\n    Bilhete único de SP:\nO BU é recarregado após o cliente aproximar o cartão à catraca.\n   Ações a serem executadas para recarga de Meios de Transporte  1) Listar todos os provedores para Meios de Transporte GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/transport/providers Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Response 200 ok { \"providers\": [ { \"name\": \"Bilhete unico\", \"id\": 2142 }, { \"name\": \"Uber\", \"id\": 2132 } ] } \n2) Listar todos os valores para o provedor GET https://sandbox-api.openbank.stone.com.br/api/v1/topups/transport/values/{provider-id} Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Responses 200 ok - Name: Uber / id: 2132\n{ \"product\": [ { \"value\": 2000 } ] } \n3) Simular uma recarga para Meios de Transporte POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/transport/dry-run Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 2000, \"client_code\": \"10036389709\", \"product_code\": 0, \"product_quota\": 0, \"provider_id\": \"2132\" } Response 202 Accepted { \"amount\": 2000, \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"provider_id\": \"2132\", \"client_code\": \"10036389709\" } \n4) Executar uma recarga para Meios de Transporte POST https://sandbox-api.openbank.stone.com.br/api/v1/topups/transport Header request { \"authorization\": \"Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI4d3NUd3BhYTRJWUZIYWV5ZFRubnRoRC1UaVlCaU9kanNmOGx6RUlMR1hVIn0.eyJqdGkiOiJiODQ0NDc4OS01ODE5LTQ4MTUtYjc1NC04MDU5NmMyYTg4MGYiLCJleHAiOjE2MTY2OTk5MjQsIm5iZiI6MCwiaWF0IjoxNjE2Njk5MDI0LCJpc3MiOiJodHRwczovL3NhbmRib3gtYWNjb3VudHMub3BlbmJhbmsuc3RvbmUuY29tLmJyL2F1dGgvcmVhbG1zL3N0b25lX2JhbmsiLCJzdWIiOiJhYzE5MGRmYy00YTBjLTQ5ODUtYmQwNi03NWE5Zjc3NjU0MTMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiIwNjVlY2IwOC0yNDM5LTQwYzAtOGUxMy0yYjQzYzIxNzQzZTMiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIwMjhlMjY3ZS0zMjYwLTQzNDMtODQ2ZS1hOTRkNzlmZTFjYWEiLCJhY3IiOiIxIiwic2NvcGUiOiJwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6d3JpdGUgcGF5bWVudGFjY291bnQ6Y29udGFjdDp3cml0ZSBlbnRpdHk6d3JpdGUgcGF5bWVudGFjY291bnQ6cmVhZCBwYXltZW50YWNjb3VudDp0cmFuc2ZlcnM6aW50ZXJuYWwgcGF5bWVudGFjY291bnQ6ZmVlczpyZWFkIHBheW1lbnRhY2NvdW50Omluc3RhbnRwYXltZW50IHBheW1lbnRhY2NvdW50OnBheW1lbnRzIHN0b25lX3N1YmplY3RfaWQgcGF5bWVudGFjY291bnQ6Y29udGFjdDpyZWFkIHNpZ251cDpwYXltZW50YWNjb3VudCBwYXltZW50YWNjb3VudDpib2xldG9pc3N1YW5jZSBwYXltZW50YWNjb3VudDpwYXltZW50bGlua3M6cmVhZCBwYXltZW50YWNjb3VudDpwYXlyb2xsczpyZWFkIHBheW1lbnRhY2NvdW50OnBheXJvbGxzOndyaXRlIHBheW1lbnRhY2NvdW50OnRyYW5zZmVyczpleHRlcm5hbCBlbnRpdHk6cmVhZCIsImNsaWVudElkIjoiMDY1ZWNiMDgtMjQzOS00MGMwLThlMTMtMmI0M2MyMTc0M2UzIiwiY2xpZW50SG9zdCI6IjEwLjEwLjEuMTQ5Iiwic3RvbmVfc3ViamVjdF9pZCI6ImFwcGxpY2F0aW9uOjA2NWVjYjA4LTI0MzktNDBjMC04ZTEzLTJiNDNjMjE3NDNlMyIsImNsaWVudEFkZHJlc3MiOiIxMC4xMC4xLjE0OSJ9.PlAhWLgC2W10H9emucF4obcJhwR92EogMNRIWUej4z-P-p3UaStYlaYd5Bfx4hl7da4ly62K1LEBI7LOqCFkbHMlnJfglp3dFS2M3iHZ571BNSmCff3wUiFy6zoHxFaKEUPy0V8e6mCQwFuapdIvDocA4Z4xYh049dWEwbJ2uevV3V_Q-RL3me8vykNTWGiT-dmyWvFN-XAq889_F1ZQskHsLz-ZtlrFw3XjitnLvEJbg9iyxVA7AuwnexBIQS4gU9QwMXcJjij9JowYbLu4ANUITXU01Jf5hxMYq1oSobOL3-RuGWJLoPOXkJyAbOm5hS15QgSuwp_qOU8VAEa3Yg\", \"x-stone-idempotency-key\": \"0001\", \"x-stone-challenge-solution\": \"81080d67-aac9-415b-868f-4403243201d3\" } Body Request { \"account_id\": \"e4043bb5-542b-46f6-bcbc-0e63d37e1c47\", \"amount\": 2000, \"client_code\": \"10036389709\", \"product_code\": 0, \"product_quota\": 0, \"provider_id\": \"2132\" } Response 200 ok { \"id\": \"d62e70a0-bb44-4fa0-8568-633f82fb00d0\", \"receipt\": \" PROTOCOLO 0002751870\\n1 07/04/2021 10:29\\nTERM 228005 AGENTE 228005 AUTE 09794\\n----------------------------------------\\nAUTO 981339 \\n\u003cVIA1\u003e\\nESTE CUPOM NAO TEM VALOR FISCAL\\nPRODUTO: UBER\\nVALOR: R$ 20,00\\nPIN: 6365-4427-6400-1327\\nSERIE: 00000000\\nTELEFONE: 99 00000000\\n\\nPASSO A PASSO PARA RESGATAR SEUS\\nCREDITOS UBER:\\n1. ABRA O APP UBER E ACESSE A SECAO\\nPAGAMENTO\\n2. TOQUE EM ADICIONAR FORMA DE PAGAMENTO\\n3. SELECIONE UBER PRE-PAGO\\n4. INSIRA O CODIGO PIN DESTE RECIBO\\nMAIS INFORMACOES: UBER.COM/LEGAL/GIFT/BR\\n\\nAPOS O USO, INUTILIZE ESTE CUPOM\\nIS2B - INTEGRATED SOLUTIONS TO BUSINESS\\n\\n\\n\\n\\n\u003c/VIA1\u003e----------------------------------------\\n\\n\", \"transaction_id\": \"0ae808a6-3a8f-4838-afd8-44fce7218c9a\", \"pin\": \"6365-4427-6400-1327\" } \nStatus_code: 403 Caso receba como resposta o status_code: 403, clique aqui para ter acesso ao fluxo de autorização do challenge que deverá ser enviado no Header do Request (x-stone-challenge-solution).  ","categories":"","description":"","excerpt":" Fluxo da recarga  O Fluxo de recarga se diferencia para os dois …","ref":"/docs/referencia-da-api/recargas/recarga-de-meios-de-transporte/","tags":"","title":"Recarga para Meios de Transporte"},{"body":" Para cancelar um link de pagamento, temos que fechar um pedido, o que vai passar a impedir que qualquer inclusão de item ou novas transações sejam feitas para aquele pedido específico.\nAtenção\nNo corpo da requisição deve ser sinalizada a alteração de status para canceled.\n PATCH https://sandbox-api.openbank.stone.com.br/api/v1/payment_links/orders/{order_id}/closed \nBody Request  { \"account_id\": \"account_id\", \"status\": \"canceled\" } \nResponse { \"amount\": 1000, \"checkouts\": [{ \"accepted_multi_payment_methods\": [], \"accepted_payment_methods\": [ \"credit_card\" ], \"amount\": 1000, \"billing_address\": {}, \"billing_address_editable\": true, \"created_at\": \"2020-05-15T02:06:14Z\", \"credit_card\": { \"authentication\": { \"threed_secure\": {}, \"type\": \"none\" }, \"capture\": true, \"installments\": [{ \"number\": 1, \"total\": 1000 }, { \"number\": 2, \"total\": 1000 }, { \"number\": 3, \"total\": 1000 }, { \"number\": 4, \"total\": 1000 }, { \"number\": 5, \"total\": 1000 }, { \"number\": 6, \"total\": 1000 }, { \"number\": 7, \"total\": 1000 }, { \"number\": 8, \"total\": 1000 }, { \"number\": 9, \"total\": 1000 }, { \"number\": 10, \"total\": 1000 }, { \"number\": 11, \"total\": 1000 }, { \"number\": 12, \"total\": 1000 } ] }, \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-07T23:33:15Z\", \"delinquent\": false, \"document\": 12345678912, \"email\": \"gabriel@email.com\", \"id\": \"cus_WVbg8Qkc0WIelO4k\", \"name\": \"Gabriel Tavares\", \"phones\": { \"mobile_phone\": { \"area_code\": 21, \"country_code\": 55, \"number\": 987654321 } }, \"type\": \"individual\", \"updated_at\": \"2020-05-15T02:02:24Z\" }, \"customer_editable\": true, \"expires_at\": \"2020-05-16T02:06:14Z\", \"id\": \"chk_YMG51zkcyuWz9pXN\", \"metadata\": {}, \"payment_url\": \"https://api.mundipagg.com/checkout/v1/orders/chk_YMG51zkcyuWz9pXN\", \"shippable\": false, \"skip_checkout_success_page\": true, \"status\": \"open\", \"success_url\": \"https://sandbox-link.openbank.stone.com.br/t/sucesso\", \"updated_at\": \"2020-05-15T02:06:14Z\" }], \"closed\": true, \"closed_at\": \"2020-05-15T18:54:35Z\", \"code\": \"Y0PNSR8FOK\", \"created_at\": \"2020-05-15T02:06:14Z\", \"currency\": \"BRL\", \"customer\": { \"created_at\": \"2020-05-07T23:33:15Z\", \"delinquent\": false, \"document\": 12345678912, \"email\": \"gabriel@email.com\", \"id\": \"cus_WVbg8Qkc0WIelO4k\", \"name\": \"Gabriel Tavares\", \"phones\": { \"mobile_phone\": { \"area_code\": 21, \"country_code\": 55, \"number\": 987654321 } }, \"type\": \"individual\", \"updated_at\": \"2020-05-15T02:02:24Z\" }, \"id\": \"or_djKAl9dacPfB7gBR\", \"items\": [{ \"amount\": 1000, \"created_at\": \"2020-05-15T02:06:14Z\", \"description\": \"Camisa de malha 100% algodão - Tamanho G - Branca\", \"id\": \"oi_BQWg5P2FLTlGn97z\", \"quantity\": 1, \"status\": \"active\", \"type\": \"product\", \"updated_at\": \"2020-05-15T02:06:14Z\" }], \"status\": \"canceled\", \"updated_at\": \"2020-05-15T18:54:35Z\" } ","categories":"","description":"","excerpt":" Para cancelar um link de pagamento, temos que fechar um pedido, o que …","ref":"/docs/referencia-da-api/link-de-pagamentos/cancelar-link-de-pagamento/","tags":"","title":"Cancelar um Link de Pagamento"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/pagamentos/","tags":"","title":"Pagamentos"},{"body":" Nossa API usa como retorno os códigos HTTP padrão para indicar tanto o sucesso de uma requisição, quanto para indicar falha. Pode-se utilizar a tabela abaixo como referência:\n   Código Significado     200 Tudo ocorreu como deveria e sua requisição foi processada com sucesso.   201 A requisição foi bem sucedida e um novo recurso foi criado como resultado.   202 Processo iniciado com sucesso.   204 Bem sucedido, sem conteúdo de resposta.   400 Algum parâmetro obrigatório não foi passado ou os parâmetros passados não estão corretos.   401 Falta de autenticação para acessar este endpoint.   403 Falta de autorização para acessar este endpoint.   404 Endpoint não encontrado, revise a URL passada.   409 A solicitação atual conflitou com o recurso que está no servidor.   422 Entidade não processável. Não é uma ação válida para os dados enviados.   500 Erro interno do servidor, tente sua requisição novamente.    \nIdentificador da Requisição\nO cabeçalho da resposta sempre inclui um campo identificador da requisição, chamado x-request-id. Este valor deve ser enviado sempre que precisar de suporte, já que ele nos permite encontrar a chamada no nosso sistema e verificar o que possa ter dado errado.\n ","categories":"","description":"","excerpt":" Nossa API usa como retorno os códigos HTTP padrão para indicar tanto …","ref":"/docs/referencia-da-api/padroes-da-api/codigos-de-resposta/","tags":"","title":"Códigos De Resposta"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/barcode_payment_invoices \nQUERY PARAMS  account_id* string Identificador da conta.\n before string Cursor opaco da paginação.\n after string Cursor opaco da paginação.\n limit integer Limite de itens retornados.\n status string Valores Permitidos: CREATED, SETTLED, REGISTERED, EXPIRED, PENDING.\n amount integer Valor do boleto bancário gerado, em centavos de reais.\n issuance_date string Data da emissão de boleto bancário. Formato “YYYY-MM-DD”.\n expiration_date string Data de vencimento do boleto bancário. Mesmo depois dessa data expirar o pagamento ainda pode ser feito. Formato “YYYY-MM-DD”.\n settled_date string  amount_lt integer  amount_gt integer  start_limit_date string  end_limit_date string  start_expiration_date string  end_expiration_date string  start_issuance_date string  end_issuance_date string  start_settled_date string  end_settled_date string\n barcodestring Código de barras.\n writable_linestring Código de barras traduzidos em números.\nResponse 200 OK content-type: application/json Body { \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"account_id\":\"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\":2000, \"barcode\":\"19795819100000020000000020200310150334476155\", \"beneficiary\":{ \"account_code\":\"498910\", \"branch_code\":\"1\", \"document\":\"98146856000174\", \"document_type\":\"cnpj\", \"legal_name\":\"Sr. Mirella\", \"trade_name\":NULL }, \"created_at\":\"2020-03-10T15:03:34Z\", \"created_by\":\"user:380f9969-8946-4f88-a781-be8b7efc1f90\", \"customer\": { \"document\": \"11121740755\", \"document_type\": \"cpf\", \"legal_name\": \"Pereira da Silva\", \"trade_name\": null }, \"discounts\": [ { \"date\": \"2020-11-20\", \"value\": \"0.1\" } ], \"expiration_date\":\"2020-03-11\", \"fee\":0, \"fine\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"id\":\"2788e49f-6f53-4296-bba4-3eb5101ff3e8\", \"interest\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"invoice_type\":\"proposal\", \"issuance_date\":\"2020-03-10\", \"limit_date\":\"2020-03-11\", \"our_number\": \"20200427112605941833\", \"customer\":{ \"document\":\"98146856000174\", \"document_type\":\"cnpj\", \"legal_name\":\"Sr. Mirella\", \"trade_name\":NULL }, \"receiver\": null, \"registered_at\":\"2020-03-10T15:03:34Z\", \"settled_at\":NULL, \"status\":\"REGISTERED\", \"writable_line\":\"19790000052020031015703344761550581910000002000\" }, { \"account_id\":\"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\":2000, \"barcode\":\"19795819100000020000000020200310150334476155\", \"beneficiary\":{ \"account_code\":\"498910\", \"branch_code\":\"1\", \"document\":\"98146856000174\", \"document_type\":\"cnpj\", \"legal_name\":\"Sr. Mirella\", \"trade_name\":NULL }, \"created_at\":\"2020-03-10T15:03:34Z\", \"created_by\":\"user:380f9969-8946-4f88-a781-be8b7efc1f90\", \"customer\": { \"document\": \"11121740755\", \"document_type\": \"cpf\", \"legal_name\": \"Pereira da Silva\", \"trade_name\": null }, \"discounts\": [ { \"date\": \"2020-11-20\", \"value\": \"0.1\" } ], \"expiration_date\":\"2020-03-11\", \"fee\":0, \"fine\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"id\":\"2788e49f-6f53-4296-bba4-3eb5101ff3e8\", \"interest\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"invoice_type\":\"proposal\", \"issuance_date\":\"2020-03-10\", \"limit_date\":\"2020-03-11\", \"our_number\": \"20200427112605941833\", \"customer\":{ \"document\":\"98146856000174\", \"document_type\":\"cnpj\", \"legal_name\":\"Sr. Mirella\", \"trade_name\":NULL }, \"receiver\": null, \"registered_at\":\"2020-03-10T15:03:34Z\", \"settled_at\":NULL, \"status\":\"REGISTERED\", \"writable_line\":\"19790000052020031015703344761550581910000002000\" } ] } \n403 Forbidden Body { \"type\": \"object\", \"properties\": { \"type\": { \"type\": \"string\", \"enum\": [ \"srn:error:unauthorized\" ] } } } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/emissao-de-boletos/listar-boletos/","tags":"","title":"Listar Boletos"},{"body":"Como o dono da conta permite que uma transação criada pelo parceiro seja realizada.\n A Aprovação de uma Transação tem como objetivo garantir que toda movimentação financeira de saída de uma conta seja feita somente por um usuário devidamente autorizado. É um procedimento em que o usuário que já concedeu o consentimento é notificado da criação de uma transação e direcionado para uma página onde é possível visualizar todas as transações criadas pelo parceiro. Nessa página é possível aprovar ou rejeitar uma transação, possibilitando ou impedindo sua realização. É importante lembrar que apenas Aplicativos com consentimento podem criar transações.\nNo Open Banking, o parceiro pode criar uma transação na conta do usuário, mas esta só será efetuada se houver a aprovação do usuário dono da conta. Esse procedimento assegura ao dono da conta de que não haverá movimentação de seu dinheiro sem sua permissão, além de proteger a aplicação de eventuais erros, ataques ou bugs que iniciem transações não desejadas pelo usuário.\nO Aprovador é um aplicativo utilizado pelo usuário para realizar a autorização de transações criadas pelo parceiro. Além disso, através do aplicativo é possível manter um histórico de movimentação de saída de uma conta. Nesse histórico é possível visualizar os valores movimentados, o destino das movimentações e o usuário que autorizou as transações. É possível também utilizá-lo para realizar aprovações em lote, ou seja, aprovar um grande número de transações pendentes ao mesmo tempo.\nAlém de aprovar transações pelo aplicativo Aprovador Stone, também é possível aprovar pelo aplicativo Conta Stone, no menu “Aprovar transações”.\n","categories":"","description":"","excerpt":"Como o dono da conta permite que uma transação criada pelo parceiro …","ref":"/docs/guias/integracao/aprovacao/","tags":"","title":"Aprovação"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/payments/payment_id/cancel  PATH PARAMS  payment_id* string\nResponse 204 No Content ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/pagamentos/cancelamento-de-um-pagamento/","tags":"","title":"Cancelamento de um Pagamento Agendado"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/internal_transfers/id/cancel \nPATH PARAMS  id string Identificador da transferência.\nResponse 204 No Content content-type: application/json ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/transferencias/transferencias-internas/cancelamento-de-uma-transferencia-interna-agendada/","tags":"","title":"Cancelamento de Uma Transferência Interna Agendada"},{"body":"DELETE https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts/contact_id  PATH PARAMS  account_id string\nIdentificador da conta.\n contact_id string\nIdentificador do contato.\n Response 200 OK ","categories":"","description":"","excerpt":"DELETE …","ref":"/docs/referencia-da-api/contatos/excluir-um-contato/","tags":"","title":"Excluir Um Contato"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/balance  PATH PARAMS\n account_id string\nIdentificador da Conta.\nAtenção\nNote que a variável balance abaixo retorna um valor sem vírgulas, exemplo 9998, isso corresponde a R$ 99,98 reais da conta do usuário.\n  Response 200 OK content-type: application/json Body\n{ \"balance\": 9998, \"blocked_balance\": 0, \"scheduled_balance\": 0 } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-o-saldo/","tags":"","title":"Consultar o Saldo"},{"body":" Esse fluxo só será solicitado caso você esteja tentando fazer uma transação e receba como resposta o código 403. Isso pode acontecer, por exemplo, ao confirmar uma recarga de qualquer tipo.\nFluxo de autorização de challenge   A requisição que necessita do challenge retornará:   status: 403  { \"challenge\": { \"id\": id, \"required_types\": [\"pin\"], \"type\": \"srn:error:challenge_required\", \"details\": {\"error\": \"challenge_required\"} } } Note que required_types indicará quais tipos de credencial o subject deverá preencher pra conseguir uma autorização. Alguns valores possíveis são: login_password, pin e totp.\nO próximo request deverá conter o challenge_solution.  Pra montar o challenge_solution você deverá gerar um JWE, onde o valor descriptografado seja um json no seguinte formato:\n{ \"challenge_id\": challenge_id, \"pin\": pin } O challenge id é o valor devolvido no request anterior e segunda chave do json deverá ser o tipo de credencial e seu valor correspondente.\nPara gerar o JWE você usará a chave com \"use\": \"enc\" exposta em api/v1/discovery/keys. O protected_header desse JWE deverá ser algo como {\"alg\":\"RSA-OAEP\",\"enc\":\"A256GCM\"}.\nApós a solução do challenge, você receberá a resposta indicando o status da autorização ou uma resposta com status 403 o problema na solução do challenge ou na falta de permissão do subject.\nComo gerar um JWE  Para gerar um token JWE (JWT criptografado) seguimos 3 passos:\n  Escrever o conteúdo a ser criptografado (payload).\n  Buscar a chave pública da Stone, no endpoint /api/v1/discovery/keys, cujo campo “use” seja igual a “enc”;\n  Usar uma biblioteca de criptografia passando o payload, a chave pública e o algoritmo utilizado, no caso, RSA-OAEP-256\n  Segue um exemplo de como gerar um JWE em Python:\nimport requests import json from jwcrypto import jwe, jwk import sys def build_challenge_solution(challenge_id, typ, solution_value): dic = {\"challenge_id\": challenge_id} dic.update({typ: solution_value}) return generate_jwe(json.dumps(dic)) def generate_jwe(payload): key = get_public_key() public_key = jwk.JWK() public_key = public_key.from_json(json.dumps(key)) encrypted = jwe.JWE(payload.encode(\"utf-8\"), recipient=public_key, protected={ \"alg\": \"RSA-OAEP-256\", \"enc\": \"A256GCM\", \"kid\": key[\"kid\"], }) return encrypted.serialize(compact=True) def get_public_key(): response = requests.get( \"https://sandbox-api.openbank.stone.com.br/api/v1/discovery/keys\") for key in response.json()[\"keys\"]: if key[\"use\"] == \"enc\": return key if __name__ == \"__main__\": [challenge_id, typ, value] = sys.argv[1:] solution = build_challenge_solution(challenge_id, typ, value) print(solution) \nResponse A resposta será um token que será utilizado no challenge.\neyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwia2lkIjoiNjdkY2JhZTAtN2JlYi0xMWU5LTllZDUtMDI0MmFjMTEwMDAyIn0.FhyzgGAcmitGYoyzRxO9GhgQ-nMj1DK6gCREmnockGBxjbdPPae7CQPeVzgN50oqt2sK7tEmAMRQxBFAjfsa5bPQT2s-8s3a2M0S01cCwuQJCv43O3EFQoXGv113fGXobEzmyzGY6uAkc6Gmn1CdluN6NfNJIKnplk6GLpgUlrRIrkcEcgPUnJhvhavc-sNK8DUdAT9CaOHyrtZmAsfbmeMc5UdApcM6OJYz1R-4P_92Ygc3WCy2w7vpzwDpHq1z4EjzH7RT9Nxw20CZdi7BWZdgThBWQddikZETB41ghsO_6xOA7GorOl0bvYaSnHrZfVXdbMhltFnKy9WlA_BW66KO2UudkPjLL-SMcM2penwrPXqYMm7z0WIG3hmxH2xYw3TWjED1ZydNgsBH7s14QcAul3TrOS_obHyUrr753o30PTopuFmQesLzoUN0j1qJ6Xm-N2oXdjNEN7TBTXDhbUwgUZLnN_pjtfMT_iSF1imm93REX8w-5Z0rtQ03geORJ48s5ZCF3Gqgj3nKDBk7KLtEUWurpqRoop1EVEgP63ejTpX7kZgxjCAetSyH-pOvXJGZ8Z26Upmy1Rk50keagtr8vMY4raQVMALqWR_yPHiJFWWZNoLvT-3qKOYZS1x--UJP71JIEfeHq9dc-bD_nw_7s9OlqnGKSrQEjvopjY8.n1pAhTkp2N1DAcVE.3DjPqAzJ7SVVM9Tdd-w_UfyvGxtUOAtbQWIVSoz5v6iJ_lwDEkQf1a2EsBvIxTpNLVjdMu_HGFJTYJOmtlN0gM2VZ2YpEtzITw.C_WphE40TvNCXECOLCgGIw \n","categories":"","description":"","excerpt":" Esse fluxo só será solicitado caso você esteja tentando fazer uma …","ref":"/docs/referencia-da-api/recargas/fluxo-challenge/","tags":"","title":"Fluxo de Autorização de Challenge"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/agendamento/","tags":"","title":"Agendamento"},{"body":" O extrato mostra todos os tipos de transações que ocorreram em determinada conta de pagamento.\nCada transação é uma nova entrada no extrato e elas estão listadas abaixo com seus campos.\nPara ver a estrutura de cada transação, basta dar uma olhadinha aqui.\nTipos de Transação Veja os possíveis valores para o campo type, sua descrição e as possíveis combinações com o campo operation.\n   Valores (type) Descrição Valores possíveis (operation)     balance_blocked Bloqueio de Saldo. credit ou debit   balance_unblocked Desbloqueio de Saldo. credit   card_payment Liquidação de recebíveis de cartão recebido. credit   external Transferência externa. (TED) credit ou debit   external refund Devolução de Transferência externa. credit   instant_payment Transação de Instant Payment / Qr Code. credit ou debit   internal Transferência interna. credit ou debit   loan_payments Valor referente a um empréstimo/crédito. credit ou debit   outbound_pix_payment Envio de um Pix. debit   outbound_stone_prepaid_card_payment Compra feita com Cartão Stone. debit   outbound_stone_prepaid_card_payment_refund Devolução de compra com Cartão Stone. credit   outbound_stone_prepaid_card_payment_chargeback Devolução do dinheiro ao usuário devido ao pedido de chagerback de uma compra feita com cartão Stone. credit   outbound_stone_prepaid_card_withdrawal Saque com Cartão Stone feito no Banco24Horas. debit   outbound_stone_prepaid_card_withdrawal_refund Devolução de Saque feito no Banco24Horas. credit   payment Pagamento de documento com código de barras. credit ou debit   payment_refund Devolução do pagamento de documento com código de barras. credit   payroll Folha de pagamento. debit   pix_payment Recebimento de Pix. credit   refund_for_pix_payment Devolução de um Pix recebido. debit   refund_reversal_for_pix_payment Recebimento de um Pix que havia devolvido. credit   refund_for_outbound_pix_payment Devolução de um Pix que havia enviado. credit   salary Recebimento de salário. credit   salary_portability Envio do salário para a outra instituição onde foi solicitada a portabilidade. debit   salary_portability_refund Devolução de salário pela instituição cadastrada na portabilidade. credit   salary_portability_employer_refund Devolução de salário do empregado para a instituição cadastrada na portabilidade. (No caso de processamento do cancelamento da portabilidade, o empregado poderá receber nas duas instituições) debit     Campos das Transações Todas as entradas do extrato tem alguns campos padrões, são eles:\n   Chave Descrição Tipo     type Identifica o tipo de movimentação do extrato. Veja os possíveis valores desse campo na tabela acima. String   operation Identifica se a movimentação foi de entrada de dinheiro, credit, ou de saída de dinheiro, debit. Veja as combinações possíveis de tipos e operações na tabela acima. String   balance_before Saldo antes da operação ocorrer. Integer   balance_after Saldo disponível após o valor da operação, incluindo taxas. Integer   amount Valor da operação sem taxas. Integer   account_id ID da conta pagamento a qual essa entrada pertence. String   created_at Data de processamento da transação / de entrada da transação no extrato. Formato: datetime. String   status Status atual da transação. Varia de acordo com o tipo de transação. String   id Identificador da transação que originou essa movimentação no extrato. String     Abaixo temos os campos que são utilizados em cada tipo de transação no extrato:\n   Chave Descrição Tipo Transação     operation_amount Valor bloqueado ou desbloqueado na operação. Integer balance_blocked, balance_unblocked   reason Motivo do bloqueio ou desbloqueio. String balance_blocked, balance_unblocked   acquirer Instituição responsável pela liquidação de recebíveis. String card_payment   card_network_code Código da rede do cartão. String card_payment   card_network_name Nome da rede do cartão. String card_payment   card_type Tipo do cartão. String card_payment   is_prepayment Informa se o cartão é do tipo pré-pago ou não. Boolean card_payment   counter_party Dados do beneficiário da transação. Veja seus campos abaixo Object external, external_refund, instant_payment, internal, salary, salary_portability, salary_portability_refund, salary_portability_employer_refund   delayed_to_next_business_day Informa se a transação foi adiada para o próximo dia útil ou não. Boolean external   fee_amount Valor da taxa da transação. Integer external, external_refund, instant_payment, internal, outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund, payment, payment_refund   operation_amount Valor da operação, sem o valor da taxa. Integer external, external_refund, instant_payment, internal, outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund, payment, payment_refund   operation_id Código identificador da operação. String external, instant_payment, internal, outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund, payment, payroll   refund_reason_code Código da razão da devolução da transação. String external, external_refund, salary_portability_refund   refund_reason_description Descrição da razão de devolução da transação. String external, external_refund, salary_portability_refund   scheduled_at Data em que foi realizado o agendamento da transação. String  external, internal, payment   scheduled_to_effective Data que o sistema agendou para realizar a transação. String external   scheduled_to_requested Data solicitada para agendamento da transação. String external   original_operation_id Código identificador da operação original. String external_refund, payment_refund   refunded_at Data em que a transação foi devolvida. String external_refund, payment_refund   schedule_to Data para qual foi realizado o agendamento da transação. String internal   account_settlement_policy_retention Dados da conta em que será realizada a retenção de liquidação de conta. Veja seus campos abaixo Object loan_payments   original_operation_entry Dados da operação original.Veja seus campos abaixo. Object loan_payments   original_operation_entry_type Tipo da operação original. String loan_payments   acquirer_code Código do adquirente. String outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund   acquirer_name Nome do adquirente. String outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund   card_acceptor Dados sobre o cartão em que foi realizada a compra. Veja seus campos abaixo Object outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund   card_last_four_digits Últimos dígitos do cartão em que foi realizada a compra. String outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund   transaction_authorization Dados sobre a autorização da transação de uma compra feita com cartão. Veja seus campos abaixo Object outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_payment_refund, outbound_stone_prepaid_card_payment_chargeback, outbound_stone_prepaid_card_withdrawal, outbound_stone_prepaid_card_withdrawal_refund   transaction_chargeback Dados sobre o estorno da transação de uma compra feita com cartão. Veja seus campos abaixo Object outbound_stone_prepaid_card_payment_chargeback   barcode Código de barras de um boleto. String payment   details Dados sobre o pagamento de um boleto. Veja mais sobre esse campo aqui Object payment, payment_refund   scheduled_to Data para qual foi agendado o pagamento de um boleto. String payment   writable_line Linha digitável de um boleto. String payment, payment_refund     Campos do Objeto (counter_party):    Chave Descrição Tipo     account Dados da conta destino. Veja seus campos abaixo Object   entity Dados Pessoais. Veja seus campos abaixo Object    Campos do Objeto (account):    Chave Descrição Tipo     account_code Código da Conta. String   account_type Tipo da conta. String   branch_code Agência da conta. String   institution Código da instituição da conta. String   institution_name Nome da instituição da conta. String    Campos do Objeto (entity):    Chave Descrição Tipo     document Número de documento do responsável da conta. String   document_type Tipo de documento do responsável da conta. String   name Nome do responsável da conta. String    Campos do Objeto (account_settlement_policy_retention):    Chave Descrição Tipo     account_settlement_policy_id Identificador único dos juros do empréstimo/crédito. String   applied_retention_rules Dados de onde será aplicada as regras de juros. Veja seus campos abaixo Object   retained_amount Valor dos juros. Integer   total_amount Valor total do empréstimo/crédito. Integer    Campos do Objeto (applied_retention_rules):    Chave Descrição Tipo     acquirer Instituição responsável pela liquidação de recebíveis. String   card_network_code Código da rede do cartão. String   card_type Tipo de cartão. String   desired_rule_amount Valor desejado dos juros. Integer   effective_rule_amount Valor efetivo dos juros. Integer   is_prepayment Informa se o cartão é do tipo pré-pago ou não. Boolean   retained_portion Dados sobre a porcentagem dos juros.Veja seus campos abaixo Object   same_ownership Informa se o pagador pode ser da mesma instituição que o beneficiário. String   target_account_id Identificador da conta que irá receber o empréstimo/crédito. String    Campos do Objeto (retained_portion):    Chave Descrição Tipo     coefficient Valor do coeficiente para cálculo dos juros do empréstimo/crédito. Integer   exponent Valor do expoente para cálculo dos juros do empréstimo/crédito. Integer    Campos do Objeto (original_operation_entry):    Chave Descrição Tipo     amount Valor original retido para pagamento do empréstimo/crédito. Integer   barcode Código de barras referente ao empréstimo/crédito. String   barcode_payment_invoice_id Identificador do pagamento do código de barras do empréstimo/crédito. String   beneficiary Dados do beneficário do empréstimo/crédito. Veja seus campos abaixo Object   created_at Data da criação do pedido do empréstimo/crédito. String   invoice_type Tipo de fatura do empréstimo/crédito. String   operation Tipo de operação do empréstimo/crédito. String   writable_line Linha digitável do empréstimo/crédito. String    Campos do Objeto (beneficiary):    Chave Descrição Tipo     document Documento do beneficiário. String   document_type Tipo do documento do beneficiário. String   legal_name Nome completo ou razão social do beneficiário. String   trade_name Nome fantasia do beneficiário. Campo não obrigatório. String    Campos do Objeto (card_acceptor):    Chave Descrição Tipo     city Cidade onde foi realizada a compra. String   country País onde foi realizada a compra. String   mcc Tipo de taxa que será aplicada à compra. (Ex.: taxa de intercâmbio, taxa da rede do cartão, entre outras) String   name Nome do dono do cartão. String    Campos do Objeto (transaction_authorization):    Chave Descrição Tipo     authorization_medium Tipo de autorização recebida na compra. String   captured_value Dados do valor na moeda em que ocorreu a compra, sem taxas. Object   conversion_rate Taxa de conversão. String   country Código do país onde ocorreu a compra. String   iof_fee Taxa de IOF. Campo não obrigatório. Integer   pos_authorization_time Data da autorização. String   value Dados do valor convertido pra BRL, com taxas. Veja seus campos abaixo Object    Campos do Objeto (captured_value):    Chave Descrição Tipo     amount Valor capturado no momento da compra via cartão, sem taxas. Integer   currency Moeda utilizada no momento da compra via cartão. String    Campos do Objeto (value):    Chave Descrição Tipo     amount Valor total da compra convertido para BRL, com taxas incluídas. Integer   currency Moeda convertida para BRL. String    Campos do Objeto (transaction_chargeback):    Chave Descrição Tipo     charged_back_at Data em que ocorreu a devolução do valor da compra. String   id Identificador da devolução da transação. String   value Dados do valor estornado.Veja seus campos aqui Object    ","categories":"","description":"","excerpt":" O extrato mostra todos os tipos de transações que ocorreram em …","ref":"/docs/referencia-da-api/dados-da-conta/objetos-do-extrato/","tags":"","title":"Objetos do Extrato"},{"body":" Nossos endpoints seguem um padrão de mensagens. Toda mensagem de erro, por exemplo, seguirá o modelo “srn:error:xxx\" e um código HTTP apropriado para a falha.\nExemplo:\n{ \"type\": \"srn:error:target_account_not_found\" } \nAlguns endpoints têm uma resposta mais completa, entregando a mensagem de erro mencionada e mais detalhes.\nExemplo:\n{ \"errors\": [ { \"error\": \"is invalid\", \"path\": [ \"tax_id\" ] } ], \"type\": \"srn:error:bad_request\" } ","categories":"","description":"","excerpt":" Nossos endpoints seguem um padrão de mensagens. Toda mensagem de …","ref":"/docs/referencia-da-api/padroes-da-api/mensagens-de-erro/","tags":"","title":"Mensagens De Erro"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/barcode_payment_invoices/id \nPATH PARAMS  id* string Identificador do boleto.\nResponse 200 OK content-type: application/json Body\n{ \"account_id\":\"8cbeb3d2-750f-4b14-81a1-143ad715c273\", \"amount\":2000, \"barcode\":\"19795819100000020000000020200310150334476155\", \"beneficiary\":{ \"account_code\":\"498910\", \"branch_code\":\"1\", \"document\":\"98146856000174\", \"document_type\":\"cnpj\", \"legal_name\":\"Sr. Mirella\", \"trade_name\":NULL }, \"created_at\":\"2020-03-10T15:03:34Z\", \"created_by\":\"user:380f9969-8946-4f88-a781-be8b7efc1f90\", \"customer\": { \"document\": \"11121740755\", \"document_type\": \"cpf\", \"legal_name\": \"Pereira da Silva\", \"trade_name\": null }, \"discounts\": [ { \"date\": \"2020-11-20\", \"value\": \"0.1\" } ], \"expiration_date\":\"2020-03-11\", \"fee\":0, \"fine\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"id\":\"2788e49f-6f53-4296-bba4-3eb5101ff3e8\", \"interest\": { \"date\": \"2021-01-02\", \"value\": \"1\" }, \"invoice_type\":\"proposal\", \"issuance_date\":\"2020-03-10\", \"limit_date\":\"2020-03-11\", \"our_number\": \"20200427112605941833\", \"customer\":{ \"document\":\"98146856000174\", \"document_type\":\"cnpj\", \"legal_name\":\"Sr. Mirella\", \"trade_name\":NULL }, \"receiver\": null, \"registered_at\":\"2020-03-10T15:03:34Z\", \"settled_at\":NULL, \"status\":\"REGISTERED\", \"writable_line\":\"19790000052020031015703344761550581910000002000\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/emissao-de-boletos/retornar-um-boleto/","tags":"","title":"Retornar Um Boleto"},{"body":" A ocorrência de certos eventos pode ser importante em diversos fluxos na integração de uma aplicação com a API OpenBank. Por isso, utilizamos webhooks para notificar as aplicações integradas da ocorrência destes eventos.\nPara sua utilização, é preciso que a aplicação tenha cadastrado no formulário a URI para a qual enviaremos um POST com os dados do evento. A aplicação deverá estar preparada para lidar com cada evento de forma adequada.\nAo enviar um webhook, esperamos receber uma resposta do range 200 que indica o sucesso no recebimento dessa notificação por parte da sua aplicação. Caso a resposta seja um código diferente do range 200, encaramos como falha no recebimento do webhook e repetimos o envio até receber um sucesso ou batermos o número máximo de 50 tentativas no envio de um evento.\nA aplicação irá receber webhooks dos eventos que acontecerem na(s) conta(s) sobre as quais ela opera dado o escopo de funcionalidades sobre o qual foi dado consentimento. Vale lembrar que os webhooks serão enviados independente se o evento for via API ou via APP.\nVirada em Produção\nÉ imprescindível que a aplicação esteja recebendo e tratando de forma adequada todos os tipos de webhook referente as funcionalidades que implementou.\n Os eventos que geram notificações são:  Emissão de Boleto:    Tipo de Evento Descrição     barcode_payment_invoice_created Representa a criação/emissão de um boleto.   barcode_payment_invoice_registered Representa o registro de um boleto.   barcode_payment_invoice_payment_promissed Representa que o pagamento do boleto foi acolhido em alguma instituição.   barcode_payment_invoice_settled Representa que pagamento do boleto foi confirmado.   barcode_payment_invoice_expired Representa que o boleto está expirado.   cash_in_barcode_payment Representa a entrada do valor do boleto na conta do beneficiário.    Pagamento de Boleto:    Tipo de Evento Descrição     cash_in_payment_refund Representa o reembolso de um pagamento mal sucedido.   cash_out_payment Representa a criação de um pagamento.   cash_out_payment_failed Representa a falha na criação de um pagamento.   cash_out_payment_scheduled Representa o agendamento de um pagamento.   cash_out_payment_scheduled_failed Representa a falha no agendamento de um pagamento.   cash_out_payment_approved Representa a aprovação de um pagamento.   cash_out_payment_execution_started Representa o início da execução de um pagamento.   cash_out_payment_cancelled Representa o cancelamento de um pagamento.   cash_out_payment_rejected Representa a rejeição de um pagamento.   cash_out_payment_finished Representa a finalização de um pagamento.   cash_out_payment_expired Representa a expiração de um pagamento.    Transferência interna:    Tipo de Evento Descrição     cash_in_internal_transfer Representa o recebimento de uma transferência interna.   cash_out_internal_transfer Representa a criação de uma transferência interna.   cash_out_internal_transfer_failed Representa a falha na criação de uma transferência interna.   cash_out_internal_transfer_scheduled Representa o agendamento de uma transferência interna.   cash_out_internal_transfer_scheduled_failed Representa a falha no agendamento de uma transferência interna.   cash_out_internal_transfer_approved Representa a aprovação de uma transferência interna.   cash_out_internal_transfer_cancelled Representa o cancelamento de uma transferência interna.   cash_out_internal_transfer_rejected Representa a rejeição de uma transferência interna.   cash_out_internal_transfer_finished Representa a finalização de uma transferência interna.   cash_out_internal_transfer_expired Representa a expiração de uma transferência interna.    Transferência externa:    Tipo de Evento Descrição     cash_in_external_transfer Representa o recebimento de uma transferência externa.   cash_in_external_transfer_refund Representa o reembolso de uma transferência externa mal sucedida.   cash_out_external_transfer Representa a criação de uma transferência externa.   cash_out_external_transfer_failed Representa a falha na criação de uma transferência externa.   cash_out_external_transfer_scheduled Representa o agendamento de uma transferência externa.   cash_out_external_transfer_scheduled_failed Representa a falha no agendamento de uma transferência externa.   cash_out_external_transfer_approved Representa a aprovação de uma transferência externa.   cash_out_external_transfer_execution_started Representa o início da execução de uma transferência externa.   cash_out_external_transfer_cancelled Representa o cancelamento de uma transferência externa.   cash_out_external_transfer_rejected Representa a rejeição de uma transferência externa.   cash_out_external_transfer_finished Representa a finalização de uma transferência externa.   cash_out_external_transfer_expired Representa a expiração de uma transferência externa.    Pix:    Tipo de Evento Descrição     pix_outbound_payment_failed Representa a falha do envio de um Pix.   pix_outbound_payment_settled Representa a finalização de um Pix.   pix_outbound_payment_refunded Representa o reembolso de um Pix mal sucedido.    Consentimento:    Tipo de Evento Descrição     consent_request Representa a confirmação do pedido de consentimento por parte do user.    Abertura de conta:    Tipo de Evento Descrição     sign_up_created Enviado quando é feito o pedido de abertura de conta.   sign_up_status_updated Enviado quando é feito uma atualização dos dados na abertura da conta.   sign_up_resource_details_updated Serão enviados diversos webhooks com este tipo de evento de acordo com a evolução da abertura de conta. Ex: account_created, user_email_verified, ….    O header das notificações segue a seguinte estrutura:  x-stone-webhook-event-id: \"930bbd6d-0c7a-4fe4-8b50-4b82a20cb847\" x-stone-webhook-event-type: \"cash_out_internal_transfer\" A idempotência de webhooks deverá ser validada no campo ‘x-stone-webhook-event-id’ disponível no header.\nO payload das notificações segue a seguinte estrutura:     Campo Descrição     env Especifica de qual ambiente partiu o evento. Valores possíveis: sandbox ou production.   event_type Especifica qual tipo de evento disparou a notificação. Veja os valores possíveis aqui.   id É o identificador da notificação.   event_notified_at É a hora em que a notificação está sendo enviada.   event_happened_at É a hora em que o evento ocorreu.   target_data Objeto com as informações detalhadas do recurso que gerou o evento. Apesar de ter campo variáveis sempre conterá o campo account_id.   target_detail_uri É o endereço onde se pode consultar os detalhes do recurso.   target_id É o identificador do recurso que gerou o evento.   target_statement_uri É o endereço da entrada no extrato referente ao recurso.   target_type É o tipo do recurso.    Inclusão de campos\nA implementação não deve ser strict no parser do payload. Ao longo do tempo os payloads podem sofrer a inclusão de campos.\n Exemplo:\n{ \"env\":\"sandbox\", \"event_type\":\"cash_in_internal_transfer\", \"event_happened_at\":\"2020-05-13T14:58:15Z\", \"event_notified_at\":\"2020-05-13T14:58:15Z\", \"iat\":1589381895, \"id\":null, \"jti\":\"2o79sqemde14mv76eo00jsc3\", \"nbf\":1589381895, \"target_data\":{ \"account_id\":\"09c016b2-876a-450a-9f40-316f8e2f8778\", \"amount\":1, \"balance_after\":null, \"balance_before\":null, \"counter_party\":{ \"account\":{ \"account_code\":\"841412\", \"branch_code\":\"1\", \"institution\":\"16501555\", \"institution_name\":\"Stone Pagamentos S.A.\" }, \"entity\":{ \"name\":\"Loja Da Maria\" } }, \"created_at\":\"2020-05-13T14:58:15Z\", \"description\":\"\", \"id\":\"54abd61c-3b18-401c-9816-951cbe135149\", \"operation\":\"credit\", \"status\":\"FINISHED\", \"type\":\"internal\" }, \"target_detail_uri\":null, \"target_id\":null, \"target_statement_uri\":\"https://sandbox-api.openbank.stone.com.br/api/v1/statement/entries/54abd61c-3b18-401c-9816-951cbe135149\", \"target_type\":\"internal_transfer\" } \nTrabalhando com Webhooks  Webhooks Seguros Nossa API envia webhooks de forma segura para evitar que eles sejam abertos e/ou alterados. Isso é feito em duas etapas:\n Assinatura do conteúdo usando uma das nossas chaves públicas. Ciframento do resultado usando a chave pública do destinatário.  Como eu posso abrir de forma segura o conteúdo de um webhook? Para poder visualizar o conteúdo de um webhook é necessário fazer o caminho inverso:\n Decifrar o conteúdo do webhook usando sua chave privada. O resultado é um token JWT assinado com a nossa chave; Verificar a assinatura do token com a nossa chave pública.  1 - Decifrar o conteúdo do webhook  O webhook irá chegar com um payload parecido com esse:\n{ \"encrypted_body\": \"xxxxxxxxxxxxxx conteúdo cifrado\" } O valor do campo “encrypted_body” é um token no formato JWE (JSON Web Encryption) compacto. Esse formato é um padrão e várias linguagens possuem bibliotecas prontas para ele.\nO algoritmo utilizado é: RSA-OAEP-256 com A256GCM. Para decifrar o conteúdo é necessário uma biblioteca que suporte estes algoritmos como:\n JavaScript Java Erlang/Elixir Go  A chave a ser utilizada tem que ser a chave privada par da chave pública usada na autenticação da aplicação.\n2 - Verificar a assinatura do token  Até este momento deciframos apenas um conteúdo que pode ser gerado por qualquer um que tenha acesso a chave pública da aplicação.\nNós utilizamos a assinatura do conteúdo em token JWS (JSON Web Signing) compacto como uma outra camada de verificação de segurança no conteúdo do webhook.\nEsse token possui em seus “claims” (alegações) o conteúdo do webhook. Para garantir que ele foi gerado pela Stone, você deve validar a assinatura dele consultando nossas chaves públicas de assinatura.\nAs chaves públicas da Stone estão publicadas aqui.\nRepare que cada chave possui um kid (key ID) e um use (sig ou enc). O token JWS possui um header que diz qual é o id da chave usada para assiná-lo. Assim, é necessário, em primeiro lugar, garantir que o token foi assinado com uma chave que está publicada pela Stone.\nPara não ter que buscar a nossa chave pública a cada validação de assinatura, você pode salvar nossa chave do seu lado (por exemplo, através de um cache), de forma que caso aconteça algum erro na validação você volte a consultar o nosso serviço para buscar a chave pública mais atual. Assim você desonera sua aplicação sem perder a resiliência a mudanças de chave do nosso lado.\nVeja aqui as melhores práticas para fazer essa implementação.\nO algoritmo que usamos será sempre RS256. Há uma lista de bibliotecas que tratam de assinatura de token em jwt.io.\nSegurança É importante seguir os dois passos aqui: tanto decifrar quanto verificar a assinatura. Isso irá garantir que não apenas geramos algo que não pode ser lido por alguém que não possui a chave pública quanto que nosso conteúdo foi assinado pela Stone.\nTambém aconselhamos cuidado na configuração do cliente que irá consultar as nossas chaves. Certifique-se que ele não está vulnerável a servidores intermediários propositalmente mal configurados. Um exemplo comum é um servidor configurado para protocolos conhecidamente falhos.\nSempre que em dúvida, consulte nossa API com os IDs dos dados no conteúdo do webhook.\nMais informações sobre JavaScript Object Signing and Encryption, como JWTs, JWEs, JWSs, aqui.\nWebhooks idempotentes No geral um evento, quando recepcionado com sucesso, é enviado apenas uma vez pela Stone, mas é possível que em algum cenário extraordinário um webhook acabe sendo enviado mais de uma vez e por isso desenvolvemos uma lógica de idempotência de eventos.\nTodo webhook gerado pela Stone leva consigo uma chave de idempotência enviada no campo x-stone-webhook-event-id do header.\nÉ importante que essa chave seja sempre salva pela sua aplicação e que a cada novo evento você verifique a idempotência desse evento evitando processar duas vezes um mesmo evento.\nEndpoint para verificar webhooks enviados Caso tenha dificuldade para identificar algum webhook enviado pela Stone na URI indicada para receber webhooks, disponibilizamos um endpoint que traz todos os webhooks já enviados para a sua aplicação.\nPara acessar, basta fazer o comando abaixo, lembrando que no header deve ser enviado o Bearer token no campo authorization e o client_id é o id da sua aplicação, passado pelo time de integração.\nGET https://sandbox-api.openbank.stone.com.br/api/v1/applications/application:{{client_id}}/webhooks Exemplo de Response\n{ \"client_id\": \"application:de4d224b-3f79-4b4d-8ff5-c1bc475830e5\", \"created_at\": \"2021-06-02T19:40:24Z\", \"data\": { \"env\": \"sandbox\", \"event_happened_at\": \"2021-06-02T19:40:23Z\", \"event_notified_at\": \"2021-06-02T19:40:24Z\", \"event_type\": \"cash_out_internal_transfer_finished\", \"id\": \"7919b78a-630e-4ad4-bb12-91eec729175d\", \"target_data\": { \"account_id\": \"6745bdf0-7647-40cd-8666-d78bb15fbd38\", \"amount\": 4000, \"approval_expired_at\": null, \"approved_at\": \"2021-06-02T19:40:23Z\", \"approved_by\": \"user:24017c13-1f9d-44e4-b4af-007f695cece3\", \"batch_id\": null, \"cancelled_at\": null, \"cancelled_by\": null, \"created_at\": \"2021-06-02T19:40:23Z\", \"created_by\": \"user:24017c13-1f9d-44e4-b4af-007f695cece3\", \"description\": \"\", \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": \"2021-06-02T19:40:23Z\", \"id\": \"7919b78a-630e-4ad4-bb12-91eec729175d\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"settled_at\": \"2021-06-02T19:40:23Z\", \"status\": \"FINISHED\", \"target\": { \"account\": { \"account_code\": \"55382931\" }, \"entity\": { \"name\": \"\" } }, \"target_account_code\": \"55382931\", \"target_account_owner_name\": \"\" }, \"target_detail_uri\": \"https://sandbox-api.openbank.stone.com.br/api/v1/internal_transfers/7919b78a-630e-4ad4-bb12-91eec729175d\", \"target_id\": \"7919b78a-630e-4ad4-bb12-91eec729175d\", \"target_statement_uri\": null, \"target_type\": \"internal_transfer_finished\" } ","categories":"","description":"","excerpt":" A ocorrência de certos eventos pode ser importante em diversos fluxos …","ref":"/docs/guias/integracao/webhooks/","tags":"","title":"Webhooks"},{"body":"POST https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts/contact_id/bank_accounts  PATH PARAMS  account_id string\nIdentificador da conta.\n contact_id string\nIdentificador do contato.\n BODY PARAMS  account_code string\nNúmero da conta.\n branch_code string\nNúmero da agência bancária.\n institution_code string\nNúmero da instituição.\n HEADERS  x-stone-idempotency-key string\nChave de idempotência.\n Response 200 OK content-type: application/json Body\n{ \"account_code\": \"4567864\", \"branch_code\": \"1234\", \"id\": \"9145a75a-f86b-4cc5-bcfe-64b658c610b6\", \"institution_code\": \"00000000\" } ","categories":"","description":"","excerpt":"POST …","ref":"/docs/referencia-da-api/contatos/adicionar-conta-bancaria-a-um-contato/","tags":"","title":"Adicionar Conta Bancária a Um Contato"},{"body":" Existem regras de serviço em sandbox diferentes às de produção. São elas:\n Nenhum boleto será pago em nosso ambiente de sandbox; O nome e CPF/CNPJ do emissor do boleto será gerado aleatoriamente, logo não será igual ao do boleto que você está pagando; Poderá ser pago novamente o mesmo boleto ou tributo após 2 horas.  Segue agora algumas regras do serviço que refletem o mesmo comportamento que há em produção:\n Será possível simular pagamentos de Contas de Consumo e Tributos vencidos; Não será possível simular o pagamento de boletos de cobrança vencidos; Não será possível realizar o pagamento de um boleto que não tenha valor pré-definido.  ","categories":"","description":"","excerpt":" Existem regras de serviço em sandbox diferentes às de produção. São …","ref":"/docs/referencia-da-api/pagamentos/consideracoes_importantes/considera%C3%A7%C3%B5es-importantes/","tags":"","title":"Considerações Importantes"},{"body":" Faz transferências monetárias para outra instituição (TED). Não é permitido realizar uma TED de uma conta Stone para outra conta Stone.\nHorário de funcionamento A API de Transferência Externa fica disponível em dias úteis, das 6h30 às 17h20, a transação é processada de forma assíncrona e o valor é creditado na conta destino em poucas horas.  Caso a transferência seja criada em um dia não útil ou fora do horário de funcionamento de TEDs, a transferência será agendada automaticamente para o dia seguinte. Nesse caso seu status será DELAYED_TO_NEXT_BUSINESS_DAY, como também a flag delayed_to_next_business_day = true. O campo scheduled_to_effective conterá a data para a qual a TED foi agendada.\nA transferência também pode ser agendada através do campo scheduled_to. A data usada no campo scheduled_to deve estar entre a data next_available_execution_date e a data limite retornada no campo execution_limit_date da API de calendário de agendamento chamada com o parâmetro operation_type=external_transfer. Caso a data escolhida seja menor do que next_available_execution_date, a transferência será executada imediatamente. Caso a data seja maior que execution_limit_date será retornado um erro 422.\nCaso a data escolhida não seja um dia útil, a transferência será automaticamente agendada para o próximo dia útil depois do escolhido. O dia útil requisitado (que veio na request) e o efetivo (em que de fato o agendamento vai ocorrer) são representados pelos campos scheduled_to_requested e scheduled_to_effective.\nA data usada no campo scheduled_to deve obedecer a data limite retornada na API de calendario de agendamento. Caso contrário, será retornado um erro 422 na criação.\n POST https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers  BODY PARAMS  amount* int32 Valor da transferência em centavos de Real, ou seja, um real fica 100.\n account_id* string Identificador da conta que está enviando a transferência.\n target object account object account_code string (obrigatório) Número da conta. Padrão: ^[1-9]\\d{1,19}$ branch_code string Número da agência. Padrão: ^\\d{1,4}$ institution_code string (obrigatório) Código ISPB da instituição ou número do banco. Padrão: ^(\\d{8}|\\d{3})$. account_type string Tipo de conta destino (verifique mais abaixo os tipos disponíveis).\n entity object name string (obrigatório) Nome do dono da conta alvo. document string (obrigatório) Número do documento sem pontos ou caracteres espaciais do dono da conta alvo. document_type string Tipo do documento do dono da conta alvo. Pode ser CPF ou CNPJ.\n scheduled_to string Formato: yyyy-mm-dd\nHEADERS  x-stone-idempotency-key string Chave de idempotência\n Request Body\nO corpo da requisição deve conter todos os dados da transferência.\nObserve que os “0\"s que prefixam o account_code são removidos. Por exemplo, “00012345” é armazenado como “12345” e vai ser retornado assim nas APIs de consulta.\nEssa transformação é aplicada pela API antes dos dados serem armazenados.\n Tipos de conta ( target.account.account_type ) Através deste campo, é possível enviar o tipo de conta destino. Os valores aceitos são: “CC” - Conta Corrente “CD” - Conta de Depósito “CG” - Conta garantida “PG” - Conta de Pagamento “PP” - Poupança Este campo possui regras especiais para utilização: Se o tipo de conta for PG, a agência (branch_code) é removida. Se o tipo de conta for CC ou nulo, mas o número da conta (account_code) possuir mais de 13 dígitos, o tipo de conta é convertido para PG e a agência (branch_code) é removida. Se o tipo de conta for CC ou nulo, mas a agência (branch_code) não vier preenchida, o tipo de conta é convertido para PG. Se o tipo de conta é nulo e não cai nos casos acima, o tipo de conta usado é CC.\"\n Sobre o objeto target Quando a conta alvo pertence a uma pessoa jurídica, usar CNPJ ao invés de CPF no objeto target.entity.\"\n Agendamento Em sandbox, a transferência externa está disponível de 6:30 às 17:23 todos os dias. Em produção, só está habilitada em dias úteis de 6:30 até 17:23. Após este horário a transferência será agendada para o próximo dia útil.\",\n Response 202 Accepted content-type: application/json Body\n{ \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:14:34Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:14:34Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"delayed_to_next_business_day\": false, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 400, \"finished_at\": null, \"id\": \"7458c329-c5e9-4cc8-8174-3aa6210a8867\", \"refund_reason_code\": null, \"refund_reason_description\": null, \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to_effective\": null, \"scheduled_to_requested\": null, \"settled_at\": null, \"status\": \"APPROVED\", \"target\": { \"account\": { \"account_code\": \"58859\", \"branch_code\": \"1\", \"institution_code\": \"90400888\", \"institution_ispb\": \"90400888\", \"institution_name\": \"Banco Santander (Brasil) S. A.\", \"institution_number_code\": \"033\" }, \"entity\": { \"cpf\": \"62752545053\", \"document\": \"62752545053\", \"document_type\": \"cpf\", \"name\": \"Octacilio Impoluto\" } } } ","categories":"","description":"","excerpt":" Faz transferências monetárias para outra instituição (TED). Não é …","ref":"/docs/referencia-da-api/transferencias/transferencias-externas/transferir-para-outros-bancos/","tags":"","title":"Transferir para Outros Bancos"},{"body":" Porque uma transferência é reembolsada? Temos vários motivos para que uma transferência retorne, sendo os casos mais comuns conta, agência ou documento do destino errados e saldo insuficiente na conta de origem. O reembolso de uma transferência somente é realizado quando ela ocorre para contas que não sejam Contas Stone, ou seja, quando ocorrem transferências externas.\nQuando pode ocorrer um reembolso Saldo insuficiente Através da nossa API é possível agendar uma transferência. Ocorre refund nesses casos quando, na data agendada para a transferência, a conta origem não possuir saldo suficiente em conta.\nDados da transferência incorretos Ao realizar uma transferência o usuário precisará enviar os dados da conta destino. Caso os dados de agência, conta ou documento do destino estejam incorretos ou inexistentes, a transferência retorna indicando esse erro.\nTipo de transação ou finalidade inválida Caso a conta destinatária não seja do tipo especificado na transferência ou algum dado do destino é inválido. Exemplo: conta destinatária é corrente e o tipo informado era conta poupança ou envio no nome fantasia do destino enquanto era esperado o nome da razão social.\nDados ausentes ou inválidos Quando uma transferência é realizada sem um dado obrigatório para a finalização da mesma, como código verificador, agência não informada ou quando o formato de um dado é inválido. Alguns bancos utilizam códigos verificadores com letras no número da conta ao invés de números, nesses casos, a Conta Stone solicita que a conta origem digite ‘0’ no lugar dessa letra, para que a transferência ocorra com sucesso.\nCPF/CNPJ inapto junto à Receita Federal Nesse caso, a transferência é retornada para a conta de origem, porém, caso a mesma pessoa tenha acesso a outra conta com outro documento, ela poderá receber a transferência. Exemplo: A pessoa possui o CPF inapto junto à Receita Federal então não poderá receber a transferência em sua conta de pessoa física, porém, se essa mesma pessoa for sócia de uma empresa, nada impede que a transferência seja realizada para conta de pessoa jurídica, a não ser que o CNPJ também esteja inapto.\nCódigos de Reembolsos Ocorre somente em casos de transferências externas.\n   Código Descrição     0 Ocorreu um erro de processamento no sistema de origem durante a transferência.   1 A conta destino é inexistente.   2 A conta ou agência destino é inexistente.   3 O documento do destino está incorreto.   4 Conta destinatária do crédito inválida para o tipo de transação ou finalidade.   5 Erro de processamento no sistema de origem durante a transferência.   6 Transferência supera limite para o tipo de conta destino / Conta destinatária do crédito inválida para o tipo de transação ou finalidade.   7 Não conformidade no pagamento. Exemplo: pagamento a um fornecedor com o valor diferente que o devido.   8 Os dados informados estão incorretos: Código Identificador de Transferência Inválido / Campo obrigatório ausente / Formato do dado inválido / Agência não informada.   9 CPF/CNPJ inapto junto à Receita Federal do Brasil.   10 A instituição financeira do destino não é válida.   11 A conta destino não pode ter mais de 13 dígitos para o tipo de conta escolhido. Por favor, confira os dados e tente novamente.   12 Por solicitação de cliente da instituição participante recebedora.   13 Devolução de ordem bancária pelo agente financeiro.   14 Beneficiário não identificado - Documentos com código de barras.    ","categories":"","description":"","excerpt":" Porque uma transferência é reembolsada? Temos vários motivos para que …","ref":"/docs/guias/integracao/reembolso-de-transferencias/","tags":"","title":"Reembolso de transferências"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/exports/barcode_payment_invoices/id \nPATH PARAMS  id* string Identificador do boleto.\nResponse 200 OK content-type: application/json Body\n{ } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/emissao-de-boletos/gerar-boleto-pdf/","tags":"","title":"Gerar PDF Boleto"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/comprovantes/","tags":"","title":"Comprovantes"},{"body":"POST https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts/contact_id/bank_accounts/bank_account_id  PATH PARAMS  account_id string\nIdentificador da conta.\n contact_id string\nIdentificador do contato.\n bank_account_id string\nIdentificador da conta bancária do contato.\n BODY PARAMS  account_code string\nNúmero da conta bancária.\n branch_code string\nNúmero da agência bancária.\n institution_code string\nNúmero da instituição.\n HEADERS  x-stone-idempotency-key string\nChave de idempotência.\n Response 200 OK content-type: application/json Body\n{ \"id\": \"e43e3003-c587-4cb8-ab37-b374fe0d157f\", \"branch_code\": \"1234\", \"institution_code\": \"197\", \"account_code\": \"4567864\" } ","categories":"","description":"","excerpt":"POST …","ref":"/docs/referencia-da-api/contatos/atualizar-conta-bancaria-de-um-contato/","tags":"","title":"Atualizar Conta Bancária de Um Contato"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers  QUERY PARAMS  account_id* string Identificador da conta.\n before* string Cursor opaco da paginação.\n after* string Cursor opaco da paginação.\n limit* int32 Limite de itens retornados.\nResponse 200 OK content-type: application/json Body\n{ \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:14:34Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:14:34Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"delayed_to_next_business_day\": false, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 400, \"finished_at\": \"2019-08-02T18:14:34Z\", \"id\": \"7458c329-c5e9-4cc8-8174-3aa6210a8867\", \"refund_reason_code\": null, \"refund_reason_description\": null, \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to_effective\": null, \"scheduled_to_requested\": null, \"settled_at\": \"2019-08-02T18:14:34Z\", \"status\": \"FINISHED\", \"target\": { \"account\": { \"account_code\": \"58859\", \"branch_code\": \"1\", \"institution_code\": \"90400888\", \"institution_ispb\": \"90400888\", \"institution_name\": \"Banco Santander (Brasil) S. A.\", \"institution_number_code\": \"033\" }, \"entity\": { \"cpf\": \"62752545053\", \"document\": \"62752545053\", \"document_type\": \"cpf\", \"name\": \"Octacilio Impoluto\" } } }, { \"amount\": 5000, \"approval_expired_at\": null, \"approved_at\": \"2019-07-31T19:15:00Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-07-31T19:15:00Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"delayed_to_next_business_day\": false, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 400, \"finished_at\": \"2019-07-31T19:15:01Z\", \"id\": \"0fa4b070-599b-47c1-b03b-541432f24dea\", \"refund_reason_code\": null, \"refund_reason_description\": null, \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to_effective\": null, \"scheduled_to_requested\": null, \"settled_at\": \"2019-07-31T19:15:01Z\", \"status\": \"FINISHED\", \"target\": { \"account\": { \"account_code\": \"10842258\", \"branch_code\": \"3223\", \"institution_code\": \"90400888\", \"institution_ispb\": \"90400888\", \"institution_name\": \"Banco Santander (Brasil) S. A.\", \"institution_number_code\": \"033\" }, \"entity\": { \"cpf\": \"37818425098\", \"document\": \"37818425098\", \"document_type\": \"cpf\", \"name\": \"Jo\\u00e3o Amigavel\" } } } ] } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/transferencias/transferencias-externas/listar-transferencias-externas/","tags":"","title":"Listar Transferências Externas"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/statement \nPATH PARAMS\n account_id string\nIdentificador da Conta.\nQUERY PARAMS\n limit int32\nbefore string\nTraz a página anterior ao cursor.\nafter string\nTraz a página posterior ao cursor.\nstart_datetime string\nValor referente a data de criação da transação.\nFormat: ISO8601 - “YYYY-MM-DDThh:mm:ssZ”\nend_datetime string\nValor referente a data de criação da transação.\nFormat: ISO8601 - “YYYY-MM-DDThh:mm:ssZ”\ntype string\nFiltra o extrato por um ou mais tipos de registro.\nValores possíveis: internal, external, external_refund, payment, payment_refund, balance_block, card_payment, salary_portability, salary_portability_refund, salary_portability_employer_refund e instant_payment.\nPara escolher mais de um type, basta incluir no final da requisição os types.\nExemplo:\n /statement?type[]=external\u0026type[]=internal; /statement?operation=credit|debit.  Valor da Operação\nTambém repare que, quando se faz uma transferência de R$100,00, por exemplo, o campo _operation_amount_ terá valor de 10000 centavos. Já o campo amount será a soma do valor da operação com a taxa cobrada (fee_amount).\n  Tipos diferentes de extratos\nO extrato é dividido por tipos de movimentação. É possível consultar qual foi a movimentação pelo type da resposta. No exemplo acima, podemos notar que tivemos duas movimentações: uma transferência interna (type:internal) e uma transferência externa (type:external), ambas com campos de resposta diferentes. Veja neste link para mais informações sobre o JSON Schema de cada tipo de operação.\n Response  201 Created content-type: application/json \nBody  { \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"amount\": -1600, \"balance_after\": 9998300, \"balance_before\": 9999900, \"counter_party\": { \"account\": { \"account_code\": \"58859\", \"branch_code\": \"1\", \"institution\": \"16501555\", \"institution_name\": \"Stone Pagamentos S.A.\" }, \"entity\": { \"name\": \"João Amigavel\" } }, \"created_at\": \"2019-07-31T19:13:56Z\", \"description\": \"\", \"fee_amount\": 0, \"id\": \"5357781a-c318-41aa-80eb-269df1b65ba3\", \"operation\": \"debit\", \"operation_amount\": 1600, \"operation_id\": \"4aab75b9-c15f-4d27-82e2-ec9c549c1cd8\", \"scheduled_at\": null, \"scheduled_to\": null, \"status\": \"FINISHED\", \"type\": \"internal\" }, { \"amount\": -100, \"balance_after\": 9999900, \"balance_before\": 10000000, \"barcode\": \"89690000000010003139343476533694034641055662\", \"created_at\": \"2019-07-31T19:12:51Z\", \"details\": { \"bank_name\": null, \"expiration_date\": null, \"recipient_cpf_cnpj\": \"90890860998\", \"recipient_name\": \"Sr. Luiz Bulhões\", \"writable_line\": \"896900000002010003139341347653369400346410556622\" }, \"fee_amount\": 0, \"id\": \"4d1d6f7b-187c-4ad4-acb6-4bf573609a6b\", \"operation\": \"debit\", \"operation_amount\": 100, \"operation_id\": \"ace4331a-45ef-488a-9fde-c439739b9d4a\", \"scheduled_at\": null, \"scheduled_to\": null, \"status\": \"FINISHED\", \"type\": \"payment\", \"writable_line\": \"896900000002010003139341347653369400346410556622\" } ] } \nObservação Na resposta acima foram feitas duas transferências, uma interna e uma externa, ambas com as suas particularidades de retorno.\nEm cada extrato há duas informações: {balance before} e {balance after}. O _balance_before_ registra o saldo do usuário antes da operação, e o _balance_after_ registra o saldo após a operação dado o _balance_before_ menos o valor da operação.\n ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-extrato/","tags":"","title":"Consultar Extrato"},{"body":"Documentação para integração no sistema interno Panda.\n","categories":"","description":"","excerpt":"Documentação para integração no sistema interno Panda.\n","ref":"/docs/guias/integracao-para-fornecedores/","tags":"","title":"INTEGRAÇÃO PARA FORNECEDORES"},{"body":"DELETE https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/contacts/contact_id/bank_accounts/bank_account_id  PATH PARAMS  account_id string\nIdentificador da conta.\n contact_id string\nIdentificador do contato.\n bank_account_id string\nIdentificador da conta bancária do contato.\n Response 200 OK ","categories":"","description":"","excerpt":"DELETE …","ref":"/docs/referencia-da-api/contatos/excluir-conta-bancaria-de-um-contato/","tags":"","title":"Excluir Conta Bancária de Um Contato"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers/transfer_id  PATH PARAMS  transfer_id* string Identificador da transferência externa.\nResponse 200 OK content-type: application/json Body\n{ \"amount\": 100, \"approval_expired_at\": null, \"approved_at\": \"2019-08-02T18:14:34Z\", \"approved_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"cancelled_at\": null, \"created_at\": \"2019-08-02T18:14:34Z\", \"created_by\": \"user:08807157-f8e1-439e-a2ec-154ecb4bee13\", \"delayed_to_next_business_day\": false, \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 400, \"finished_at\": \"2019-08-02T18:14:34Z\", \"id\": \"7458c329-c5e9-4cc8-8174-3aa6210a8867\", \"refund_reason_code\": null, \"refund_reason_description\": null, \"refunded_at\": null, \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to_effective\": null, \"scheduled_to_requested\": null, \"settled_at\": \"2019-08-02T18:14:34Z\", \"status\": \"FINISHED\", \"target\": { \"account\": { \"account_code\": \"58859\", \"branch_code\": \"1\", \"institution_code\": \"90400888\", \"institution_ispb\": \"90400888\", \"institution_name\": \"Banco Santander (Brasil) S. A.\", \"institution_number_code\": \"033\" }, \"entity\": { \"cpf\": \"62752545053\", \"document\": \"62752545053\", \"document_type\": \"cpf\", \"name\": \"Octacilio Impoluto\" } } } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/transferencias/transferencias-externas/retornar-uma-transferencia-externa/","tags":"","title":"Retornar Uma Transferência Externa"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/statement/entries/entry_id \nPATH PARAMS\n entry_id string\nIdentificador da entrada.\nResponse  201 OK content-type: application/json \nBody  { \"amount\": -5400, \"balance_after\": 9992900, \"balance_before\": 9998300, \"counter_party\": { \"account\": { \"account_code\": \"10842258\", \"branch_code\": \"3223\", \"institution\": \"90400888\", \"institution_name\": \"Banco Santander (Brasil) S. A.\" }, \"entity\": { \"document\": \"37818425098\", \"document_type\": \"cpf\", \"name\": \"João Amigavel\" } }, \"created_at\": \"2019-07-31T19:15:00Z\", \"delayed_to_next_business_day\": false, \"fee_amount\": 400, \"id\": \"cf88fb2e-6026-43d8-8d66-1a7283fd8512\", \"operation\": \"debit\", \"operation_amount\": 5000, \"operation_id\": \"0fa4b070-599b-47c1-b03b-541432f24dea\", \"refund_reason_code\": null, \"refund_reason_description\": null, \"scheduled_at\": null, \"scheduled_to_effective\": null, \"scheduled_to_requested\": null, \"status\": \"FINISHED\", \"type\": \"external\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-uma-entrada-no-extrato/","tags":"","title":"Consultar Uma Entrada no Extrato"},{"body":" Horário de funcionamento   Baixa Manual de Boletos\nA API para baixa manual de boletos e concessionárias fica disponível 24/7;\nBaixa de boletos realizadas após às 23h50 ocorrerão no dia útil seguinte em que a operação foi realizada;\nBaixa manual de concessionárias são realizadas entre 7h00 e 20h00, ou seja, baixas solicitadas após às 20h serão realizadas às 7h do dia seguinte.\n   POST https://sandbox-api.openbank.stone.com.br/api/v1/barcode_payment_invoice/id/cancel \nQUERY PARAMS  id* string Identificador do boleto que se quer cancelar.\nO cancelamento do boleto ocorre de forma assíncrona. Após a solicitação de cancelamento ser efetuada com sucesso, o status será alterado para cancelation_requested.\nAssim que o processo de cancelamento terminar, o status será alterado para CANCELLED. Para acompanhar o processo de cancelamento, utilize a api /barcode_payment_invoices/{id}/ e observe o status do boleto.\nAtenção\nNão será possível cancelar o boleto caso:\n exista algum pagamento em progresso o boleto esteja com status SETTLED   Response 200 OK content-type: application/json Body\n{ } ","categories":"","description":"","excerpt":" Horário de funcionamento   Baixa Manual de Boletos\nA API para baixa …","ref":"/docs/referencia-da-api/emissao-de-boletos/cancelar-boleto/","tags":"","title":"Cancelar um boleto"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/instituicoes/","tags":"","title":"Instituições"},{"body":" Taxas     Chave Descrição Tipo     amount Taxa vigente. No caso de external_tranfer pode ser diferente da taxa contratada (original_fee) caso billing_exemption_participant igual a true. Integer   fee_type Tipo de taxa. Veja abaixo os valores possíveis. String   billing_exemption_participant Só se aplica a external_transfer e barcode_payment_invoice . Indica se o usuário possui alguma condição especial vigente. Boolean   original_fee Só se aplica a external_transfer e barcode_payment_invoice. Indica a taxa original do item para a essa conta. Integer   max_free_transfers Só se aplica a external_transfer. Indica o número total de TEDs grátis que o usuário tem no período. Integer   max_free Só se aplica a barcode_payment_invoice. Indica o número total de boletos gerados que podem ser pagos sem que haja custos no período. Integer   remaining_free_transfers Só se aplica a external_transfer. Indica a número de TEDs grátis restantes no período. Integer   remaining_free Só se aplica a barcode_payment_invoice. Indica o número restante de boletos gerados que podem ser pagos sem que haja custos no periódo. Integer    Emissão de boleto\nA cobrança da taxa (barcode_payment_invoice) só é aplicada quando um boleto gerado é pago.\n Tipos de taxas     Valor Descrição     internal_transfer Transferência para outra Conta Stone.   external_transfer  Transferência para conta de outra instituição.   barcode_payment  Pagamento de um documento de codigo de barra. (boletos, tributos, concessionárias, etc)   outbound_stone_prepaid_card_payment Compra feita com cartão pré-pago.   outbound_stone_prepaid_card_withdrawal Saque feito com cartão.   barcode_payment_invoice  Boleto emitido pela Conta Stone que foi pago.    ","categories":"","description":"","excerpt":" Taxas     Chave Descrição Tipo     amount Taxa vigente. No caso de …","ref":"/docs/referencia-da-api/dados-da-conta/o-objeto-taxa/","tags":"","title":"O Objeto Taxas"},{"body":" POST https://sandbox-api.openbank.stone.com.br/api/v1/external_transfers/id/cancel  PATH PARAMS  id* string Identificador da transferência externa.\nResponse 204 No Content ","categories":"","description":"","excerpt":" POST …","ref":"/docs/referencia-da-api/transferencias/transferencias-externas/cancelamento-de-uma-transferencia-externa-agendada/","tags":"","title":"Cancelamento de Uma Transferência Externa Agendada"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/contatos/","tags":"","title":"Contatos"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/fees/fee_type \nPATH PARAMS\n account_id string\nIdentificador da conta.\nfee_type string\nTipo de taxa. Valores possíveis: internal_transfer, external_transfer, barcode_payment, outbound_stone_prepaid_card_payment, outbound_stone_prepaid_card_withdrawal e barcode_payment_invoice.\nOutros Campos\nNo caso de external_transfer serão também retornados os campos billing_exempition_participant, original_fee, max_free_transfers e remaining_free_transfers.\nNo caso de barcode_payment_invoice também serão retornardos os campos billing_exempition_participant, original_fee, max_free e remaining_free.\n Response  201 OK content-type: application/json \nBody  { \"amount\": 130, \"fee_type\": \"internal_transfer\" } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-taxas/","tags":"","title":"Consultar Taxas"},{"body":" GET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/account_id/fees \nPATH PARAMS\n account_id string\nIdentificador da conta.\nResponse  201 OK content-type: application/json \nBody  { \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"amount\": 0, \"fee_type\": \"barcode_payment\" }, { \"amount\": 0, \"fee_type\": \"external_transfer\", \"original_fee\": 200, \"billing_exemption_participant\": true, \"max_free_transfers\": 20, \"remaining_free_transfers\": 3 }, { \"amount\": 0, \"fee_type\": \"internal_transfer\" }, { \"amount\": 100, \"fee_type\": \"boleto_issuance\" }, { \"amount\": 0, \"fee_type\": \"outbound_stone_prepaid_card_payment\" }, { \"amount\": 650, \"fee_type\": \"outbound_stone_prepaid_card_withdrawal\" }, { \"amount\": 200, \"fee_type\": \"barcode_payment_invoice\", \"original_fee\": 200, \"billing_exemption_participant\": true, \"max_free\": 20, \"remaining_free\": 3 } ] } ","categories":"","description":"","excerpt":" GET …","ref":"/docs/referencia-da-api/dados-da-conta/consultar-todas-as-taxas/","tags":"","title":"Consultar Todas as Taxas"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/emissao-de-boletos/","tags":"","title":"Boletos"},{"body":"Os endpoints utilizados serão:\n","categories":"","description":"Conheça os endpoints para realização do KYC de seu cliente.\n","excerpt":"Conheça os endpoints para realização do KYC de seu cliente.\n","ref":"/docs/referencia-da-api/kyc/","tags":"","title":"KYC (Alpha)"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/link-de-pagamentos/","tags":"","title":"Link de Pagamento"},{"body":" A integração com o Pix ainda está em Alpha, o que significa que temos um grupo pequeno de parceiros testando a funcionalidade para que possamos fazer ajustes e então liberar para todos os parceiros.\n O que é o Pix?  O Pix é a nova modalidade de pagamentos instantâneos do Banco Central, que entrou em vigor no Brasil inteiro no dia 16 de novembro de 2020.\nAlém de sua ampla grade de funcionamento e pequeno tempo de processamento, o Pix busca simplificar a experiência do usuário que consegue passar o dinheiro para outro participante informando apenas seu telefone, documento (CPF/CNPJ), seu email ou lendo um QR Code. Lembrando que também é possível fazer um Pix informando os dados bancários, como é feito em uma TED.\nHorário de funcionamento A API de Pix fica disponível todos os dias da semana e 24 horas por dia, pois é uma modalidade de pagamento instantânea.  Participantes do Pix  O Pix tem quatro tipos de participantes principais:\n Participante Direto (PSP direto): Instituição homologada junto ao Banco Central (BC) que fará o processamento do Pix junto aos sistemas do BC tanto do ponto de vista informacional, quanto do ponto de vista financeiro. Ou seja, além de ser responsável por toda a troca de informação com os sistemas do Pix, quando agindo como instituição do pagador será a instituição que enviará o dinheiro para o BC e quando agindo como instituição do recebedor receberá o dinheiro do BC. Fazendo um comparativo com o arranjo de cartões seria mais ou menos o equivalente a adquirência e o emissor dependendo se estamos agindo ao lado do recebedor ou do pagador respectivamente.  Participante Indireto (PSP indireto): Instituição homologada junto ao Banco Central que fará parte do arranjo do Pix tanto do ponto de vista informacional, quanto do ponto de vista financeiro, mas que usará um participante direto para fazer a intermediação da integração com os sistemas do Pix. Fazendo um comparativo com o arranjo de cartões seria mais ou menos o equivalente a uma subadquirente.  Usuário Recebedor: é quem vai receber o dinheiro da transação que está sendo efetuada. Fazendo um comparativo com o arranjo de cartões, seria mais ou menos o equivalente ao lojista.  Usuário Pagador: é quem vai pagar a transação que está sendo efetuada. Fazendo um comparativo com o arranjo de cartões seria mais ou menos o equivalente ao comprador / dono do cartão.\n  Status de um Pix  Os status possiveis são: CREATED, CONFIRMED, FAILED, MONEY_RESERVED, REFUNDED e SETTLED. A partir do momento que um Pix é criado, ele nunca expira.\n  CREATED - Significa que o Pix foi criado e está aguardando confirmação.\n  CONFIRMED - Significa que o Pix que foi criado e estava com o status CREATED, foi confirmado.\n  MONEY_RESERVED - Significa que o Pix que foi confirmado e estava com o status CONFIRMED, teve o dinheiro retirado da conta do cliente e reservado em uma conta gráfica a parte para a operação.\n  SETTLED - Significa que o Pix que estava com o estado de MONEY_RESERVED, foi finalizado e liquidamos o dinheiro reservado na conta gráfica da operação.\n  REFUNDED - Significa que o Pix que estava com o estado de MONEY_RESERVED, foi rejeitado ou devolvido.\n  FAILED - Significa que o Pix que estava com o estado de CONFIRMED, falhou no momento de reservar o dinheiro, podendo ser devido a falta de saldo do cliente, e portanto ele vai para o estado de FAILED e o fluxo da operação se encerra.\n  Fluxo para criação de um Pix   Realiza request através do endpoint /api/v1/pix/outbound_pix_payments enviando parâmetros validos. Este irá retornar uma resposta com os dados do Pix. Realiza request através do endpoint /api/v1/pix/outbound_pix_payments/{id}/actions/confirm informando o campo id retornado pela resposta do passo 1.\n  Fluxo de criação de Pix através da leitura do QRCode   Realiza request através do endpoint /api/v1/outbound_pix_payments/brcode informando o QRCode através do campo brcode. Este irá retornar uma reposta com os dados do QRCode. Realiza request através do endpoint /api/v1/pix/outbound_pix_payments enviando parâmetros validos. Este irá retornar uma resposta com os dados do Pix. Realiza request através do endpoint /api/v1/pix/outbound_pix_payments/{id}/actions/confirm informando o campo id retornado pela resposta do passo 2.\n  ","categories":"","description":"","excerpt":" A integração com o Pix ainda está em Alpha, o que significa que temos …","ref":"/docs/referencia-da-api/pix/","tags":"","title":"Pix (Alpha)"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/recargas/","tags":"","title":"Recargas"},{"body":"","categories":"","description":"","excerpt":"","ref":"/docs/referencia-da-api/conta-stone-sdk/","tags":"","title":"Conta Stone SDK (Beta)"},{"body":"\nEste endpoint lista todas as operações agendadas que não foram liquidadas até o momento da consulta.\nGET https://sandbox-api.openbank.stone.com.br/api/v1/accounts/{id}/schedulings  HEADERS  Authorization string Bearer token\nPATH PARAMS  id string Identificador da conta onde se deseja ver os agendamentos.\nQUERY PARAMS  limit int32\nbefore string\nTraz a página anterior ao cursor.\nafter string\nTraz a página posterior ao cursor.\n\nResponses  \nTransferência interna\n200 OK content-type: application/json { \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"amount\": -1, \"counter_party\": { \"account\": { \"account_code\": \"5053418\", \"branch_code\": \"1\", \"institution\": \"16501555\", \"institution_name\": \"Stone Pagamentos S.A.\" }, \"entity\": { \"name\": \"Gabriela Abreu de Andrade\" } }, \"created_at\": \"2021-05-25T20:26:29Z\", \"description\": \"\", \"fee_amount\": 0, \"operation\": \"debit\", \"operation_amount\": 1, \"operation_id\": \"b6b82602-4d14-4095-ae6b-556df74abcaf\", \"scheduled_to\": \"2021-05-27\", \"status\": \"SCHEDULED\", \"type\": \"internal\" } ] } \nTransferência externa\n200 OK content-type: application/json { \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"amount\": -1, \"counter_party\": { \"account\": { \"account_code\": \"10022294\", \"branch_code\": \"4208\", \"institution\": \"90400888\", \"institution_name\": \"BANCO SANTANDER (BRASIL) S.A.\" }, \"entity\": { \"document\": \"12409265707\", \"document_type\": \"cpf\", \"name\": \"Gabi\" } }, \"created_at\": \"2021-06-02T19:19:00Z\", \"delayed_to_next_business_day\": false, \"fee_amount\": 0, \"operation\": \"debit\", \"operation_amount\": 1, \"operation_id\": \"7dd83a74-7e44-4263-8925-6d5e66ba7444\", \"scheduled_to_effective\": \"2021-06-04\", \"scheduled_to_requested\": \"2021-06-04\", \"status\": \"SCHEDULED\", \"type\": \"external\" } ] } \nPagamento\n200 OK content-type: application/json { \"cursor\": { \"after\": null, \"before\": null, \"limit\": 25 }, \"data\": [ { \"amount\": -2000, \"barcode\": \"19798864100000020000000001238028677662514706\", \"created_at\": \"2021-06-02T19:20:53Z\", \"details\": { \"bank_name\": null, \"expiration_date\": \"2021-06-04\", \"recipient_cpf_cnpj\": \"92961229022\", \"recipient_name\": \"Nome do CPF 92961229022\", \"writable_line\": \"19790000050123802867276625147061886410000002000\" }, \"fee_amount\": 0, \"operation\": \"debit\", \"operation_amount\": 2000, \"operation_id\": \"7ee2777f-5fd2-4f72-a5e9-071787964dd8\", \"scheduled_to\": \"2021-06-04\", \"status\": \"SCHEDULED\", \"type\": \"payment\", \"writable_line\": \"19790000050123802867276625147061886410000002000\" } ] }  Mensagens de erro 400 Bad Request content-type: application/json { \"path\": \"limit\", \"type\": \"srn:error:invalid_cursor\" }  403 Forbidden content-type: application/json { \"type\": \"srn:error:unauthorized\" } ","categories":"","description":"","excerpt":"\nEste endpoint lista todas as operações agendadas que não foram …","ref":"/docs/referencia-da-api/agendamento/operacoes-agendadas/","tags":"","title":"Operações Agendadas"},{"body":" Escreva o Banco do futuro. Uma linha de código por vez.  Comece aqui!     Saiba Mais            Guias Não sabe por onde começar? Dê uma olhada nesses guias preparados especialmente para você.\nIr para o guia     Referência da API Conheça os endpoints da nossa API e seus contratos.\nVer Documentação     Parceiros Quer entender mais dos nossos modelos de parceria? Sem problemas, fale com nosso time comercial!\nQuero ser parceiro      SDKs Quer desenvolver com facilidade? Utilize nossas SDKs\nQuero usar a SDK      Status Page Em Breve\n    FAQ Em Breve\n      Quer entender o melhor modelo de parceria para seu negócio? Fale com nosso time comercial!\nEntrar em contato       ","categories":"","description":"","excerpt":" Escreva o Banco do futuro. Uma linha de código por vez.  Comece aqui! …","ref":"/","tags":"","title":"Stone OpenBank"},{"body":"Lista de feriados e fins de semana presentes em um intervalo de tempo especificado pelos query string params start e end. O valor default para o parâmetro start é o dia atual e o valor default para o parâmetro end é o dia atual + 1 ano.\nA flag is_holiday é true quando o dia não útil é um feriado e é false quando é apenas um final de semana. Apenas feriados apresentam os campos prefixados por holiday_ preenchidos.\nCada operação na API (payment, external_transfer e internal_transfer) tem um calendário específico. Por isso, os recursos da API de calendário podem ser acessados indicando sobre qual operação se deseja ter informações do calendário. Isso é feito pelo query string param operation_type, que pode assumir os valores: external_transfer, internal_transfer ou payment.\nO campo execution_limit_date representa o limite para o qual um agendamento pode ser efetuado. O default é dia atual + 1 ano.\nO campo next_available_execution_date representa o próximo dia disponível para agendamento.\nGET https://sandbox-api.openbank.stone.com.br/api/v1/schedulings/calendar  QUERY PARAMS  start string Data que define o início do intervalo no qual serão buscados dias não úteis. Format: yyyy-mm-dd\nend string Data que define o fim do intervalo no qual serão buscados dias não úteis. Format: yyyy-mm-dd\noperation_type* string Define qual é a operação relativa ao calendário desejado. Format: binary Allowed Values: payment, external_tranfer e internal_transfer\n HEADERS  If-None-Match string Etag. Se for igual etag do conteúdo, a resposta será 304\n Response  201 Created content-type: application/json Body\n{ \"execution_limit_date\": \"2020-03-30\", \"next_available_execution_date\": \"2019-04-01\", \"non_business_days\": [ { \"date\": \"2019-03-30\", \"is_weekend\": true, \"is_holiday\": true, \"holiday_description\": \"Feriado\" }, { \"date\": \"2019-03-31\", \"is_weekend\": true, \"is_holiday\": false, \"holiday_description\": null } ] } ","categories":"","description":"","excerpt":"Lista de feriados e fins de semana presentes em um intervalo de tempo …","ref":"/docs/referencia-da-api/agendamento/calendario-de-agendamento/","tags":"","title":"Calendário de Agendamento"},{"body":"Comprovantes informam sobre uma transação em detalhes, como fonte, destinatário e estado.\nAs operações que podem ter seu comprovante gerado são apenas as operações: Pagamento com código de barras, envio de TEDs, envio de transferências internas e extrato.\nComprovantes podem ser gerados apenas para transferências em estados de sucesso, como aprovada e agendada.\nComprovantes para extrato aceitam os parâmetros adicionais start_datetime e end_datetime para especificar o intervalo de tempo cujas entradas serão levadas em consideração ao gerar o comprovante.\nPOST https://sandbox-api.openbank.stone.com.br/api/v1/receipts  BODY PARAMS  resource_type* string Allowed values: external_transfer, internal_transfer, payment e statement\nresource_id* string Format: UUID\nstart_datetime string Format: ISO8601 - \"YYYY-MM-DDThh:mm:ssZ\" Example: \"2021-01-01T00:00:00Z\"\nend_datetime string Format: ISO8601 - \"YYYY-MM-DDThh:mm:ssZ\" Example: \"2021-01-01T00:00:00Z\"\n\n HEADERS  x-stone-idempotency-key string\n\n Response 200 OK content-type: application/json Retorna o PDF do comprovante\n","categories":"","description":"","excerpt":"Comprovantes informam sobre uma transação em detalhes, como fonte, …","ref":"/docs/referencia-da-api/comprovantes/como-emitir-um-comprovante/","tags":"","title":"Como Emitir Um Comprovante"},{"body":" Neste tutorial vamos ver como:\n Gerar o token de autenticação; Gerar o token e link de consentimento; Operar em contas que já concederam acesso à aplicação parceira.  Utilizaremos a linguagem Python na versão 3.7 para montar o token e a biblioteca PyJWT para assiná-lo.\nConheça suas ferramentas\nÉ importante ler a documentação das bibliotecas utilizadas. A biblioteca utilizada neste tutorial, PyJWT, tem uma dependência extra para alguns algoritmos específicos. É o caso do algoritmo que será utilizado, RS256, que tem dependência da biblioteca cryptography. Por conta disso, esta biblioteca também precisa ser instalada.\n 1. Conhecendo os dados Como resultado do cadastro da sua aplicação, você recebeu um ClientID. Além disso, nos forneceu uma chave pública e manteve em segredo uma chave privada. Agora vamos ver como utilizá-los na prática.\nPara montar os tokens, tenha em mãos o seu redirect_uri cadastrado, o seu ClientID e sua chave privada.\n2. Se preparando para gerar tokens Aqui vamos importar as bibliotecas que vamos utilizar e definir algumas constantes.\nimport jwt import time import requests MINUTE = 60 HOUR = 3600 CLIENT_ID = \"92b5f9aa-9552-45f4-86cb-c0331c9178a2\" REDIRECT_URI = \"https://myapplication.com/consent_callback\" ACCOUNTS_URL = \"https://sandbox-accounts.openbank.stone.com.br\" API_URL = \"https://sandbox-api.openbank.stone.com.br/api/v1\" Armazenamos a chave privada no arquivo private.pem e preparamos uma função para gerar o token. Essa função recebe um parâmetro com os claims e usa a chave privada para gerar e assinar o token.\nLembrando que se trata de um processo de criptografia assimétrica. Neste processo, o desenvolvedor assina o token com sua chave privada e a Stone utiliza a chave pública compartilhada com a gente para verificar que realmente foi a aplicação parceira quem gerou o token.\ndef generate_token(claims): with open(\"private.pem\", \"r\") as key_file: token = jwt.encode(claims, key_file.read(), algorithm='RS256') return token.decode() Agora podemos assinar qualquer conjunto de claims e o resultado será um JWT.\nÉ possível utilizar claims arbitrários para testar essa funcionalidade:\n\u003e\u003e\u003e generate_token({\"claim\": \"qualquer\"}) 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJjbGFpbSI6InF1YWxxdWVyIn0.hUGnpB5pI38TbQy8XDjXMmFTLWvYjk98UaTELfkJmHU0EK9-ZOTzSSNKdqOB0puGHr2xMRXta6WZLQmkRqJCVHSA6zsIdW0ABJiPaHXVOHFidq7iGZAbZtgHBf6b3ctko7OGxfLDJGedH3gYVh9i_tJ3S0kWpvLS7yMqNgwyHI4ZJecmL-qYD30FgrhGqyMK3LCxId7O_T6_QOisaLe_XXstXUnm82qvDh7iMZPqhV39V_CxnLl6CVZp2IfdQ3i8LAmtqaxhYSTODwBj47zOm_4bhfOcMO91LxY3wWW8fU7Qr8hyiUHqayBTiLRYqEGet_esQ_rrVFOn0F3tU0eWSA' Se chegou a este mesmo resultado, você tem uma função que pode ser utilizada para assinar qualquer um dos seus tokens.\nA biblioteca escolhida incluiu automaticamente no header as informações de tipo e algorítimo utilizados para gerar o token. Para se certificar da validade do token é possível utilizar o site jwt.io.\nObserve que trabalhamos com vários tokens JWT diferentes e utilizamos claims diferentes de acordo com a finalidade do token.\nPara o token de autenticação, é preciso utilizar os claims descritos em Autenticação; para o token de consentimento, serão utilizados os claims descritos em Consentimento.\n3. Montando o token de autenticação Inicialmente, é preciso consultar quais os claims específicos do token de autenticação na documentação.\nAtravés da função que construimos é possível gerar e assinar esse token de forma simples.\nEsse token será enviado para a Stone através de uma chamada para nosso servidor de autenticação, e enviaremos como resposta um access_token.\nO access_token também é do tipo JWT, e funciona como uma chave de acesso para todas requisições na API.\ndef auth_claims(): now = int(time.time()) return { \"aud\": f\"{ACCOUNTS_URL}/auth/realms/stone_bank\", \"clientId\": CLIENT_ID, \"exp\": now + 5 * MINUTE, \"iat\": now, \"jti\": f'token_id:{str(time.time())}', \"nbf\": now, \"realm\": \"stone_bank\", \"sub\": CLIENT_ID, } def authenticate(): auth_token = generate_token(auth_claims()) data = { \"client_assertion_type\": \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\", \"client_assertion\": auth_token, \"client_id\": CLIENT_ID, \"grant_type\": \"client_credentials\", } response = requests.post( f\"{ACCOUNTS_URL}/auth/realms/stone_bank/protocol/openid-connect/token\", data=data) return response.json()[\"access_token\"] Neste exemplo, estamos definindo uma função que retorna um dicionário com todos os claims necessários para o token de autenticação. Em seguida, é preciso enviar esse token e mais algumas informações para o nosso serviço de autenticação via POST.\nA biblioteca requests foi a escolhida para realizar as requisições HTTP. No parâmetro data, envia-se dados no formato “x-www-form-urlencoded” já que este é o formato esperado pelo servidor de autenticação. Ver documentação.\nNo parâmetro params envia-se os dados no formato Query String, e no parâmetro headers informamos o que será enviado no cabeçalho da requisição.\nPara facilitar o acesso aos dados da resposta, convertemos o conteúdo para JSON e retornamos o access_token.\nPara utilizar o token de acesso, é preciso apenas adicionar esse token em um cabeçalho authorization com o valor Bearer TOKEN. Com isso, já é possível operar na API como é demonstrado mais a frente.\n4. Montando o link de consentimento Assim como para o token de autenticação, inicialmente consultamos quais os claims específicos do token de consentimento na documentação e, em seguida, utilizamos a função que construimos para gerar e assinar o token.\nNeste caso, vamos um pouco além da geração do token, utilizando uma função para montar o link de consentimento com os três parâmetros especificados na documentação.\nResumindo o passo a passo para obter o link do consentimento, é preciso:\n Montar os claims para o token; Criar o token; Montar o link.  def consent_claims(): now = int(time.time()) return { \"aud\": \"accounts-hubid@openbank.stone.com.br\", \"client_id\": CLIENT_ID, \"exp\": now + 2 * HOUR, \"iat\": now, \"iss\": CLIENT_ID, \"jti\": str(time.time()), \"nbf\": now, \"redirect_uri\": REDIRECT_URI, \"session_metadata\": {\"sid\": f'key:{time.time()}'}, \"type\": \"consent\", } def consent_token(): return generate_token(consent_claims()) def consent_link(): return f\"{ACCOUNTS_URL}/consentimento?client_id={CLIENT_ID}\u0026jwt={consent_token()}\" O resultado será um link válido por duas horas. Ele pode ser acessado e testado através do navegador.\nObserve que alguns detalhes podem ser adaptados de acordo com as necessidades específiicas de controle de tokens da sua aplicação.\nUm exemplo é parâmetro jti, que faz parte dos claims e atua como um identificador do token. No código acima, é utilizada apenas uma string com o timestamp do momento como forma de garantir sua unicidade. Para sua aplicação é possível utilizar outros valores de forma a facilitar a identificação do token.\nOutro exemplo é o campo session_metadata, para o qual passamos um dicionário único apenas por ser um campo obrigatório. Neste caso não temos intenção de controlar a sessão, mas a desenvolvedora pode utilizá-lo para esta finalidade, passando valores que se encaixam nas suas necessiades.\n5. Utilizando a API Utilizando seu access_token já é possível acessar as funcionalidades da API, de acordo com o que a sua aplicação tem permissão de fazer. Para ter permissão de criar transações em contas de usuários, ou até de visualizar seus dados, é preciso obter consentimento do dono da conta. Isso é possível enviando o link construído no passo anterior para a usuária, para que ela possa dar acesso à conta.\nConsultando as contas às quais a aplicação parceira tem acesso Através da API é possível, por exemplo, consultar a quais contas você tem acesso, tanto no caso de você ser uma aplicação parceira com consentimento para acessar contas, quanto no caso de você ser proprietário de alguma conta.\nPara isso, é preciso apenas consultar o endpoint Consultar Todas Contas às Quais Se Tem Acesso, utilizando seu access_token.\nOutra forma de acessar esse endpoint é realizando uma chamada para nossa API, enviando seu access_token em um header. Abaixo podemos observar isso em um exemplo de função que poderia ser utilizada para realizar essa consulta.\ndef operational_accounts(access_token, pagination_params={}): url = f\"{API_URL}/accounts\" params = {\"paginate\": \"true\", **pagination_params} response = requests.get( url, params=params, headers={\"authorization\": f'Bearer {access_token}'} ).json() return response['data'] Analisando o código acima, podemos chegar às seguintes conclusões:\nObserve que temos dois parâmetros na função operational_accounts: access_token e pagination_params.\n  access_token : É o resultado de uma autenticação bem sucedida. Sempre que uma aplicação parceira se autenticar receberá um token de acesso, cuja validade é informada em seus claims;\n  pagination_params: A maior parte dos nossos endpoints utilizam uma paginação padrão. Isso permite realizar requisições HTTP de forma mais prática, além de poupar consumo de rede.\n  E, por fim, obtem-se como resposta uma lista das contas às quais a aplicação tem acesso.\nPadrões da Nossa API\nSeguimos alguns padrões para alguns tipos de dados em toda a nossa API. Aqui se encontram alguns destes padrões.\n Criando transferências em uma conta Outra funcionalidade é a criação de transferências, tanto entre contas Stone como também de uma conta Stone para contas em outros bancos.\nAssim como no caso anterior e de forma padrão para nossos endpoints, para acessá-los é preciso apenas obter permissão de acesso através do consentimento ou ser o próprio dono da conta, e provar isso enviando seu access_token em um header. As informações de permissões de um sujeito são armazenadas em seu access_token.\nO exemplo a seguir foi construído considerando uma aplicação com acesso a pelo menos duas contas, e que a primeira conta tem saldo suficiente para a transferência.\ndef internal_transfer(token, params): url = f'{API_URL}/internal_transfers' response = requests.post(url, json=params, headers={ \"authorization\": f'Bearer {token}' }).json() return response token = authenticate() accounts = operational_accounts(token) internal_transfer_params = { \"amount\": 1000, \"account_id\": accounts[0][\"id\"], \"target\": { \"account\": {\"account_code\": accounts[1][\"account_code\"]} } } response = internal_transfer(token, internal_transfer_params) print(response.json()) Ocorrendo tudo bem, você receberá como retorno as informações da transferência recém-criada. Em caso de erro como, por exemplo, por saldo insuficiente, receberá como retorno uma mensagem de erro.\nSuccess { \"amount\": 1000, \"approval_expired_at\": null, \"approved_at\": null, \"approved_by\": null, \"cancelled_at\": null, \"created_at\": \"2019-07-29T13:40:05Z\", \"created_by\": \"application:92b5f9aa-9552-45f4-86cb-c0331c9178a2\", \"description\": \"\", \"failed_at\": null, \"failure_reason_code\": null, \"failure_reason_description\": null, \"fee\": 0, \"finished_at\": null, \"id\": \"000ebdf8-4acf-4ed2-83e9-f0c7a766ac61\", \"rejected_at\": null, \"rejected_by\": null, \"scheduled_to\": null, \"settled_at\": null, \"status\": \"CREATED\", \"target\": { \"account\": { \"account_code\": \"517532\" }, \"entity\": { \"name\": \"Severo\" } }, \"target_account_code\": \"517532\", \"target_account_owner_name\": \"Severo\" }   Failure {\"type\": \"srn:error:not_enough_funds\"}   Conclusão Utilizando tokens é possível se autenticar e realizar a solicitação de consentimento em contas de usuários de forma segura.\nÉ preciso utilizar uma biblioteca para gerar e assinar os tokens JWT. A escolha da biblioteca deve ser feita com cuidado pois é preciso ter conhecimento de como utilizá-la corretamente para obter sucesso gerando os tokens.\nÉ interessante também consultar os claims específicos para cada token na sessão adequada da documentação, além de se atentar à necessidade de utilizar sua chave privada e o algoritmo RS256 para assinar seus tokens.\nUtilizando o access_token e obtendo consentimento, já é possível realizar chamadas na API e acessar suas funcionalidades, como consultar as contas às quais a aplicação tem acesso, consultar o saldo dessas contas e criar transferências.\n","categories":"","description":"","excerpt":" Neste tutorial vamos ver como:\n Gerar o token de autenticação; Gerar …","ref":"/docs/guias/tutoriais/integrando-na-pratica/","tags":"","title":"Integrando na Prática"},{"body":"","categories":"","description":"","excerpt":"","ref":"/search/","tags":"","title":"Search Results"}]