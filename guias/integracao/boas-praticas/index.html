<!doctype html><html lang=pt><head><meta charset=utf-8><title>Boas Práticas</title><meta name=generator content="Hugo 0.69.0"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=stylesheet href=https://stone-co.github.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://stone-co.github.io/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://stone-co.github.io/plugins/highlight/hybrid.css><link rel=icon href=https://stone-co.github.io/images/favicon.png type=image/x-icon><link href=../../assets/css/circular.css rel=stylesheet><style>:root{--primary-color:#14aa4b;--body-color:#f8f9fd;--text-color:#677481;--text-color-dark:#5a6872;--white-color:#ffffff;--light-color:#f4f4f9;--font-family:'Circular'}</style><link href=https://stone-co.github.io/css/style.min.css rel=stylesheet media=screen><script src=https://stone-co.github.io/plugins/jquery/jquery-1.12.4.js></script><script src=https://stone-co.github.io/plugins/jquery/jquery-ui.js></script><script src=https://stone-co.github.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://stone-co.github.io/plugins/match-height/jquery.matchHeight-min.js></script><script src=https://stone-co.github.io/plugins/highlight/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/><img class=img-fluid src=https://stone-co.github.io/stoneg.png alt="Stone OpenBank"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=/></a></li><li class=nav-item><a class="nav-link text-dark" href=https://docs.openbank.stone.com.br/reference>Referência da API</a></li><li class=nav-item><a class="nav-link text-dark" href=/guias>Guias</a></li><li class=nav-item><a class="nav-link text-dark" href="https://app.pipefy.com/public/form/Qz4ptt_W?origem_do_lead=Formul%C3%A1rio%20comercial%20documenta%C3%A7%C3%A3o">Quero ser parceiro</a></li></ul></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class="bg-white pl-lg-4 py-4 pr-4 mb-5 mb-lg-0 sticky-top top-100 overflow-hidden"><ul class=list-styled><a class="d-block h4 back-btn" href=/></a><li data-nav-id=https://stone-co.github.io/guias/ title=Guias class=sidelist><a href=https://stone-co.github.io/guias/>Guias</a><ul><li data-nav-id=https://stone-co.github.io/guias/stone-openbank-api/ title="Stone Openbank API" class=sidelist><a href=https://stone-co.github.io/guias/stone-openbank-api/>Stone Openbank API</a><ul><li data-nav-id=https://stone-co.github.io/guias/stone-openbank-api/overview/ title=Overview class=sidelist><a href=https://stone-co.github.io/guias/stone-openbank-api/overview/>Overview</a></li><li data-nav-id=https://stone-co.github.io/guias/stone-openbank-api/quickstart/ title=Quickstart class=sidelist><a href=https://stone-co.github.io/guias/stone-openbank-api/quickstart/>Quickstart</a></li><li data-nav-id=https://stone-co.github.io/guias/stone-openbank-api/ambientes-da-api/ title="Ambientes da API" class=sidelist><a href=https://stone-co.github.io/guias/stone-openbank-api/ambientes-da-api/>Ambientes da API</a></li></ul></li><li data-nav-id=https://stone-co.github.io/guias/a-conta-stone/ title="A Conta Stone" class=sidelist><a href=https://stone-co.github.io/guias/a-conta-stone/>A Conta Stone</a><ul><li data-nav-id=https://stone-co.github.io/guias/a-conta-stone/overview/ title=Overview class=sidelist><a href=https://stone-co.github.io/guias/a-conta-stone/overview/>Overview</a></li><li data-nav-id=https://stone-co.github.io/guias/a-conta-stone/modelos-de-parceria/ title="Modelos De Parceria" class=sidelist><a href=https://stone-co.github.io/guias/a-conta-stone/modelos-de-parceria/>Modelos De Parceria</a></li><li data-nav-id=https://stone-co.github.io/guias/a-conta-stone/aplicativos/ title=Aplicativos class=sidelist><a href=https://stone-co.github.io/guias/a-conta-stone/aplicativos/>Aplicativos</a></li></ul></li><li data-nav-id=https://stone-co.github.io/guias/integracao/ title=Integração class=sidelist><a href=https://stone-co.github.io/guias/integracao/>Integração</a><ul><li data-nav-id=https://stone-co.github.io/guias/integracao/boas-praticas/ title="Boas Práticas" class="sidelist
active"><a href=https://stone-co.github.io/guias/integracao/boas-praticas/>Boas Práticas</a></li><li data-nav-id=https://stone-co.github.io/guias/integracao/cadastro-da-aplicacao/ title="Cadastro da Aplicação" class=sidelist><a href=https://stone-co.github.io/guias/integracao/cadastro-da-aplicacao/>Cadastro da Aplicação</a></li><li data-nav-id=https://stone-co.github.io/guias/integracao/autenticacao/ title=Autenticação class=sidelist><a href=https://stone-co.github.io/guias/integracao/autenticacao/>Autenticação</a></li><li data-nav-id=https://stone-co.github.io/guias/integracao/testando-a-api/ title="Testando a API" class=sidelist><a href=https://stone-co.github.io/guias/integracao/testando-a-api/>Testando a API</a></li><li data-nav-id=https://stone-co.github.io/guias/integracao/consentimento/ title=Consentimento class=sidelist><a href=https://stone-co.github.io/guias/integracao/consentimento/>Consentimento</a></li><li data-nav-id=https://stone-co.github.io/guias/integracao/aprovacao/ title=Aprovação class=sidelist><a href=https://stone-co.github.io/guias/integracao/aprovacao/>Aprovação</a></li><li data-nav-id=https://stone-co.github.io/guias/integracao/webhooks/ title=Webhooks class=sidelist><a href=https://stone-co.github.io/guias/integracao/webhooks/>Webhooks</a></li></ul></li><li data-nav-id=https://stone-co.github.io/guias/tutoriais/ title=Tutoriais class=sidelist><a href=https://stone-co.github.io/guias/tutoriais/>Tutoriais</a><ul><li data-nav-id=https://stone-co.github.io/guias/tutoriais/integrando-na-pratica/ title="Integrando na Prática" class=sidelist><a href=https://stone-co.github.io/guias/tutoriais/integrando-na-pratica/>Integrando na Prática</a></li></ul></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h2 class=mb-5>Boas Práticas</h2><div class=content><h3 id=tokens-jwt>Tokens JWT</h3><p>Tokens JWT são dados sensíveis, assim como senhas ou dados de cartões de crédito. Por isso, é de extrema importância manusear e armazenar esses dados corretamente.</p><h4 id=não-armazene-tokens-no-local-storage>Não armazene tokens no <em>local storage</em></h4><p>O armazenamento local de um Browser não é um lugar seguro para se armazenar dados sensíveis. Dados armazenados no local storage podem:</p><ul><li>Ser acessados via Javascript;</li><li>Ser vulneráveis a Cross-Site Scripting.</li></ul><h4 id=caso-um-backend-esteja-disponível>Caso um backend esteja disponível</h4><p>Se sua Aplicação tem um backend disponível, os tokens devem ser manuseados server-side.</p><h4 id=caso-um-backend-não-esteja-disponível>Caso um backend não esteja disponível</h4><p>Se sua Aplicação é uma Single Page Application, a Aplicação deve requisitar os tokens e armazená-los em memória sem nenhuma persistência. Faça as chamadas de API usando os tokens armazenados em memória.</p><p>Para outros casos, informações sobre boas práticas com Tokens JWT estão disponíveis <a href=https://auth0.com/docs/security/store-tokens>aqui</a>.</p><h3 id=idempotência>Idempotência</h3><p>Nossos endpoints que envolvem operações financeiras suportam <a href=https://pt.wikipedia.org/wiki/Idempot%C3%AAncia>Idempotência</a>. Existe a possibilidade de ocorrer operações duplicadas, como, por exemplo, com a queda de conexão 3G durante a realização de uma operação. Para evitar que a mesma operação ocorra mais de uma vez no nosso sistema, sempre envie o cabeçalho de Idempotência (x-stone-idempotency-key).</p><p>Observe abaixo cada caso possível em relação à <strong>chave de idempotência</strong> e seus retornos:</p><ul><li>Uma chamada com <strong>outra chave de idempotência</strong>, <strong>independente do corpo da requisição</strong>, será tratada como uma nova requisição.</li><li>Uma chamada com a <strong>mesma chave de idempotência</strong> e o <strong>mesmo corpo da requisição</strong> retornará a mesma resposta que foi recebida anteriormente, devido a um cache.
Se isso ocorrer em um período curto demais pode ocasionar uma resposta <code>HTTP 423</code>, indicando que o recurso está travado e que a requisição original ainda está em processamento. Neste caso, é necessária uma retentativa desta chamada.</li><li>Uma chamada com a <strong>mesma chave de idempotência</strong> e com o <strong>corpo da requisição diferente do original</strong> retornará um erro de idempotência <code>HTTP 409</code>.</li></ul><h3 id=simulações-dry-run>Simulações (dry-run)</h3><p>Nossos endpoints que envolvem operações financeiras suportam <a href=https://docs.openbank.stone.com.br/reference#simular-uma-transfer%C3%AAncia-interna>Simulações (dry-run)</a>, permitindo que a usuária visualize com antecedência o que vai acontecer nessa operação.</p><p>Em alguns casos, as Simulações permitem enriquecer os dados de uma operação, como, por exemplo o <a href=https://docs.openbank.stone.com.br/reference#simular-o-pagamento-de-um-documento>Pagamento de Boletos</a>.</p></div><nav class="pagination mt-3"><a class="nav nav-prev" href=https://stone-co.github.io/guias/integracao/><i class="ti-arrow-left mr-2"></i><span class="d-none d-md-block">Integração</span></a>
<a class="nav nav-next" href=https://stone-co.github.io/guias/integracao/cadastro-da-aplicacao/><span class="d-none d-md-block">Cadastro da Aplicação</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4"></p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline><li class=list-inline-item><a class="text-color d-inline-block p-2" href=#><i class=ti-world></i></a></li><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/stone-co/go-stone-openbank><i class=ti-github></i></a></li></ul></div></div></div></footer><script src=https://stone-co.github.io/js/script.min.js></script></body></html>